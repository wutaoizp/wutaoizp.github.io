<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="lowRISC Verilog ç¼–ç é£æ ¼æŒ‡å—, wutaoã®blog">
    <meta name="description" content="ä¸ªäººåšå®¢">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>lowRISC Verilog ç¼–ç é£æ ¼æŒ‡å— | wutaoã®blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.2">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="wutaoã®blog" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>



   <style>
    body{
       background-image: url(https://cdn.jsdelivr.net/gh/Tokisaki-Galaxy/res/site/medias/background.jpg);
       background-repeat:no-repeat;
       background-size:cover;
       background-attachment:fixed;
    }
</style>



<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">wutaoã®blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>é¦–é¡µ</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>æ ‡ç­¾</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>åˆ†ç±»</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>å½’æ¡£</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>å…³äº</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>ç•™è¨€æ¿</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>å‹æƒ…é“¾æ¥</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="æœç´¢" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">wutaoã®blog</div>
        <div class="logo-desc">
            
            ä¸ªäººåšå®¢
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			é¦–é¡µ
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			æ ‡ç­¾
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			åˆ†ç±»
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			å½’æ¡£
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			å…³äº
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			ç•™è¨€æ¿
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			å‹æƒ…é“¾æ¥
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/0.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">lowRISC Verilog ç¼–ç é£æ ¼æŒ‡å—</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- æ–‡ç« å†…å®¹è¯¦æƒ… -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                          <div class="article-tag">
                            <span class="chip bg-color">æ— æ ‡ç­¾</span>
                          </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>å‘å¸ƒæ—¥æœŸ:&nbsp;&nbsp;
                    2022-10-27
                </div>
                

                

                

                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>é˜…è¯»æ¬¡æ•°:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="lowRISC-Verilog-ç¼–ç é£æ ¼æŒ‡å—"><a href="#lowRISC-Verilog-ç¼–ç é£æ ¼æŒ‡å—" class="headerlink" title="lowRISC Verilog ç¼–ç é£æ ¼æŒ‡å—"></a>lowRISC Verilog ç¼–ç é£æ ¼æŒ‡å—</h1><h2 id="åŸºæœ¬"><a href="#åŸºæœ¬" class="headerlink" title="åŸºæœ¬"></a>åŸºæœ¬</h2><h3 id="æ¦‚æ‹¬"><a href="#æ¦‚æ‹¬" class="headerlink" title="æ¦‚æ‹¬"></a>æ¦‚æ‹¬</h3><p>Verilog æ˜¯ä½RISC å¯ç§»æ¤IP çš„ä¸»è¦é€»è¾‘è®¾è®¡è¯­è¨€ã€‚</p>
<p>Verilog å’Œ SystemVerilogï¼ˆåœ¨æœ¬æ–‡æ¡£ä¸­é€šå¸¸ç®€ç§°ä¸ºâ€œVerilogâ€ï¼‰å¯ä»¥ä»¥æˆªç„¶ä¸åŒçš„é£æ ¼ç¼–å†™ï¼Œè¿™å¯èƒ½å¯¼è‡´ä»£ç å†²çªå’Œä»£ç å®¡æŸ¥å»¶è¿Ÿã€‚æœ¬æ ·å¼æŒ‡å—æ—¨åœ¨æé«˜ Verilog è·¨ç»„çš„å¯è¯»æ€§ã€‚å¼•ç”¨ <a target="_blank" rel="noopener" href="https://google.github.io/styleguide/cppguide.html">Google C++ é£æ ¼æŒ‡å—</a>ï¼šâ€œåˆ›å»ºé€šç”¨çš„ã€å¿…éœ€çš„ä¹ è¯­å’Œæ¨¡å¼ä½¿ä»£ç æ›´å®¹æ˜“ç†è§£ã€‚â€</p>
<p>æœ¬æŒ‡å—å®šä¹‰äº† Verilog çš„å¯ç§»æ¤æ ·å¼ã€‚ç›®æ ‡æ˜¯ï¼š</p>
<ul>
<li>ä¿ƒè¿›ç¡¬ä»¶å¼€å‘é¡¹ç›®çš„ä¸€è‡´æ€§</li>
<li>æ¨å¹¿æœ€ä½³å®è·µ</li>
<li>å¢åŠ ä»£ç å…±äº«å’Œé‡ç”¨</li>
</ul>
<p>æœ¬æ ·å¼æŒ‡å—å®šä¹‰äº† Verilog-2001 å’Œ SystemVerilog å…¼å®¹ä»£ç çš„æ ·å¼ã€‚æ­¤å¤–ï¼Œæœ¬æ ·å¼æŒ‡å—å®šä¹‰äº†å¯ç»¼åˆä»£ç å’Œæµ‹è¯•å°ä»£ç çš„æ ·å¼ã€‚</p>
<p>æœ‰å…³æ­¤æ ·å¼æŒ‡å—çš„ç®€æ˜è¡¨æ ¼è¡¨ç¤ºï¼Œè¯·å‚è§<a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#appendix---condensed-style-guide">é™„å½•ã€‚</a></p>
<p><strong>ç›®å½•</strong></p>
<ul>
<li>lowRISC Verilog ç¼–ç é£æ ¼æŒ‡å—<ul>
<li>åŸºæœ¬<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#summary">æ¦‚æ‹¬</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#terminology-conventions">æœ¯è¯­çº¦å®š</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#default-to-c-like-formatting">é»˜è®¤ä¸ºç±» C æ ¼å¼</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#style-guide-exceptions">æ ·å¼æŒ‡å—ä¾‹å¤–</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#which-verilog-to-use">ä½¿ç”¨å“ªä¸ª Verilog</a></li>
</ul>
</li>
<li>Verilog/SystemVerilog çº¦å®š<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#summary-1">æ¦‚æ‹¬</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#file-extensions">æ–‡ä»¶æ‰©å±•å</a></li>
<li>ä¸€èˆ¬æ–‡ä»¶å¤–è§‚<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#characters">äººç‰©</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#posix-file-endings">POSIX æ–‡ä»¶ç»“å°¾</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#line-length">çº¿é•¿</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#no-tabs">æ²¡æœ‰æ ‡ç­¾</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#no-trailing-spaces">æ²¡æœ‰å°¾éšç©ºæ ¼</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#begin--end">å¼€å§‹/ç»“æŸ</a></li>
<li>ç¼©è¿›<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#indented-sections">ç¼©è¿›éƒ¨åˆ†</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#line-wrapping">æ¢è¡Œ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#preprocessor-directives">é¢„å¤„ç†å™¨æŒ‡ä»¤</a></li>
</ul>
</li>
<li>é—´è·<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#comma-delimited-lists">é€—å·åˆ†éš”çš„åˆ—è¡¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#tabular-alignment">è¡¨æ ¼å¯¹é½</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#expressions">è¡¨è¾¾å¼</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#array-dimensions-in-declarations">å£°æ˜ä¸­çš„æ•°ç»„ç»´åº¦</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#parameterized-types">å‚æ•°åŒ–ç±»å‹</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#labels">æ ‡ç­¾</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#case-items">æ¡ˆä¾‹é¡¹ç›®</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#function-and-task-calls">å‡½æ•°å’Œä»»åŠ¡è°ƒç”¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#macro-calls">å®è°ƒç”¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#line-continuation">ç»­è¡Œ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#space-around-keywords">å…³é”®å­—å‘¨å›´çš„ç©ºé—´</a></li>
</ul>
</li>
<li>æ‹¬å·<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#ternary-expressions">ä¸‰å…ƒè¡¨è¾¾å¼</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#comments">æ³¨é‡Š</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#declarations">å£°æ˜</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#basic-template">åŸºæœ¬æ¨¡æ¿</a></li>
</ul>
</li>
<li>æˆ‘ä»¬<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#summary-2">æ¦‚æ‹¬</a></li>
<li>å¸¸æ•°<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#parameterized-objects-modules-etc">å‚æ•°åŒ–å¯¹è±¡ï¼ˆæ¨¡å—ç­‰ï¼‰</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#macro-definitions">å®å®šä¹‰</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#suffixes">åç¼€</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#enumerations">æšä¸¾</a></li>
<li>ä¿¡å·å‘½å<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#use-descriptive-names">ä½¿ç”¨æè¿°æ€§åç§°</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#prefixes">å‰ç¼€</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#hierarchical-consistency">å±‚æ¬¡ä¸€è‡´æ€§</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#clocks">æ—¶é’Ÿ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#resets">é‡ç½®</a></li>
</ul>
</li>
<li>è¯­è¨€ç‰¹ç‚¹<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#preferred-systemverilog-constructs">é¦–é€‰ SystemVerilog æ„é€ </a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#package-dependencies">åŒ…ä¾èµ–</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#module-declaration">æ¨¡å—å£°æ˜</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#module-instantiation">æ¨¡å—å®ä¾‹åŒ–</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#constants-1">å¸¸æ•°</a></li>
<li>ä¿¡å·å®½åº¦<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#always-be-explicit-about-the-widths-of-number-literals">å§‹ç»ˆæ˜ç¡®æ•°å­—æ–‡å­—çš„å®½åº¦ã€‚</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#port-connections-on-module-instances-must-always-match-widths-correctly">æ¨¡å—å®ä¾‹ä¸Šçš„ç«¯å£è¿æ¥å¿…é¡»å§‹ç»ˆæ­£ç¡®åŒ¹é…å®½åº¦ã€‚</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#do-not-use-multi-bit-signals-in-a-boolean-context">ä¸è¦åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨å¤šä½ä¿¡å·ã€‚</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#bit-slicing">ä½åˆ‡ç‰‡</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#handling-width-overflow">å¤„ç†å®½åº¦æº¢å‡º</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#blocking-and-non-blocking-assignments">é˜»å¡å’Œéé˜»å¡èµ‹å€¼</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#delay-modeling">å»¶è¿Ÿå»ºæ¨¡</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#sequential-logic-latches">é¡ºåºé€»è¾‘ï¼ˆé”å­˜å™¨ï¼‰</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#sequential-logic-registers">é¡ºåºé€»è¾‘ï¼ˆå¯„å­˜å™¨ï¼‰</a></li>
<li>ä¸åœ¨ä¹ï¼ˆ<code>X</code>â€˜sï¼‰<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#catching-errors-where-invalid-values-are-consumed">æ•è·ä½¿ç”¨æ— æ•ˆå€¼çš„é”™è¯¯</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#specific-guidance-on-case-statements-and-ternaries">æ¡ˆä¾‹é™ˆè¿°å’Œä¸‰å…ƒç»„çš„å…·ä½“æŒ‡å¯¼</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#dynamic-array-indexing">åŠ¨æ€æ•°ç»„ç´¢å¼•</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#combinational-logic">ç»„åˆé€»è¾‘</a></li>
<li>æ¡ˆä¾‹é™ˆè¿°<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#wildcards-in-case-items">æ¡ˆä¾‹é¡¹ç›®ä¸­çš„é€šé…ç¬¦</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#generate-constructs">ç”Ÿæˆæ„é€ </a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#signed-arithmetic">æœ‰ç¬¦å·ç®—æœ¯</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#number-formatting">æ•°å­—æ ¼å¼</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#functions-and-tasks">åŠŸèƒ½å’Œä»»åŠ¡</a></li>
<li>æœ‰é—®é¢˜çš„è¯­è¨€ç‰¹å¾å’Œç»“æ„<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#floating-begin-end-blocks">æµ®åŠ¨èµ·å§‹å—</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#hierarchical-references">åˆ†å±‚å¼•ç”¨</a></li>
</ul>
</li>
</ul>
</li>
<li>è®¾è®¡æƒ¯ä¾‹<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#summary-3">æ¦‚æ‹¬</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#declare-all-signals">å£°æ˜æ‰€æœ‰ä¿¡å·</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#use-logic-for-synthesis">ç”¨äº<code>logic</code>åˆæˆ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#logical-vs-bitwise">é€»è¾‘ä¸æŒ‰ä½</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#packed-ordering">æ‰“åŒ…è®¢è´­</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#unpacked-ordering">æ— åŒ…è£…è®¢è´­</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#finite-state-machines">æœ‰é™çŠ¶æ€æœº</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#active-low-signals">ä½ç”µå¹³æœ‰æ•ˆä¿¡å·</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#differential-pairs">å·®åˆ†å¯¹</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#delays">å»¶è¯¯</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#wildcard-import-of-packages">åŒ…çš„é€šé…ç¬¦å¯¼å…¥</a></li>
<li>æ–­è¨€å®<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#a-note-on-security-critical-applications">å…³äºå®‰å…¨å…³é”®åº”ç”¨ç¨‹åºçš„è¯´æ˜</a></li>
</ul>
</li>
</ul>
</li>
<li>é™„å½• - ç²¾ç®€é£æ ¼æŒ‡å—<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#basic-style-elements">åŸºæœ¬æ ·å¼å…ƒç´ </a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#construct-naming">æ„é€ å‘½å</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#suffixes-for-signals-and-types">ä¿¡å·å’Œç±»å‹çš„åç¼€</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#language-features-1">è¯­è¨€ç‰¹ç‚¹</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="æœ¯è¯­çº¦å®š"><a href="#æœ¯è¯­çº¦å®š" class="headerlink" title="æœ¯è¯­çº¦å®š"></a>æœ¯è¯­çº¦å®š</h3><p>é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™ä»¥ä¸‹æœ¯è¯­çº¦å®šé€‚ç”¨äºæœ¬æ ·å¼æŒ‡å—ï¼š</p>
<ul>
<li><em><strong>â€œå¿…é¡»</strong></em>â€ä¸€è¯è¡¨ç¤ºå¼ºåˆ¶æ€§è¦æ±‚ã€‚åŒæ ·ï¼Œ<em><strong>ä¸</strong></em>è¡¨ç¤ºç¦æ­¢ã€‚å‘½ä»¤å¼å’Œå£°æ˜å¼è¯­å¥å¯¹åº”äº<em><strong>must</strong></em>ã€‚</li>
<li><em><strong>æ¨è</strong></em>è¿™ä¸ªè¯è¡¨ç¤ºæŸç§è¡ŒåŠ¨æ–¹æ¡ˆæ˜¯é¦–é€‰æˆ–æœ€åˆé€‚çš„ã€‚ç±»ä¼¼åœ°ï¼Œ<em><strong>ä¸æ¨è</strong></em>è¡¨ç¤ºä¸€ä¸ªè¡ŒåŠ¨è¿‡ç¨‹ä¸åˆé€‚ï¼Œä½†ä¸è¢«ç¦æ­¢ã€‚ä½¿ç”¨å…¶ä»–é€‰é¡¹å¯èƒ½æœ‰ç†ç”±ï¼Œä½†å¿…é¡»å……åˆ†ç†è§£è¿™æ ·åšçš„å«ä¹‰å’ŒåŸå› ã€‚</li>
<li><em><strong>â€œå¯èƒ½</strong></em>â€ä¸€è¯è¡¨ç¤ºå…è®¸å’Œå¯é€‰çš„æ“ä½œè¿‡ç¨‹ã€‚</li>
<li><em><strong>â€œå¯ä»¥</strong></em>â€è¿™ä¸ªè¯è¡¨ç¤ºåœ¨ç‰©è´¨ã€ç‰©ç†æˆ–å› æœé™åˆ¶çš„æƒ…å†µä¸‹å¯èƒ½é‡‡å–çš„è¡ŒåŠ¨ã€‚</li>
</ul>
<h3 id="é»˜è®¤ä¸ºç±»-C-æ ¼å¼"><a href="#é»˜è®¤ä¸ºç±»-C-æ ¼å¼" class="headerlink" title="é»˜è®¤ä¸ºç±» C æ ¼å¼"></a>é»˜è®¤ä¸ºç±» C æ ¼å¼</h3><p><em><strong>åœ¨é€‚å½“çš„æƒ…å†µä¸‹ï¼Œæ ¼å¼ä»£ç ä¸ <a target="_blank" rel="noopener" href="https://google.github.io/styleguide/cppguide.html">https://google.github.io/styleguide/cppguide.htmlä¸€è‡´</a></strong></em></p>
<p>Verilog æ˜¯ä¸€ç§ç±» C è¯­è¨€ï¼Œåœ¨é€‚å½“çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é»˜è®¤ä¸ <a target="_blank" rel="noopener" href="https://google.github.io/styleguide/cppguide.html">Google çš„ C++ æ ·å¼æŒ‡å—</a>ä¿æŒä¸€è‡´ã€‚</p>
<p>ç‰¹åˆ«æ˜¯ï¼Œæˆ‘ä»¬ç»§æ‰¿äº†è¿™äº›ç‰¹å®šçš„æ ¼å¼æŒ‡å—ï¼š</p>
<ul>
<li>ä¸€èˆ¬æ¥è¯´ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#naming">åç§°</a>åº”è¯¥æ˜¯æè¿°æ€§çš„ï¼Œé¿å…ç¼©å†™ã€‚</li>
<li>ç¦æ­¢ä½¿ç”¨é ASCII å­—ç¬¦ã€‚</li>
<li>ç¼©è¿›ä½¿ç”¨ç©ºæ ¼ï¼Œæ²¡æœ‰åˆ¶è¡¨ç¬¦ã€‚ç¼©è¿›æ˜¯ä¸¤ä¸ªç©ºæ ¼ç”¨äºåµŒå¥—ï¼Œå››ä¸ªç©ºæ ¼ç”¨äºç»­è¡Œã€‚</li>
<li><code>if</code>åœ¨ <a target="_blank" rel="noopener" href="https://google.github.io/styleguide/cppguide.html#Conditionals">æ¡ä»¶è¡¨è¾¾å¼</a>ä¸­çš„æ‹¬å·å’Œæ‹¬å·ä¹‹é—´æ”¾ç½®ä¸€ä¸ªç©ºæ ¼ã€‚</li>
<li>åœ¨è¿ç®—ç¬¦å‘¨å›´ä½¿ç”¨æ°´å¹³ç©ºæ ¼ï¼Œå¹¶é¿å…åœ¨è¡Œå°¾å‡ºç°å°¾éšç©ºæ ¼ã€‚</li>
<li>ä¿æŒä¸€è‡´å’Œè‰¯å¥½çš„ <a target="_blank" rel="noopener" href="https://google.github.io/styleguide/cppguide.html#Punctuation,_Spelling_and_Grammar">æ ‡ç‚¹ã€æ‹¼å†™å’Œè¯­æ³•</a> ï¼ˆåœ¨è¯„è®ºä¸­ï¼‰ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#comments">å¯¹æ³¨é‡Š</a>ä½¿ç”¨æ ‡å‡†æ ¼å¼ï¼ŒåŒ…æ‹¬<a target="_blank" rel="noopener" href="https://google.github.io/styleguide/cppguide.html#TODO_Comments">TODO</a>å’Œ<a target="_blank" rel="noopener" href="https://google.github.io/styleguide/cppguide.html#Deprecation_Comments">deprecation</a>çš„ç±» C æ ¼å¼ã€‚</li>
</ul>
<h3 id="æ ·å¼æŒ‡å—ä¾‹å¤–"><a href="#æ ·å¼æŒ‡å—ä¾‹å¤–" class="headerlink" title="æ ·å¼æŒ‡å—ä¾‹å¤–"></a>æ ·å¼æŒ‡å—ä¾‹å¤–</h3><p><em><strong>ç”¨è¯„è®ºè¯æ˜æ‰€æœ‰ä¾‹å¤–ã€‚</strong></em></p>
<p>æ²¡æœ‰é£æ ¼æŒ‡å—æ˜¯å®Œç¾çš„ã€‚æœ‰æ—¶ï¼Œå®ç°å·¥ä½œè®¾è®¡æˆ–è§£å†³å·¥å…·é—®é¢˜çš„æœ€ä½³é€”å¾„æ˜¯ç®€å•åœ°åˆ‡æ–­ Gordian Knot å¹¶åˆ›å»ºä¸æœ¬æ ·å¼æŒ‡å—ä¸ä¸€è‡´çš„ä»£ç ã€‚å¿…è¦æ—¶åç¦»é£æ ¼æŒ‡å—æ€»æ˜¯å¯ä»¥çš„ï¼Œåªè¦ç®€çŸ­çš„è¯„è®ºæ¸…æ¥šåœ°è¯æ˜äº†è¿™ç§å¿…è¦æ€§ï¼Œä»¥åŠé€‚å½“çš„ lint waiver pragmaã€‚</p>
<h3 id="ä½¿ç”¨å“ªä¸ª-Verilog"><a href="#ä½¿ç”¨å“ªä¸ª-Verilog" class="headerlink" title="ä½¿ç”¨å“ªä¸ª Verilog"></a>ä½¿ç”¨å“ªä¸ª Verilog</h3><p><em><strong>é¦–é€‰ SystemVerilog-2017ã€‚</strong></em></p>
<p>æ‰€æœ‰ RTL å’Œæµ‹è¯•éƒ½åº”åœ¨ SystemVerilog ä¸­å¼€å‘ï¼Œéµå¾ª <a target="_blank" rel="noopener" href="https://ieeexplore.ieee.org/document/8299595">IEEE 1800-2017 (SystemVerilog-2017) æ ‡å‡†ï¼Œ</a><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#problematic-language-features-and-constructs">ç¦æ­¢çš„åŠŸèƒ½</a>é™¤å¤–ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://ieeexplore.ieee.org/browse/standards/get-program/page/series?id=80">æ ‡å‡†æ–‡æ¡£å¯é€šè¿‡IEEE GET</a>å…è´¹è·å¾—ï¼ˆéœ€è¦æ³¨å†Œï¼‰ã€‚</p>
<h2 id="Verilog-SystemVerilog-çº¦å®š"><a href="#Verilog-SystemVerilog-çº¦å®š" class="headerlink" title="Verilog/SystemVerilog çº¦å®š"></a>Verilog/SystemVerilog çº¦å®š</h2><h3 id="æ¦‚æ‹¬-1"><a href="#æ¦‚æ‹¬-1" class="headerlink" title="æ¦‚æ‹¬"></a>æ¦‚æ‹¬</h3><p>æœ¬èŠ‚ä¸»è¦è®¨è®ºé£æ ¼çš„ç¾å­¦æ–¹é¢ï¼šè¡Œé•¿ã€ç¼©è¿›ã€é—´è·ç­‰ã€‚</p>
<h3 id="æ–‡ä»¶æ‰©å±•å"><a href="#æ–‡ä»¶æ‰©å±•å" class="headerlink" title="æ–‡ä»¶æ‰©å±•å"></a>æ–‡ä»¶æ‰©å±•å</h3><p><em><strong>ä½¿ç”¨<code>.sv</code>SystemVerilog æ–‡ä»¶çš„æ‰©å±•åï¼ˆæˆ–<code>.svh</code>é€šè¿‡é¢„å¤„ç†å™¨åŒ…å«çš„æ–‡ä»¶ï¼‰ã€‚</strong></em></p>
<p>æ–‡ä»¶æ‰©å±•åå…·æœ‰ä»¥ä¸‹å«ä¹‰ï¼š</p>
<ul>
<li><code>.sv</code>è¡¨ç¤ºå®šä¹‰æ¨¡å—æˆ–åŒ…çš„ SystemVerilog æ–‡ä»¶ã€‚</li>
<li><code>.svh</code>è¡¨ç¤ºä¸€ä¸ª SystemVerilog å¤´æ–‡ä»¶ï¼Œæ—¨åœ¨ä½¿ç”¨é¢„å¤„ç†å™¨``include`æŒ‡ä»¤åŒ…å«åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚</li>
<li><code>.v</code>è¡¨ç¤ºå®šä¹‰æ¨¡å—æˆ–åŒ…çš„ Verilog-2001 æ–‡ä»¶ã€‚</li>
<li><code>.vh</code>è¡¨ç¤º Verilog-2001 å¤´æ–‡ä»¶ã€‚</li>
</ul>
<p>åªæœ‰<code>.sv</code>å’Œ<code>.v</code>æ–‡ä»¶æ—¨åœ¨ä½œä¸ºç¼–è¯‘å•å…ƒã€‚<code>.svh</code>å¹¶ä¸”<code>.vh</code> æ–‡ä»¶åªèƒ½è¢«``include`ç¼–è¾‘åˆ°å…¶ä»–æ–‡ä»¶ä¸­ã€‚</p>
<p>é™¤ç½‘è¡¨æ–‡ä»¶å¤–ï¼Œæ¯ä¸ª .sv æˆ– .v æ–‡ä»¶åº”ä»…åŒ…å«ä¸€ä¸ªæ¨¡å—ï¼Œå¹¶ä¸”åç§°åº”ç›¸å…³è”ã€‚ä¾‹å¦‚ï¼Œæ–‡ä»¶<code>foo.sv</code>åº”è¯¥åªåŒ…å«æ¨¡å—<code>foo</code>ã€‚</p>
<h3 id="ä¸€èˆ¬æ–‡ä»¶å¤–è§‚"><a href="#ä¸€èˆ¬æ–‡ä»¶å¤–è§‚" class="headerlink" title="ä¸€èˆ¬æ–‡ä»¶å¤–è§‚"></a>ä¸€èˆ¬æ–‡ä»¶å¤–è§‚</h3><h4 id="äººç‰©"><a href="#äººç‰©" class="headerlink" title="äººç‰©"></a>äººç‰©</h4><p><em><strong>ä»…ä½¿ç”¨å¸¦æœ‰ UNIX é£æ ¼è¡Œå°¾ ( <code>"\n"</code>) çš„ ASCII å­—ç¬¦ã€‚</strong></em></p>
<h4 id="POSIX-æ–‡ä»¶ç»“å°¾"><a href="#POSIX-æ–‡ä»¶ç»“å°¾" class="headerlink" title="POSIX æ–‡ä»¶ç»“å°¾"></a>POSIX æ–‡ä»¶ç»“å°¾</h4><p><em><strong>éç©ºæ–‡ä»¶ä¸Šçš„æ‰€æœ‰è¡Œéƒ½å¿…é¡»ä»¥æ¢è¡Œç¬¦ ( <code>"\n"</code>) ç»“å°¾ã€‚</strong></em></p>
<h4 id="çº¿é•¿"><a href="#çº¿é•¿" class="headerlink" title="çº¿é•¿"></a>çº¿é•¿</h4><p><em><strong>ä»¥æ¯è¡Œ 100 ä¸ªå­—ç¬¦åŒ…è£…ä»£ç ã€‚</strong></em></p>
<p>ç¬¦åˆæ ·å¼çš„ Verilog ä»£ç çš„æœ€å¤§è¡Œé•¿åº¦ä¸ºæ¯è¡Œ 100 ä¸ªå­—ç¬¦ã€‚</p>
<p>ä¾‹å¤–ï¼š</p>
<ul>
<li>ä»»ä½•ä¸å¯èƒ½æ¢è¡Œçš„åœ°æ–¹ï¼ˆä¾‹å¦‚ï¼ŒåŒ…å«è·¯å¾„å¯èƒ½è¶…è¿‡ 100 ä¸ªå­—ç¬¦ï¼‰ã€‚</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#line-wrapping">æ¢è¡Œ</a>åŒ…å«æœ‰å…³å¦‚ä½•æ¢è¡Œé•¿è¡Œçš„é™„åŠ æŒ‡å—ã€‚</p>
<h4 id="æ²¡æœ‰æ ‡ç­¾"><a href="#æ²¡æœ‰æ ‡ç­¾" class="headerlink" title="æ²¡æœ‰æ ‡ç­¾"></a>æ²¡æœ‰æ ‡ç­¾</h4><p><em><strong>ä¸è¦åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨æ ‡ç­¾ã€‚</strong></em></p>
<p>ä½¿ç”¨ç©ºæ ¼ç¼©è¿›æˆ–å¯¹é½æ–‡æœ¬ã€‚æœ‰å…³ç¼©è¿›å’Œæ¢è¡Œçš„è§„åˆ™ï¼Œè¯·å‚é˜…<a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#indentation">ç¼©è¿›ã€‚</a></p>
<p>è¦å°†ä»»ä½•æ–‡ä»¶ä¸Šçš„åˆ¶è¡¨ç¬¦è½¬æ¢ä¸ºç©ºæ ¼ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <a target="_blank" rel="noopener" href="http://linux.die.net/man/1/expand">UNIX<code>expand</code></a>å®ç”¨ç¨‹åºã€‚</p>
<h4 id="æ²¡æœ‰å°¾éšç©ºæ ¼"><a href="#æ²¡æœ‰å°¾éšç©ºæ ¼" class="headerlink" title="æ²¡æœ‰å°¾éšç©ºæ ¼"></a>æ²¡æœ‰å°¾éšç©ºæ ¼</h4><p><em><strong>åˆ é™¤è¡Œå°¾çš„å°¾éšç©ºæ ¼ã€‚</strong></em></p>
<h3 id="å¼€å§‹-ç»“æŸ"><a href="#å¼€å§‹-ç»“æŸ" class="headerlink" title="å¼€å§‹/ç»“æŸ"></a>å¼€å§‹/ç»“æŸ</h3><p><em><strong>ä½¿ç”¨<code>begin</code>and<code>end</code>é™¤éæ•´ä¸ªè¯­å¥é€‚åˆä¸€è¡Œã€‚</strong></em></p>
<p>å¦‚æœè¯­å¥åœ¨å—è¾¹ç•Œå¤„æ¢è¡Œï¼Œåˆ™å¿…é¡»ä½¿ç”¨<code>begin</code>and<code>end.</code>ä»…å½“æ•´ä¸ªä»¥åˆ†å·ç»“å°¾çš„è¯­å¥é€‚åˆå•è¡Œæ—¶æ‰å¯ä»¥<code>begin</code>çœç•¥ <code>end</code>ã€‚</p>
<p>ğŸ‘</p>
<pre><code>// Wrapped procedural block requires begin and end.
always_ff @(posedge clk) begin
  q &lt;= d;
end
</code></pre>
<p>ğŸ‘</p>
<pre><code>// The exception case, where begin and end may be omitted as the entire
// structure fits on a single line.
always_ff @(posedge clk) q &lt;= d;
</code></pre>
<p>ğŸ‘</p>
<pre><code>// Incorrect because a wrapped statement must have begin and end.
always_ff @(posedge clk)
  q &lt;= d;
</code></pre>
<p><code>begin</code>å¿…é¡»ä¸å‰é¢çš„å…³é”®å­—åœ¨åŒä¸€è¡Œï¼Œå¹¶ç»“æŸè¯¥è¡Œã€‚ <code>end</code>å¿…é¡»å¼€å§‹ä¸€ä¸ªæ–°è¡Œã€‚<code>end else begin</code>å¿…é¡»åœ¨ä¸€æ¡çº¿ä¸Šã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯å¦‚æœ<code>end</code>æœ‰æ ‡ç­¾ï¼Œåˆ™åç»­<code>else</code>åº”è¯¥åœ¨æ–°è¡Œä¸Šã€‚</p>
<p>ğŸ‘</p>
<pre><code>// "end else begin" are on the same line.
if (condition) begin
  foo = bar;
end else begin
  foo = bum;
end
</code></pre>
<p>ğŸ‘</p>
<pre><code>// begin/end are omitted because each semicolon-terminated statement fits on
// a single line.
if (condition) foo = bar;
else foo = bum;
</code></pre>
<p>ğŸ‘</p>
<pre><code>// Incorrect because "else" must be on the same line as "end".
if (condition) begin
  foo = bar;
end
else begin
  foo = bum;
end
</code></pre>
<p>ğŸ‘</p>
<pre><code>// An exception is made for labeled blocks.
if (condition) begin : a
  foo = bar;
end : a
else begin : b
  foo = bum;
end : b
</code></pre>
<p>ä¸Šè¿°é£æ ¼ä¹Ÿé€‚ç”¨äºæ¡ˆä¾‹é™ˆè¿°ä¸­çš„ä¸ªåˆ«æ¡ˆä¾‹é¡¹ç›®ã€‚ å¦‚æœæ•´ä¸ª case é¡¹ï¼ˆcase è¡¨è¾¾å¼å’Œç›¸å…³çš„è¯­å¥ï¼‰é€‚åˆä¸€è¡Œï¼Œåˆ™å¯ä»¥çœç•¥<code>begin</code>ã€‚<code>end</code>å¦åˆ™ï¼Œ<code>begin</code> åœ¨ä¸ case è¡¨è¾¾å¼ç›¸åŒçš„è¡Œä¸Šä½¿ç”¨å…³é”®å­—ã€‚</p>
<p>ğŸ‘</p>
<pre><code>// Consistent use of begin and end for each case item is good.
unique case (state_q)
  StIdle: begin
    state_d = StA;
  end
  StA: begin
    state_d = StB;
  end
  StB: begin
    state_d = StIdle;
    foo = bar;
  end
  default: begin
    state_d = StIdle;
  end
endcase
</code></pre>
<p>ğŸ‘</p>
<pre><code>// Case items that fit on a single line may omit begin and end.
unique case (state_q)
  StIdle: state_d = StA;
  StA: state_d = StB;
  StB: begin
    state_d = StIdle;
    foo = bar;
  end
  default: state_d = StIdle;
endcase
</code></pre>
<p>ğŸ‘</p>
<pre><code>unique case (state_q)
  StIdle:           // These lines are incorrect because we should not wrap
    state_d = StA;  // case items at a block boundary without using begin
  StA:              // and end.  Case items should fit on a single line, or
    state_d = StB;  // else the procedural block must have begin and end.
  StB: begin
    foo = bar;
    state_d = StIdle;
  end
  default: begin
    state_d = StIdle;
  end
endcase
</code></pre>
<h3 id="ç¼©è¿›"><a href="#ç¼©è¿›" class="headerlink" title="ç¼©è¿›"></a>ç¼©è¿›</h3><p><em><strong>ç¼©è¿›æ˜¯æ¯å±‚ä¸¤ä¸ªç©ºæ ¼ã€‚</strong></em></p>
<p>ä½¿ç”¨ç©ºæ ¼è¿›è¡Œç¼©è¿›ã€‚ä¸è¦ä½¿ç”¨æ ‡ç­¾ã€‚æ‚¨åº”è¯¥å°†ç¼–è¾‘å™¨è®¾ç½®ä¸ºåœ¨æ‚¨æŒ‰ Tab é”®æ—¶å‘å‡ºç©ºæ ¼ã€‚</p>
<h4 id="ç¼©è¿›éƒ¨åˆ†"><a href="#ç¼©è¿›éƒ¨åˆ†" class="headerlink" title="ç¼©è¿›éƒ¨åˆ†"></a>ç¼©è¿›éƒ¨åˆ†</h4><p>å§‹ç»ˆä¸ºæ‰€æœ‰é…å¯¹å…³é”®å­—çš„å°é—­éƒ¨åˆ†æ·»åŠ é¢å¤–çš„ç¼©è¿›çº§åˆ«ã€‚SystemVerilog å…³é”®å­—å¯¹ç¤ºä¾‹ï¼š<code>begin / end</code>, <code>module / endmodule</code>, <code>package / endpackage</code>, <code>class / endclass</code>, <code>function / endfunction</code>.</p>
<h4 id="æ¢è¡Œ"><a href="#æ¢è¡Œ" class="headerlink" title="æ¢è¡Œ"></a>æ¢è¡Œ</h4><p>åŒ…è£…é•¿è¡¨è¾¾å¼æ—¶ï¼Œå°†è¡¨è¾¾å¼çš„è¿ç»­éƒ¨åˆ†ç¼©è¿›å››ä¸ªç©ºæ ¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>ğŸ‘</p>
<pre><code>assign zulu = enabled &amp;&amp; (
    alpha &lt; bravo &amp;&amp;
    charlie &lt; delta
);

assign addr = addr_gen_function_with_many_params(
    thing, other_thing, long_parameter_name, x, y,
    extra_param1, extra_param2
);

assign structure = '{
    src: src,
    dest: dest,
    default: '0
};
</code></pre>
<p>æˆ–è€…ï¼Œå¦‚æœå®ƒæé«˜äº†å¯è¯»æ€§ï¼Œåˆ™å°†è¡¨è¾¾å¼çš„åç»­éƒ¨åˆ†ä¸åˆ†ç»„å·¦æ‹¬å·æˆ–å¤§æ‹¬å·å¯¹é½ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>ğŸ‘</p>
<pre><code>assign zulu = enabled &amp;&amp; (alpha &lt; bravo &amp;&amp;
                          charlie &lt; delta);

assign addr = addr_gen_function(thing, other_thing,
                                long_parameter_name,
                                x, y);

assign structure = '{src: src,
                     dest: dest,
                     default: '0};
</code></pre>
<p>åŒ…è£…è¡¨è¾¾å¼ä¸­çš„è¿ç®—ç¬¦å¯ä»¥æ”¾åœ¨æ¯è¡Œçš„æœ«å°¾æˆ–å¼€å¤´ï¼Œä½†è¿™å¿…é¡»åœ¨æ–‡ä»¶ä¸­ä¸€è‡´åœ°å®Œæˆã€‚</p>
<p>å¤šè¡Œè¡¨è¾¾å¼çš„ä¸€è¡Œç»“æŸçš„å¼€æ”¾è¯­æ³•å­—ç¬¦ï¼ˆä¾‹å¦‚<code>{</code>æˆ–ï¼‰åº”åœ¨å„è‡ªçš„è¡Œä¸Šä»¥å…³é—­å­—ç¬¦ ( , ) ç»ˆæ­¢ã€‚ä¾‹å­ï¼š<code>(``}``)</code></p>
<p>ğŸ‘</p>
<pre><code>assign bus_concatenation = {
    bus_valid,
    bus_parity[7:0],
    bus_valid[63:0]
};

inst_type inst_name1 (
  .clk_i       (clk),
  .data_valid_i(data_valid),
  .data_value_i(data_value),
  .data_ready_o(data_ready)
);
</code></pre>
<h4 id="é¢„å¤„ç†å™¨æŒ‡ä»¤"><a href="#é¢„å¤„ç†å™¨æŒ‡ä»¤" class="headerlink" title="é¢„å¤„ç†å™¨æŒ‡ä»¤"></a>é¢„å¤„ç†å™¨æŒ‡ä»¤</h4><p><em><strong>ä¿æŒåˆ†æ”¯é¢„å¤„ç†å™¨æŒ‡ä»¤å·¦å¯¹é½ä¸”ä¸ç¼©è¿›ã€‚</strong></em></p>
<p>ä¿æŒåˆ†æ”¯é¢„å¤„ç†å™¨æŒ‡ä»¤ï¼ˆ<code> </code>ifdef<code>, ``ifndef</code>, <code>else`, </code>elsif<code>, ``endif</code>ï¼‰å·¦å¯¹é½ï¼Œå³ä½¿å®ƒä»¬æ˜¯åµŒå¥—çš„ã€‚ç¼©è¿›æ–‡æœ¬çš„æ¡ä»¶åˆ†æ”¯ï¼Œå°±å¥½åƒæ²¡æœ‰é¢„å¤„ç†å™¨æŒ‡ä»¤ä¸€æ ·ã€‚éåˆ†æ”¯é¢„å¤„ç†å™¨æŒ‡ä»¤å¿…é¡»éµå¾ªä¸å¸¸è§„ä»£ç ç›¸åŒçš„ç¼©è¿›è§„åˆ™ã€‚</p>
<p>ğŸ‘</p>
<pre><code>package foo;
`ifdef FOO              // good: branching directive left-aligned
  `include "foo.sv";    // normal indentation for non-branching directives
  parameter bit A = 1;  // normal indentation for the regular code
`ifdef BAR              // good: branching directive left-aligned
  parameter bit A = 2;
`else
  parameter bit A = 3;
`endif
`endif
endpackage : foo
</code></pre>
<p>æœªç¼©è¿›çš„åˆ†æ”¯é¢„å¤„ç†å™¨æŒ‡ä»¤ä¼šç ´åé˜…è¯»æµç¨‹ä»¥å¼ºè°ƒå­˜åœ¨æ¡ä»¶æ–‡æœ¬ã€‚ä¿ç•™æ¡ä»¶åˆ†æ”¯æ–‡æœ¬ä¸ç¼©è¿›å°†å¯¼è‡´é¢„å¤„ç†åçš„æ–‡æœ¬çœ‹èµ·æ¥æ­£ç¡®ç¼©è¿›ã€‚</p>
<h3 id="é—´è·"><a href="#é—´è·" class="headerlink" title="é—´è·"></a>é—´è·</h3><h4 id="é€—å·åˆ†éš”çš„åˆ—è¡¨"><a href="#é€—å·åˆ†éš”çš„åˆ—è¡¨" class="headerlink" title="é€—å·åˆ†éš”çš„åˆ—è¡¨"></a>é€—å·åˆ†éš”çš„åˆ—è¡¨</h4><p><em><strong>å¯¹äºä¸€è¡Œä¸­çš„å¤šä¸ªé¡¹ç›®ï¼Œä¸€ä¸ªç©ºæ ¼å¿…é¡»åˆ†éš”é€—å·å’Œä¸‹ä¸€ä¸ªå­—ç¬¦ã€‚</strong></em></p>
<p>ä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œå…è®¸ä½¿ç”¨é¢å¤–çš„ç©ºæ ¼ã€‚</p>
<p>ğŸ‘</p>
<pre><code>bus = {addr, parity, data};
a = myfunc(lorem, ipsum, dolor, sit, amet, consectetur, adipiscing, elit,
           rhoncus);
mymodule mymodule(.a(a), .b(b));
</code></pre>
<p>ğŸ‘</p>
<pre><code>{parity,data} = bus;
a = myfunc(a,b,c);
mymodule mymodule(.a(a),.b(b));
</code></pre>
<h4 id="è¡¨æ ¼å¯¹é½"><a href="#è¡¨æ ¼å¯¹é½" class="headerlink" title="è¡¨æ ¼å¯¹é½"></a>è¡¨æ ¼å¯¹é½</h4><p>è¡¨æ ¼å¯¹é½æ–¹å¼å°†ä¸¤æ¡æˆ–å¤šæ¡ç›¸ä¼¼çš„çº¿ç»„åˆåœ¨ä¸€èµ·ï¼Œä½¿ç›¸åŒçš„éƒ¨åˆ†ç›´æ¥ä½äºå½¼æ­¤ä¹‹ä¸Šã€‚è¿™ç§å¯¹é½æ–¹å¼å¯ä»¥å¾ˆå®¹æ˜“åœ°çœ‹å‡ºå“ªäº›å­—ç¬¦æ˜¯ç›¸åŒçš„ï¼Œå“ªäº›å­—ç¬¦æ˜¯ä¸åŒçš„ã€‚</p>
<p><em><strong>é€šå¸¸é¼“åŠ±ä½¿ç”¨è¡¨æ ¼å¯¹é½ã€‚</strong></em></p>
<p><em><strong>å¦‚æœ¬æŒ‡å—çš„ç›¸åº”å°èŠ‚æ‰€è¿°ï¼ŒæŸäº›ç»“æ„éœ€è¦ä½¿ç”¨è¡¨æ ¼å¯¹é½ã€‚</strong></em></p>
<p>éœ€è¦è¡¨æ ¼å¯¹é½çš„ç»“æ„ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#module-instantiation">æ¨¡å—å®ä¾‹åŒ–ä¸­çš„ç«¯å£è¡¨è¾¾å¼</a></li>
</ul>
<p>æ¯ä¸ªç”±ç©ºè¡Œåˆ†éš”çš„ä»£ç å—éƒ½è¢«è§†ä¸ºå•ç‹¬çš„â€œè¡¨æ ¼â€ã€‚</p>
<p>ä½¿ç”¨ç©ºæ ¼ï¼Œè€Œä¸æ˜¯åˆ¶è¡¨ç¬¦ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<p>ğŸ‘</p>
<pre><code>logic [7:0]  my_interface_data;
logic [15:0] my_interface_address;
logic        my_interface_enable;

logic       another_signal;
logic [7:0] something_else;
</code></pre>
<p>ğŸ‘</p>
<pre><code>mod u_mod (
  .clk_i,
  .rst_ni,
  .sig_i          (my_signal_in),
  .sig2_i         (my_signal_out),
  // comment with no blank line maintains the block
  .in_same_block_i(my_signal_in),
  .sig3_i         (something),

  .in_another_block_i(my_signal_in),
  .sig4_i            (something)
);
</code></pre>
<h4 id="è¡¨è¾¾å¼"><a href="#è¡¨è¾¾å¼" class="headerlink" title="è¡¨è¾¾å¼"></a>è¡¨è¾¾å¼</h4><p><em><strong>åœ¨æ‰€æœ‰äºŒå…ƒè¿ç®—ç¬¦çš„ä¸¤è¾¹éƒ½åŒ…å«ç©ºæ ¼ã€‚</strong></em></p>
<p>åœ¨äºŒå…ƒè¿ç®—ç¬¦å‘¨å›´ä½¿ç”¨ç©ºæ ¼ã€‚æ·»åŠ è¶³å¤Ÿçš„ç©ºæ ¼ä»¥æé«˜å¯è¯»æ€§ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<p>ğŸ‘</p>
<pre><code>assign a = ((addr &amp; mask) == My_addr) ? b[1] : ~b[0];  // good
</code></pre>
<p>å¥½äº</p>
<p>ğŸ‘</p>
<pre><code>assign a=((addr&amp;mask)==My_addr)?b[1]:~b[0];  // bad
</code></pre>
<p><strong>ä¾‹å¤–ï¼š</strong>å£°æ˜ä½å‘é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç´§å‡‘è¡¨ç¤ºæ³•ã€‚ä¾‹å¦‚ï¼š</p>
<p>ğŸ‘</p>
<pre><code>wire [WIDTH-1:0] foo;   // this is acceptable
wire [WIDTH - 1 : 0] foo;  // fine also, but not necessary
</code></pre>
<p>å°†æ›¿æ¢è¡¨è¾¾å¼æ‹†åˆ†ä¸ºå¤šè¡Œæ—¶ï¼Œè¯·ä½¿ç”¨ä¸ç­‰æ•ˆçš„ if-then-else è¡Œç±»ä¼¼çš„æ ¼å¼ã€‚ä¾‹å¦‚ï¼š</p>
<p>ğŸ‘</p>
<pre><code>assign a = ((addr &amp; mask) == `MY_ADDRESS) ?
           matches_value :
           doesnt_match_value;
</code></pre>
<h4 id="å£°æ˜ä¸­çš„æ•°ç»„ç»´åº¦"><a href="#å£°æ˜ä¸­çš„æ•°ç»„ç»´åº¦" class="headerlink" title="å£°æ˜ä¸­çš„æ•°ç»„ç»´åº¦"></a>å£°æ˜ä¸­çš„æ•°ç»„ç»´åº¦</h4><p>åœ¨å‹ç¼©å°ºå¯¸å‘¨å›´æ·»åŠ ä¸€ä¸ªç©ºæ ¼ã€‚</p>
<p>ä¸è¦æ·»åŠ ç©ºæ ¼ï¼š</p>
<ul>
<li>åœ¨æ ‡è¯†ç¬¦å’ŒæœªåŒ…è£…å°ºå¯¸ä¹‹é—´ã€‚</li>
<li>å¤šä¸ªç»´åº¦ä¹‹é—´ã€‚</li>
</ul>
<p>é€‚ç”¨äºæ‰“åŒ…å’Œè§£åŒ…æ•°ç»„ä»¥åŠåŠ¨æ€æ•°ç»„ã€å…³è”æ•°ç»„å’Œé˜Ÿåˆ—ã€‚</p>
<p>ğŸ‘</p>
<pre><code>logic [7:0][3:0] data[128][2];
typedef logic [31:0] word_t;
bit bit_array[512];
data_t some_array[];
data_t some_map[addr_t];
data_t some_q[$];
</code></pre>
<p>ğŸ‘</p>
<pre><code>// There must not be a space between dimensions.
logic [7:0] [3:0] data[128] [2];
// There must be a space around packed dimensions.
typedef logic[31:0]word_t;
// There must not be a space between identifier and unpacked dimension.
bit bit_array [512];
// Dynamic, associative, and queue "dimensions" are treated the same as unpacked
// dimensions.  There must not be a space.
data_t some_array [];
data_t some_map [addr_t];
data_t some_q [$];
</code></pre>
<h4 id="å‚æ•°åŒ–ç±»å‹"><a href="#å‚æ•°åŒ–ç±»å‹" class="headerlink" title="å‚æ•°åŒ–ç±»å‹"></a>å‚æ•°åŒ–ç±»å‹</h4><p><em><strong>åœ¨ç±»å‹å‚æ•°ä¹‹å‰æ·»åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œé™¤éç±»å‹æ˜¯é™å®šåç§°çš„ä¸€éƒ¨åˆ†ã€‚</strong></em></p>
<p>é™å®šåç§°åŒ…å«è‡³å°‘ä¸€ä¸ª<code>::</code>è¿æ¥å…¶æ®µçš„èŒƒå›´è¿ç®—ç¬¦ã€‚é™å®šåç§°ä¸­çš„ç©ºæ ¼ä¼šç ´åå¯¹ä¸€ä¸ªç¬¦å·çš„å¼•ç”¨çš„è¿ç»­æ€§ï¼Œå› æ­¤ä¸å¾—æ·»åŠ ã€‚å‚æ•°åˆ—è¡¨å¿…é¡»éµå¾ª <a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#comma-delimited-lists">é€—å·åç©ºæ ¼</a>è§„åˆ™ã€‚</p>
<p>ğŸ‘</p>
<pre><code>my_fifo #(.WIDTH(4), .DEPTH(2)) my_fifo_nibble ...

class foo extends bar #(32, 8);  // unqualified base class
  ...
endclass

foo_h = my_class#(.X(1), .Y(0))::type_id::create("foo_h");  // static method call

my_pkg::x_class#(8, 1) bar;  // package-qualified name
</code></pre>
<p>ğŸ‘</p>
<pre><code>my_fifo#(.WIDTH(4), .DEPTH(2)) my_fifo_2by4 ...

class foo extends bar#(32, 8);  // unqualified base class
  ...
endclass

foo_h = my_class #(.X(1), .Y(0))::type_id::create("foo_h");  // static method call

my_pkg::x_class #(8, 1) bar;  // package-qualified name
</code></pre>
<h4 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h4><p><em><strong>æ ‡è®°ä»£ç å—æ—¶ï¼Œå†’å·å‰åå„åŠ ä¸€ä¸ªç©ºæ ¼ã€‚</strong></em></p>
<p>ä¾‹å¦‚ï¼š</p>
<p>ğŸ‘</p>
<pre><code>begin : foo
end : foo
</code></pre>
<p>ğŸ‘</p>
<pre><code>end:bar            // There must be a space before and after the colon.
endmodule: foobar  // There must be a space before the colon.
</code></pre>
<h4 id="æ¡ˆä¾‹é¡¹ç›®"><a href="#æ¡ˆä¾‹é¡¹ç›®" class="headerlink" title="æ¡ˆä¾‹é¡¹ç›®"></a>æ¡ˆä¾‹é¡¹ç›®</h4><p>æ¡ˆä¾‹é¡¹ç›®çš„å†’å·ä¹‹å‰ä¸èƒ½æœ‰ç©ºæ ¼ï¼›æ¡ˆä¾‹é¡¹ç›®çš„å†’å·åå¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚</p>
<p>æ¡ˆä¾‹é¡¹ç›®<code>default</code>å¿…é¡»åŒ…å«å†’å·ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<p>ğŸ‘</p>
<pre><code>unique case (my_state)
  StInit:   $display("Shall we begin");
  StError:  $display("Oh boy this is Bad");
  default: begin
    my_state = StInit;
    interrupt = 1;
  end
endcase
</code></pre>
<p>ğŸ‘</p>
<pre><code>unique case (1'b1)
  (my_state == StError)  : interrupt = 1; // Excess whitespace before colon
  default:begin end                       // Missing space after colon
endcase
</code></pre>
<h4 id="å‡½æ•°å’Œä»»åŠ¡è°ƒç”¨"><a href="#å‡½æ•°å’Œä»»åŠ¡è°ƒç”¨" class="headerlink" title="å‡½æ•°å’Œä»»åŠ¡è°ƒç”¨"></a>å‡½æ•°å’Œä»»åŠ¡è°ƒç”¨</h4><p><em><strong>å‡½æ•°å’Œä»»åŠ¡è°ƒç”¨åœ¨å‡½æ•°åç§°æˆ–ä»»åŠ¡åç§°ä¸å·¦æ‹¬å·ä¹‹é—´ä¸å¾—æœ‰ä»»ä½•ç©ºæ ¼ã€‚</strong></em></p>
<p>ä¾‹å¦‚ï¼š</p>
<p>ğŸ‘</p>
<pre><code>process_packet(pkt);
</code></pre>
<p>ğŸ‘</p>
<pre><code>process_packet (pkt);  // There must not be a space before "("
</code></pre>
<h4 id="å®è°ƒç”¨"><a href="#å®è°ƒç”¨" class="headerlink" title="å®è°ƒç”¨"></a>å®è°ƒç”¨</h4><p><em><strong>å®è°ƒç”¨åœ¨å®åç§°å’Œå·¦æ‹¬å·ä¹‹é—´ä¸èƒ½æœ‰ä»»ä½•ç©ºæ ¼ã€‚</strong></em></p>
<p>ä¾‹å¦‚ï¼š</p>
<p>ğŸ‘</p>
<pre><code>`uvm_error(ID, "you fail")
`ASSERT(name, a &amp; b, clk, rst)
</code></pre>
<p>ğŸ‘</p>
<pre><code>`uvm_error (ID, "you fail")  // There must not be a space before "("
`ASSERT (name, a &amp; b, clk, rst)
</code></pre>
<h4 id="ç»­è¡Œ"><a href="#ç»­è¡Œ" class="headerlink" title="ç»­è¡Œ"></a>ç»­è¡Œ</h4><p><em><strong>å¿…é¡»å³å¯¹é½ç»­è¡Œã€‚</strong></em></p>
<p>å¯¹é½ç»­è¡Œç¬¦ï¼ˆâ€™ <code>\ </code>â€˜ å­—ç¬¦ï¼‰æœ‰åŠ©äºåœ¨è§†è§‰ä¸Šæ ‡è®°å¤šè¡Œå®çš„ç»“å°¾ã€‚å¯¹é½ä½ç½®åªéœ€è¦è¶…å‡ºå¤šè¡Œå®çš„æœ€å³è¾¹è‡³å°‘ä¸€ä¸ªç©ºæ ¼ï¼Œå½“ç©ºæ ¼ä¸åˆ†å‰²æ ‡è®°æ—¶ï¼Œä½†ä¸åº”è¶…è¿‡æœ€å¤§è¡Œé•¿åº¦ã€‚</p>
<pre><code>`define REALLY_LONG_MACRO(arg1, arg2, arg3) \
    do_something(arg1);                     \
    do_something_else(arg2);                \
    final_action(arg3);
</code></pre>
<h4 id="å…³é”®å­—å‘¨å›´çš„ç©ºé—´"><a href="#å…³é”®å­—å‘¨å›´çš„ç©ºé—´" class="headerlink" title="å…³é”®å­—å‘¨å›´çš„ç©ºé—´"></a>å…³é”®å­—å‘¨å›´çš„ç©ºé—´</h4><p><em><strong>åœ¨ SystemVerilog å…³é”®å­—å‰ååŒ…å«ç©ºæ ¼ã€‚</strong></em></p>
<p>ä¸è¦åŒ…å«ç©ºæ ¼ï¼š</p>
<ul>
<li>åœ¨ç´§è·Ÿåœ¨ç»„å¼€å¤´ä¹‹åçš„å…³é”®å­—ä¹‹å‰ï¼Œä¾‹å¦‚å·¦æ‹¬å·ã€‚</li>
<li>åœ¨è¡Œé¦–çš„å…³é”®å­—ä¹‹å‰ã€‚</li>
<li>åœ¨è¡Œå°¾çš„å…³é”®å­—ä¹‹åã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>// Normal indentation before if.  Include a space after if.
if (foo) begin
end
// Include a space after always, but not before posedge.
always_ff @(posedge clk) begin
end
</code></pre>
<h3 id="æ‹¬å·"><a href="#æ‹¬å·" class="headerlink" title="æ‹¬å·"></a>æ‹¬å·</h3><p><em><strong>ä½¿ç”¨æ‹¬å·ä½¿æ“ä½œæ˜ç¡®ã€‚</strong></em></p>
<p>åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œå¦‚æœä¸€ä¸ªç†æ€§çš„äººéœ€è¦æ€è€ƒæˆ–å‚è€ƒè¿ç®—ç¬¦ä¼˜å…ˆçº§å›¾è¡¨ï¼Œè¯·ä½¿ç”¨æ‹¬å·ä»£æ›¿ä»¥ä½¿æ“ä½œé¡ºåºæ˜ç¡®ã€‚</p>
<h4 id="ä¸‰å…ƒè¡¨è¾¾å¼"><a href="#ä¸‰å…ƒè¡¨è¾¾å¼" class="headerlink" title="ä¸‰å…ƒè¡¨è¾¾å¼"></a>ä¸‰å…ƒè¡¨è¾¾å¼</h4><p><em><strong>åµŒå¥—åœ¨å¦ä¸€ä¸ªä¸‰å…ƒè¡¨è¾¾å¼çš„çœŸå®æ¡ä»¶ä¸­çš„ä¸‰å…ƒè¡¨è¾¾å¼å¿…é¡»ç”¨æ‹¬å·æ‹¬èµ·æ¥ã€‚</strong></em></p>
<p>ä¾‹å¦‚ï¼š</p>
<p>ğŸ‘</p>
<pre><code>assign foo = condition_a ? (condition_a_x ? x : y) : b;
</code></pre>
<p>è™½ç„¶ä»¥ä¸‹åµŒå¥—ä¸‰å…ƒç»„å¯¹ç¼–è¯‘å™¨åªæœ‰ä¸€ç§å«ä¹‰ï¼Œä½†å…¶å«ä¹‰å¯èƒ½ä¸æ¸…æ¥šå¹¶ä¸”å¯¹äººç±»æ¥è¯´å¾ˆå®¹æ˜“å‡ºé”™ï¼š</p>
<p>ğŸ‘</p>
<pre><code>assign foo = condition_a ? condition_a_x ? x : y : b;
</code></pre>
<p><em><strong>å¦‚æœä»£ç æ ¼å¼ä¼ è¾¾ç›¸åŒçš„ä¿¡æ¯ï¼Œä¾‹å¦‚åœ¨æè¿°ä¼˜å…ˆçº§å¤ç”¨å™¨æ—¶ï¼Œå¯ä»¥çœç•¥æ‹¬å·ã€‚</strong></em></p>
<p>ğŸ‘</p>
<pre><code>assign foo = condition_a ? a :
             condition_b ? b : not_a_nor_b;
</code></pre>
<h3 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h3><p><em><strong><code>// foo</code>é¦–é€‰C++ æ ·å¼æ³¨é‡Š ( )ã€‚<code>/\* bar \*/</code>ä¹Ÿå¯ä»¥ä½¿ç”¨C é£æ ¼çš„æ³¨é‡Š ( )ã€‚</strong></em></p>
<p>å•ç‹¬ä¸€è¡Œçš„æ³¨é‡Šæè¿°äº†åé¢çš„ä»£ç ã€‚å¯¹ä»£ç è¡Œçš„æ³¨é‡Šæè¿°äº†è¯¥è¡Œä»£ç ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>// This comment describes the following module.
module foo;
  ...
endmodule : foo

localparam bit ValBaz = 1;  // This comment describes the item to the left.
</code></pre>
<p>æœ‰æ—¶ä½¿ç”¨æ ‡é¢˜æ ·å¼çš„æ³¨é‡Šæ¥æ„é€ ä»£ç ä»¥åˆ†éš”æ¨¡å—å†…çš„ä¸åŒåŠŸèƒ½éƒ¨åˆ†ï¼ˆå¦‚ FSMã€ä¸»æ•°æ®è·¯å¾„æˆ–å¯„å­˜å™¨ï¼‰å¯èƒ½å¾ˆæœ‰ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé¦–é€‰æ ·å¼æ˜¯å•è¡Œéƒ¨åˆ†åç§°ï¼Œå¹¶å¸¦æœ‰<code>//</code>C++ æ ·å¼æ³¨é‡Šï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code>module foo;

  ////////////////
  // Controller //
  ////////////////
  ...

  ///////////////////////
  // Main ALU Datapath //
  ///////////////////////
  ...

endmodule : foo
</code></pre>
<p>å¦‚æœè®¾è®¡è€…æƒ³ä½¿ç”¨æ³¨é‡Šæ¥æ ‡è®°ç‰¹å®šéƒ¨åˆ†çš„å¼€å§‹/ç»“æŸä»¥è·å¾—æ›´å¥½çš„å¯è¯»æ€§ï¼ˆä¾‹å¦‚ï¼Œåœ¨åµŒå¥—çš„ for å¾ªç¯å—ä¸­ï¼‰ï¼Œé¦–é€‰çš„æ–¹æ³•æ˜¯ä½¿ç”¨æ²¡æœ‰é¢å¤–è½®å»“ç¬¦çš„å•è¡Œæ³¨é‡Šï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ã€‚</p>
<p>ğŸ‘</p>
<pre><code>// begin: iterate over foobar
for (...) begin
...
end
// end: iterate over foobar
</code></pre>
<p>ğŸ‘</p>
<pre><code>for (...) begin // iterate over foobar
...
end // iterate over foobar
</code></pre>
<p>ğŸ‘</p>
<pre><code>//-------------------------- iterate over foobar -------------------------------
for (...) begin
...
end
//-------------------------- iterate over foobar -------------------------------
</code></pre>
<p>ğŸ‘</p>
<pre><code>///////////////////////////////
// begin iterate over foobar //
///////////////////////////////
for (...) begin
...
end
///////////////////////////////
// end iterate over foobar   //
///////////////////////////////
</code></pre>
<h3 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h3><p><em><strong>ä¿¡å·å¿…é¡»åœ¨ä½¿ç”¨å‰å£°æ˜ã€‚è¿™æ„å‘³ç€ä¸å¾—ä½¿ç”¨éšå¼ç½‘ç»œå£°æ˜ã€‚</strong></em></p>
<p>åœ¨æ¨¡å—ä¸­ï¼Œ<strong>å»ºè®®</strong>åœ¨æ¥è¿‘é¦–æ¬¡ä½¿ç”¨æ—¶å£°æ˜ä¿¡å·ã€ç±»å‹ã€æšä¸¾å’Œæœ¬åœ°å‚æ•°ã€‚è¿™ä½¿è¯»è€…æ›´å®¹æ˜“æ‰¾åˆ°å£°æ˜å¹¶æŸ¥çœ‹ä¿¡å·ç±»å‹ã€‚</p>
<h3 id="åŸºæœ¬æ¨¡æ¿"><a href="#åŸºæœ¬æ¨¡æ¿" class="headerlink" title="åŸºæœ¬æ¨¡æ¿"></a>åŸºæœ¬æ¨¡æ¿</h3><p><em><strong>ä¸‹é¢ç»™å‡ºäº†æ¼”ç¤ºè®¸å¤šé¡¹ç›®çš„æ¨¡æ¿ã€‚</strong></em></p>
<p>æ¨¡æ¿ï¼š</p>
<pre><code>// Copyright lowRISC contributors.
// Licensed under the Apache License, Version 2.0, see LICENSE for details.
// SPDX-License-Identifier: Apache-2.0
//
// One line description of the module

module my_module #(
  parameter Width = 80,
  parameter Height = 24
) (
  input              clk_i,
  input              rst_ni,
  input              req_valid_i,
  input  [Width-1:0] req_data_i,
  output             req_ready_o,
  ...
);

  logic [Width-1:0] req_data_masked;

  submodule u_submodule (
    .clk_i,
    .rst_ni,
    .req_valid_i,
    .req_data_i (req_data_masked),
    .req_ready_o(req_ready),
    ...
  );

  always_comb begin
    req_data_masked = req_data_i;
    case (fsm_state_q)
      ST_IDLE: begin
        req_data_masked = req_data_i &amp; MASK_IDLE;
        ...
  end

  ...

endmodule
</code></pre>
<h2 id="æˆ‘ä»¬"><a href="#æˆ‘ä»¬" class="headerlink" title="æˆ‘ä»¬"></a>æˆ‘ä»¬</h2><h3 id="æ¦‚æ‹¬-2"><a href="#æ¦‚æ‹¬-2" class="headerlink" title="æ¦‚æ‹¬"></a>æ¦‚æ‹¬</h3><table>
<thead>
<tr>
<th>æ„é€ </th>
<th>é£æ ¼</th>
</tr>
</thead>
<tbody><tr>
<td>å£°æ˜ï¼ˆæ¨¡å—ã€ç±»ã€åŒ…ã€æ¥å£ï¼‰</td>
<td><code>lower_snake_case</code></td>
</tr>
<tr>
<td>å®ä¾‹åç§°</td>
<td><code>lower_snake_case</code></td>
</tr>
<tr>
<td>ä¿¡å·ï¼ˆç½‘ç»œå’Œç«¯å£ï¼‰</td>
<td><code>lower_snake_case</code></td>
</tr>
<tr>
<td>å˜é‡ã€å‡½æ•°ã€ä»»åŠ¡</td>
<td><code>lower_snake_case</code></td>
</tr>
<tr>
<td>å‘½åä»£ç å—</td>
<td><code>lower_snake_case</code></td>
</tr>
<tr>
<td>`å®šä¹‰å®</td>
<td><code>ALL_CAPS</code></td>
</tr>
<tr>
<td>å‚æ•°åŒ–æ¨¡å—ã€ç±»å’Œæ¥å£çš„å¯è°ƒå‚æ•°</td>
<td><code>UpperCamelCase</code></td>
</tr>
<tr>
<td>å¸¸æ•°</td>
<td><code>ALL_CAPS</code>æˆ–è€…<code>UpperCamelCase</code></td>
</tr>
<tr>
<td>æšä¸¾ç±»å‹</td>
<td><code>lower_snake_case_e</code></td>
</tr>
<tr>
<td>å…¶ä»– typedef ç±»å‹</td>
<td><code>lower_snake_case_t</code></td>
</tr>
<tr>
<td>æšä¸¾å€¼åç§°</td>
<td><code>UpperCamelCase</code></td>
</tr>
</tbody></table>
<h3 id="å¸¸æ•°"><a href="#å¸¸æ•°" class="headerlink" title="å¸¸æ•°"></a>å¸¸æ•°</h3><p><em><strong>ä½¿ç”¨é¡¹ç›®åŒ…æ–‡ä»¶ä¸­çš„å‚æ•°å£°æ˜å…¨å±€å¸¸é‡ã€‚</strong></em></p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<strong>å¸¸é‡</strong>ä¸åŒäºå‚æ•°åŒ–æ¨¡å—ã€ç±»ç­‰å¯¹è±¡çš„å¯è°ƒå‚æ•°ã€‚</p>
<p>æ˜¾å¼å£°æ˜å¸¸é‡çš„ç±»å‹ã€‚</p>
<p>å£°æ˜å¸¸é‡æ—¶ï¼š</p>
<ul>
<li>åœ¨ä¸€ä¸ªåŒ…å†…ä½¿ç”¨<code>parameter</code>ã€‚</li>
<li>åœ¨æ¨¡å—æˆ–ç±»ä¸­ä½¿ç”¨<code>localparam</code>.</li>
</ul>
<p>å®šä¹‰å¸¸é‡çš„é¦–é€‰æ–¹æ³•æ˜¯å£°æ˜ a<code>package</code>å¹¶å°†æ‰€æœ‰å¸¸é‡å£°æ˜<code>parameter</code>ä¸ºè¯¥åŒ…ä¸­çš„ aã€‚å¦‚æœå¸¸é‡ä»…åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œåˆ™å¯ä»¥å°†å®ƒä»¬å®šä¹‰åœ¨è¯¥æ–‡ä»¶ä¸­è€Œä¸æ˜¯å•ç‹¬çš„åŒ…ä¸­ã€‚</p>
<p>åœ¨é¡¹ç›®çš„ä¸»åŒ…ä¸­å®šä¹‰é¡¹ç›®èŒƒå›´çš„å¸¸é‡ã€‚</p>
<p>å…¶ä»–åŒ…ä¹Ÿå¯ä»¥ç”¨è‡ªå·±çš„<code>parameter</code>å¸¸é‡å£°æ˜ï¼Œä»¥æ–¹ä¾¿åˆ›å»ºå¯ä»¥åœ¨è®¸å¤šé¡¹ç›®ä¸­é‡å¤ä½¿ç”¨çš„ IPã€‚</p>
<p>æ‰€æœ‰ä¸å¯å˜å¸¸é‡çš„é¦–é€‰å‘½åçº¦å®šæ˜¯ä½¿ç”¨<code>ALL_CAPS</code>ï¼Œä½†æœ‰æ—¶ä½¿ç”¨<code>UpperCamelCase</code>å¯èƒ½è¢«è®¤ä¸ºæ›´è‡ªç„¶ã€‚</p>
<table>
<thead>
<tr>
<th>å¸¸é‡ç±»å‹</th>
<th>é£æ ¼åå¥½</th>
<th>å¯¹è¯</th>
</tr>
</thead>
<tbody><tr>
<td>`å®šä¹‰</td>
<td><code>ALL_CAPS</code></td>
<td>çœŸæ­£æ’å®š</td>
</tr>
<tr>
<td>æ¨¡å—å‚æ•°</td>
<td><code>UpperCamelCase</code></td>
<td>çœŸæ­£å¯ä»¥é€šè¿‡å®ä¾‹åŒ–ä¿®æ”¹ï¼Œè€Œä¸æ˜¯æ’å®šçš„</td>
</tr>
<tr>
<td>æ´¾ç”Ÿçš„æœ¬åœ°å‚æ•°</td>
<td><code>UpperCamelCase</code></td>
<td>è™½ç„¶æ²¡æœ‰ç›´æ¥ä¿®æ”¹ï¼Œä½†ä»ç„¶è·Ÿè¸ªæ¨¡å—å‚æ•°</td>
</tr>
<tr>
<td>å¯è°ƒå±€éƒ¨å‚æ•°</td>
<td><code>UpperCamelCase</code></td>
<td>è™½ç„¶é¢„è®¡ä¸ä¼šåœ¨æœ€ç»ˆ RTL ç‰ˆæœ¬ä¸­å‘ç”Ÿå˜åŒ–ï¼Œä½†ä¾›è®¾è®¡å¸ˆç”¨æ¥æ–¹ä¾¿åœ°æ¢ç´¢è®¾è®¡ç©ºé—´</td>
</tr>
<tr>
<td>çœŸæ­£çš„ localparam å¸¸æ•°</td>
<td><code>ALL_CAPS</code></td>
<td>ä¾‹å­<code>localparam OP_JALR = 8'hA0;</code></td>
</tr>
<tr>
<td>æšä¸¾æˆå‘˜çœŸå¸¸æ•°</td>
<td><code>ALL_CAPS</code></td>
<td>ä¾‹å­<code>typedef enum ... { OP_JALR = 8'hA0;</code></td>
</tr>
<tr>
<td>æšä¸¾é›†æˆå‘˜</td>
<td><code>ALL_CAPS</code>æˆ–è€…<code>UpperCamelCase</code></td>
<td>ä¾‹å­<code>typedef enum ... { ST_IDLE, ST_FRAME_START, ST_DYN_INSTR_READ ...</code>ï¼Œ<code>typedef enum ... { StIdle, StFrameStart, StDynInstrRead...</code>ã€‚ä»»æ„å€¼çš„é›†åˆï¼Œå¯ä»¥æ˜¯ä»»ä½•ä¸€ç§çº¦å®šã€‚</td>
</tr>
</tbody></table>
<p>å¸¸é‡çš„å•ä½åº”è¯¥åœ¨ç¬¦å·åç§°ä¸­æè¿°ï¼Œé™¤éå¸¸é‡æ˜¯æ— å•ä½çš„æˆ–å•ä½æ˜¯â€œä½â€ã€‚ä¾‹å¦‚ï¼Œ<code>FooLengthBytes</code>ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<p>ğŸ‘</p>
<pre><code>// package-scope
package my_pkg;

  parameter int unsigned NUM_CPU_CORES = 64;
  // reference elsewhere as my_pkg::NUM_CPU_CORES

endpackage
</code></pre>
<h4 id="å‚æ•°åŒ–å¯¹è±¡ï¼ˆæ¨¡å—ç­‰ï¼‰"><a href="#å‚æ•°åŒ–å¯¹è±¡ï¼ˆæ¨¡å—ç­‰ï¼‰" class="headerlink" title="å‚æ•°åŒ–å¯¹è±¡ï¼ˆæ¨¡å—ç­‰ï¼‰"></a>å‚æ•°åŒ–å¯¹è±¡ï¼ˆæ¨¡å—ç­‰ï¼‰</h4><p><em><strong>ç”¨äº<code>parameter</code>å‚æ•°åŒ–å’Œ<code>localparam</code>å£°æ˜æ¨¡å—èŒƒå›´çš„å¸¸é‡ã€‚åœ¨åŒ…ä¸­ï¼Œä½¿ç”¨<code>parameter</code>.</strong></em></p>
<p>æ‚¨å¯ä»¥åˆ›å»ºå‚æ•°åŒ–æ¨¡å—ã€ç±»å’Œæ¥å£ä»¥ä¿ƒè¿›è®¾è®¡é‡ç”¨ã€‚</p>
<p><code>parameter</code>åœ¨å‚æ•°åŒ–æ¨¡å—çš„<code>module</code>å£°æ˜ä¸­ä½¿ç”¨å…³é”®å­—æ¥æŒ‡ç¤ºç”¨æˆ·åœ¨å®ä¾‹åŒ–æ—¶éœ€è¦è°ƒæ•´å“ªäº›å‚æ•°ã€‚æ‰€æœ‰å‚æ•°çš„é¦–é€‰å‘½åçº¦å®šæ˜¯ <code>UpperCamelCase</code>. ä¸€äº›é¡¹ç›®å¯èƒ½ä¼šé€‰æ‹©ä½¿ç”¨<code>ALL_CAPS</code>æ¥åŒºåˆ†å¯è°ƒå‚æ•°å’Œå¸¸é‡ã€‚</p>
<p>å£°æ˜ä¸­çš„æ´¾ç”Ÿå‚æ•°<code>module</code>åº”ä½¿ç”¨<code>localparam</code>. ä¸€ä¸ªä¾‹å­å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code>module modname #(
  parameter  int Depth  = 2048,         // 8kB default
  localparam int Aw     = $clog2(Depth) // derived parameter
) (
  ...
);

endmodule
</code></pre>
<p>``define<code>å¹¶ä¸”</code>defparam`æ°¸è¿œä¸åº”è¯¥ç”¨äºå‚æ•°åŒ–æ¨¡å—ã€‚</p>
<p>ä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#constants">åŒ…å‚æ•°</a>é€šè¿‡å±‚æ¬¡ç»“æ„è€Œä¸æ˜¯å‚æ•°æ¥ä¼ è¾“å…¨å±€å¸¸é‡ã€‚è¦å£°æ˜ä¸€ä¸ªèŒƒå›´åœ¨ç‰¹å®š SystemVerilog æ¨¡å—å†…éƒ¨çš„å¸¸é‡ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#constants">è¯·</a><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#constants">æ”¹ç”¨<code>localparam</code></a>.</p>
<p>ä½•æ—¶ä½¿ç”¨å‚æ•°åŒ–æ¨¡å—çš„ç¤ºä¾‹ï¼š</p>
<ul>
<li>å½“ä¸€ä¸ªæ¨¡å—çš„å¤šä¸ªå®ä¾‹å°†è¢«å®ä¾‹åŒ–æ—¶ï¼Œéœ€è¦é€šè¿‡ä¸€ä¸ªå‚æ•°æ¥åŒºåˆ†ã€‚</li>
<li>ä½œä¸ºå°†æ¨¡å—ä¸“é—¨ç”¨äºç‰¹å®šæ€»çº¿å®½åº¦çš„ä¸€ç§æ–¹å¼ã€‚</li>
<li>ä½œä¸ºè®°å½•å…è®¸åœ¨æ¨¡å—å†…æ›´æ”¹å“ªäº›å…¨å±€å‚æ•°çš„ä¸€ç§æ–¹å¼ã€‚</li>
</ul>
<p>æ˜¾å¼å£°æ˜å‚æ•°çš„ç±»å‹ã€‚</p>
<p>ä½¿ç”¨å‚æ•°çš„ç±»å‹æ¥å¸®åŠ©é™åˆ¶åˆæ³•èŒƒå›´ã€‚ä¾‹å¦‚<code>int unsigned</code>å¯¹äºä¸€èˆ¬çš„éè´Ÿæ•´æ•°å€¼ï¼Œ<code>bit</code>å¯¹äºå¸ƒå°”å€¼ã€‚å¯¹å¯è°ƒå‚æ•°å€¼çš„ä»»ä½•è¿›ä¸€æ­¥é™åˆ¶å¿…é¡»ç”¨æ–­è¨€è®°å½•ã€‚</p>
<p>å¯è°ƒå‚æ•°å€¼åº”å§‹ç»ˆå…·æœ‰åˆç†çš„é»˜è®¤å€¼ã€‚</p>
<p>å¦‚éœ€æ›´å¤šé˜…è¯»å†…å®¹ï¼Œè¯·å‚é˜…<a target="_blank" rel="noopener" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-884-complex-digital-systems-spring-2005/related-resources/parameter_models.pdf">ç”¨äºåˆ›å»ºå‚æ•°åŒ–æ¨¡å‹çš„æ–° Verilog-2001 æŠ€æœ¯</a>ã€‚</p>
<h3 id="å®å®šä¹‰"><a href="#å®å®šä¹‰" class="headerlink" title="å®å®šä¹‰"></a>å®å®šä¹‰</h3><p><em><strong>å®åº”è¯¥æ˜¯å¸¦ä¸‹åˆ’çº¿çš„ ALL_CAPITALSã€‚</strong></em></p>
<p>å®åº”å…¨éƒ¨ä¸ºå¤§å†™å­—æ¯å¹¶å¸¦æœ‰ä¸‹åˆ’çº¿ã€‚</p>
<p><strong>å…¨å±€å®šä¹‰</strong>æ˜¯é¡¹ç›®ä¸­æ‰€æœ‰æºæ–‡ä»¶å…±äº«çš„å¤´æ–‡ä»¶ä¸­çš„åˆ»åº¦å®šä¹‰å®ã€‚ä¸ºäº†å‡å°‘å‘½åç©ºé—´å†²çªï¼Œå…¨å±€å®šä¹‰åº”ä»¥ä¸€ç»„ç›¸å…³å®çš„åç§°ä¸ºå‰ç¼€ï¼Œåè·Ÿä¸€å¯¹ä¸‹åˆ’çº¿ï¼š</p>
<pre><code>// The following two constants are in the FOO namespace of the
// SN chip.
`define SN_FOO__ALPHA_BETA  5
`define SN_FOO__GAMMA_OMEGA 6
</code></pre>
<p><strong>æœ¬åœ°å®šä¹‰</strong>æ˜¯ä¸€ä¸ªåˆ»åº¦å®šä¹‰çš„å®ï¼Œåªèƒ½åœ¨å•ä¸ªæœ¬åœ°æ–‡ä»¶çš„èŒƒå›´å†…ä½¿ç”¨ã€‚ä½¿ç”¨åå¿…é¡»æ˜ç¡®æœªå®šä¹‰ï¼Œä»¥é¿å…æ±¡æŸ“å…¨å±€å®å‘½åç©ºé—´ã€‚ä¸ºäº†è¡¨æ˜å®ä»…ç”¨äºæœ¬åœ°èŒƒå›´ï¼Œå®åç§°åº”ä»¥å•ä¸ªä¸‹åˆ’çº¿ä½œä¸ºå‰ç¼€ã€‚</p>
<p>ä¸ºç¡®ä¿æœ¬åœ°å®šä¹‰ä¿æŒæœ¬åœ°ï¼Œè¯·æ³¨æ„ä¸è¦<code> </code>include<code>åœ¨å®å®šä¹‰å’Œ</code> <code>undef</code>.</p>
<p>ä¾‹å­ï¼š</p>
<pre><code>`define _MAKE_THING(_x) \
    thing i_thing_##_x (.clk(clk), .i(i##_x) .o(o##_x));
`_MAKE_THING(a)
`_MAKE_THING(b)
`_MAKE_THING(c)
`undef _MAKE_THING
</code></pre>
<h3 id="åç¼€"><a href="#åç¼€" class="headerlink" title="åç¼€"></a>åç¼€</h3><p>åç¼€ç”¨äºå¤šä¸ªåœ°æ–¹ä»¥æŒ‡å¯¼æ„å›¾ã€‚ä¸‹è¡¨åˆ—å‡ºäº†å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„åç¼€ã€‚</p>
<table>
<thead>
<tr>
<th>åç¼€</th>
<th>ç«æŠ€åœº</th>
<th>æ„å›¾</th>
</tr>
</thead>
<tbody><tr>
<td><code>_e</code></td>
<td>ç±»å‹å®šä¹‰</td>
<td>æšä¸¾ç±»å‹</td>
</tr>
<tr>
<td><code>_t</code></td>
<td>ç±»å‹å®šä¹‰</td>
<td>å…¶ä»–ç±»å‹å®šä¹‰ï¼ŒåŒ…æ‹¬ä¿¡å·ç°‡</td>
</tr>
<tr>
<td><code>_n</code></td>
<td>ä¿¡å·åç§°</td>
<td>ä½ç”µå¹³æœ‰æ•ˆä¿¡å·</td>
</tr>
<tr>
<td><code>_n</code>, <code>_p</code></td>
<td>ä¿¡å·åç§°</td>
<td>å·®åˆ†å¯¹ï¼Œä½ç”µå¹³æœ‰æ•ˆå’Œé«˜ç”µå¹³æœ‰æ•ˆ</td>
</tr>
<tr>
<td><code>_d</code>,<code>_q</code></td>
<td>ä¿¡å·åç§°</td>
<td>å¯„å­˜å™¨çš„è¾“å…¥è¾“å‡º</td>
</tr>
<tr>
<td><code>_q2</code>, <code>_q3</code>, ç­‰</td>
<td>ä¿¡å·åç§°</td>
<td>æµæ°´çº¿ç‰ˆæœ¬çš„ä¿¡å·ï¼›<code>_q</code>æ˜¯ä¸€ä¸ªå»¶è¿Ÿå‘¨æœŸï¼Œ<code>_q2</code>æ˜¯ä¸¤ä¸ªå‘¨æœŸï¼Œ<code>_q3</code>æ˜¯ä¸‰ä¸ªï¼Œç­‰ç­‰</td>
</tr>
<tr>
<td><code>_i</code>, <code>_o</code>, <code>_io</code></td>
<td>ä¿¡å·åç§°</td>
<td>æ¨¡å—è¾“å…¥ã€è¾“å‡ºå’ŒåŒå‘</td>
</tr>
</tbody></table>
<p>å½“éœ€è¦å¤šä¸ªåç¼€æ—¶ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æŒ‡å—ï¼š</p>
<ul>
<li>æŒ‡å¯¼åç¼€åŠ åœ¨ä¸€èµ·ï¼Œä¸è¢«é™„åŠ <code>_</code> å­—ç¬¦åˆ†éš”ï¼ˆ<code>_ni</code>ä¸<code>_n_i</code>ï¼‰</li>
<li>å¦‚æœä¿¡å·ä¸ºä½ç”µå¹³æœ‰æ•ˆ<code>_n</code>å°†æ˜¯ç¬¬ä¸€ä¸ªåç¼€</li>
<li>å¦‚æœä¿¡å·æ˜¯æ¨¡å—è¾“å…¥/è¾“å‡ºï¼Œå­—æ¯å°†æ’åœ¨æœ€åã€‚</li>
<li><code>_d</code>ä¼ æ’­å’Œ<code>_q</code>åˆ°æ¨¡å—è¾¹ç•Œä¸æ˜¯å¼ºåˆ¶æ€§çš„ã€‚</li>
</ul>
<p>ä¾‹å­ï¼š</p>
<p>ğŸ‘</p>
<pre><code>module simple (
  input        clk_i,
  input        rst_ni,              // Active low reset

  // writer interface
  input [15:0] data_i,
  input        valid_i,
  output       ready_o,

  // bi-directional bus
  inout [7:0]  driver_io,         // Bi directional signal

  // Differential pair output
  output       lvds_po,           // Positive part of the differential signal
  output       lvds_no            // Negative part of the differential signal
);

  logic valid_d, valid_q, valid_q2, valid_q3;
  assign valid_d = valid_i; // next state assignment

  always_ff @(posedge clk or negedge rst_ni) begin
    if (!rst_ni) begin
      valid_q  &lt;= '0;
      valid_q2 &lt;= '0;
      valid_q3 &lt;= '0;
    end else begin
      valid_q  &lt;= valid_d;
      valid_q2 &lt;= valid_q;
      valid_q3 &lt;= valid_q2;
    end
  end

  assign ready_o = valid_q3; // three clock cycles delay

endmodule // simple
</code></pre>
<h3 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h3><p><em><strong>åç§°æšä¸¾ç±»å‹<code>snake_case_e</code>ã€‚å‘½åæšä¸¾å€¼<code>ALL_CAPS</code>æˆ– <code>UpperCamelCase</code>.</strong></em></p>
<p>å§‹ç»ˆ<code>enum</code>ä½¿ç”¨<code>typedef</code>. å¿…é¡»æŒ‡å®šä»»ä½•æšä¸¾ç±»å‹çš„å­˜å‚¨ç±»å‹ã€‚å¯¹äºå¯ç»¼åˆæšä¸¾ï¼Œå­˜å‚¨ç±»å‹å¿…é¡»æ˜¯ 4 çŠ¶æ€æ•°æ®ç±»å‹ï¼ˆ<code>logic</code>è€Œä¸æ˜¯<code>bit</code>ï¼‰ã€‚</p>
<p><code>enum</code>ä¸å…è®¸ä½¿ç”¨åŒ¿åç±»å‹ï¼Œå› ä¸ºå®ƒä»¬ä½¿åœ¨æ•´ä¸ªé¡¹ç›®å’Œè·¨é¡¹ç›®çš„å…¶ä»–åœ°æ–¹ä½¿ç”¨è¯¥ç±»å‹å˜å¾—æ›´åŠ å›°éš¾ã€‚</p>
<p>æšä¸¾ç±»å‹åç§°åº”ä»…åŒ…å«å°å†™å­—æ¯æ•°å­—å­—ç¬¦å’Œä¸‹åˆ’çº¿ã€‚æ‚¨å¿…é¡»åœ¨æšä¸¾ç±»å‹åç§°åé¢åŠ ä¸Š<code>_e</code>.</p>
<p>æšä¸¾å€¼åç§°ï¼ˆå¸¸é‡ï¼‰é€šå¸¸åº”è¯¥æ˜¯<code>ALL_CAPS</code>ï¼Œä¾‹å¦‚ï¼Œ <code>READY_TO_SEND</code>ä»¥åæ˜ å®ƒä»¬çš„å¸¸é‡æ€§è´¨ï¼Œå°¤å…¶æ˜¯å¯¹äºçœŸæ­£ä¸å¯æ›´æ”¹çš„å€¼ï¼Œä¾‹å¦‚å®šä¹‰çš„æ“ä½œç åˆ†é…ã€‚æœ‰æ—¶<code>UpperCamelCase</code> å¯èƒ½æ˜¯é¦–é€‰ï¼Œå½“æšä¸¾ç±»å‹çš„åˆ†é…å€¼å®é™…ä¸Šæ˜¯è®¾è®¡è€…ä¸å…³å¿ƒçš„æ—¶å€™ï¼Œå°±åƒçŠ¶æ€æœºå€¼ä¸€æ ·ã€‚æœ‰å…³å¦‚ä½•è€ƒè™‘æ­¤å»ºè®®çš„è®¨è®ºï¼Œè¯·å‚é˜…å…³äº <a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#constants">å¸¸é‡çš„å¯¹è¯ã€‚</a></p>
<p>ğŸ‘</p>
<pre><code>typedef enum logic [7:0] {  // 8-bit opcodes
  OP_JALR = 8'hA0,
  OP_ADDI = 8'h47,
  OP_LDW  = 8'h0B
} opcode_e;
opcode_e op_val;
</code></pre>
<p>ğŸ‘</p>
<pre><code>typedef enum logic [1:0] {  // A 2-bit enumerated type
  ACC_WRITE,
  ACC_READ,
  ACC_PAUSE
} access_e; // new named type is created
access_e req_access, resp_access;
</code></pre>
<p>ğŸ‘</p>
<pre><code>typedef enum logic [1:0] {  // A 2-bit enumerated type
  AccWrite,
  AccRead,
  AccPause
} access_e; // new named type is created
access_e req_access, resp_access;
</code></pre>
<p>ğŸ‘</p>
<pre><code>enum {  // Typedef is missing, storage type is missing.
  Write,
  Read
} req_access, resp_access; // anonymous enum type
</code></pre>
<h3 id="ä¿¡å·å‘½å"><a href="#ä¿¡å·å‘½å" class="headerlink" title="ä¿¡å·å‘½å"></a>ä¿¡å·å‘½å</h3><p><em><strong><code>lower_snake_case</code>å‘½åä¿¡å·æ—¶ä½¿ç”¨ã€‚</strong></em></p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<strong>ä¿¡å·</strong>æ„å‘³ç€ SystemVerilog è®¾è®¡ä¸­çš„ç½‘ç»œã€å˜é‡æˆ–ç«¯å£ã€‚</p>
<p>ä¿¡å·åç§°å¯èƒ½åŒ…å«å°å†™å­—æ¯æ•°å­—å­—ç¬¦å’Œä¸‹åˆ’çº¿ã€‚</p>
<p>ä¿¡å·åç§°ä¸åº”ä»¥ä¸‹åˆ’çº¿åè·Ÿæ•°å­—ç»“å°¾ï¼ˆä¾‹å¦‚<code>foo_1</code>ã€<code>foo_2</code>ç­‰ï¼‰ã€‚è®¸å¤šç»¼åˆå·¥å…·ä½¿ç”¨è¯¥å‘½åçº¦å®šå°†æ€»çº¿æ˜ å°„åˆ°ç½‘ç»œï¼Œå› æ­¤åœ¨æ£€æŸ¥ç»¼åˆç½‘è¡¨æ—¶ï¼Œç±»ä¼¼å‘½åçš„ç½‘ç»œå¯èƒ½ä¼šå¯¼è‡´æ··æ·†ã€‚</p>
<p>ä¿ç•™çš„<a target="_blank" rel="noopener" href="http://www.xilinx.com/support/documentation/sw_manuals/xilinx13_1/ite_r_verilog_reserved_words.htm">Verilog</a>æˆ– SystemVerilog å…³é”®å­—æ°¸è¿œä¸èƒ½ç”¨ä½œåç§°ã€‚</p>
<p>ä¸ä¸åŒè¯­è¨€äº’æ“ä½œæ—¶ï¼Œè¯·æ³¨æ„ä¸è¦ä½¿ç”¨å…¶ä»–è¯­è¨€çš„å…³é”®å­—ã€‚</p>
<h4 id="ä½¿ç”¨æè¿°æ€§åç§°"><a href="#ä½¿ç”¨æè¿°æ€§åç§°" class="headerlink" title="ä½¿ç”¨æè¿°æ€§åç§°"></a>ä½¿ç”¨æè¿°æ€§åç§°</h4><p><em><strong>åç§°åº”æè¿°ä¿¡å·çš„ç”¨é€”ã€‚</strong></em></p>
<p>ä½¿ç”¨æ•´ä¸ªå•è¯ã€‚é™¤éåœ¨æœ€å¸¸è§çš„åœ°æ–¹ï¼Œå¦åˆ™é¿å…ä½¿ç”¨ç¼©å†™è¯å’Œç¼©å†™è¯ã€‚å€¾å‘äºæè¿°æ€§çš„ä¿¡å·åç§°è€Œä¸æ˜¯ç®€æ´ã€‚</p>
<h4 id="å‰ç¼€"><a href="#å‰ç¼€" class="headerlink" title="å‰ç¼€"></a>å‰ç¼€</h4><p>ä½¿ç”¨é€šç”¨å‰ç¼€æ¥æ ‡è¯†ä¸€èµ·æ“ä½œçš„ä¿¡å·ç»„ã€‚ä¾‹å¦‚ï¼ŒAXI-S æ¥å£çš„æ‰€æœ‰å…ƒç´ éƒ½å°†å…±äº«ä¸€ä¸ªå‰ç¼€ï¼š<code>foo_valid</code>ã€ã€ <code>foo_ready</code>å’Œ<code>foo_data</code>ã€‚</p>
<p>æ­¤å¤–ï¼Œå¯¹äºå…·æœ‰å¤šä¸ªæ—¶é’Ÿçš„ä»»ä½•æ¨¡å—ï¼Œåº”ä½¿ç”¨å‰ç¼€æ¸…æ¥šåœ°æ ‡è®°å“ªä¸ªä¿¡å·åœ¨å“ªä¸ªæ—¶é’Ÿç»„ä¸­ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…<a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#clocks">æ—¶é’ŸåŸŸéƒ¨åˆ†ã€‚</a></p>
<p>ä¾‹å­ï¼š</p>
<ul>
<li>ä¸æ§åˆ¶ blockram ç›¸å…³çš„ä¿¡å·å¯èƒ½å…±äº«ä¸€ä¸ª<code>bram_</code>å‰ç¼€ã€‚</li>
<li>åŒæ­¥çš„ä¿¡å·<code>clk_dram</code>è€Œä¸<code>clk</code>åº”è¯¥å…±äº«<code>dram_</code>å‰ç¼€ã€‚</li>
</ul>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<p>ğŸ‘</p>
<pre><code>module fifo_controller (
  input         clk_i,
  input         rst_ni,

  // writer interface
  input [15:0]  wr_data_i,
  input         wr_valid_i,
  output        wr_ready_o,

  // reader interface
  output [15:0] rd_data_o,
  output        rd_valid_o,
  output [7:0]  rd_fullness_o,
  input         rd_ack_i,

  // memory interface:
  output [7:0]  mem_addr_o,
  output [15:0] mem_wdata_o,
  output        mem_we_o,
  input  [15:0] mem_rdata_i
);
</code></pre>
<p>è¿™ç§å‘½åçº¦å®šä½¿å¾—ä½¿ç”¨ç®€å•ä¸”ä¸€è‡´çš„è§„åˆ™å°†ç«¯å£åç§°æ˜ å°„åˆ°ç›¸ä¼¼çš„ä¿¡å·åç§°å˜å¾—æ›´åŠ å®¹æ˜“ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#hierarchical-consistency">åˆ†å±‚ä¸€è‡´æ€§éƒ¨åˆ†ã€‚</a></p>
<h4 id="å±‚æ¬¡ä¸€è‡´æ€§"><a href="#å±‚æ¬¡ä¸€è‡´æ€§" class="headerlink" title="å±‚æ¬¡ä¸€è‡´æ€§"></a>å±‚æ¬¡ä¸€è‡´æ€§</h4><p><em><strong>åŒä¸€ä¿¡å·åœ¨å±‚æ¬¡ç»“æ„çš„ä»»ä½•çº§åˆ«éƒ½åº”å…·æœ‰ç›¸åŒçš„åç§°ã€‚</strong></em></p>
<p>è¿æ¥åˆ°å®ä¾‹ç«¯å£çš„ä¿¡å·åº”ä¸è¯¥ç«¯å£å…·æœ‰ç›¸åŒçš„åç§°ã€‚é€šè¿‡ä»¥è¿™ç§æ–¹å¼è¿›è¡Œï¼Œç›´æ¥è¿æ¥çš„ä¿¡å·åº”è¯¥åœ¨ä»»ä½•å±‚æ¬¡ç»“æ„çº§åˆ«ä¿æŒç›¸åŒçš„åç§°ã€‚</p>
<p>æ­¤çº¦å®šçš„ä¾‹å¤–æƒ…å†µæ˜¯é¢„æœŸçš„ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å°†ç«¯å£è¿æ¥åˆ°ä¿¡å·æ•°ç»„çš„å…ƒç´ æ—¶ã€‚</li>
<li>å°†é€šç”¨ç«¯å£åç§°æ˜ å°„åˆ°æ›´ç‰¹å®šäºè®¾è®¡çš„åç§°æ—¶ã€‚ä¾‹å¦‚ï¼Œä¸¤ä¸ªé€šç”¨å—ï¼Œä¸€ä¸ªå¸¦æœ‰<code>host_bus</code>ç«¯å£ï¼Œä¸€ä¸ªå¸¦æœ‰ <code>device_bus</code>ç«¯å£ï¼Œå¯ä»¥é€šè¿‡<code>foo_bar_bus</code>ä¿¡å·è¿æ¥ã€‚</li>
</ul>
<p>åœ¨æ¯ç§ä¾‹å¤–æƒ…å†µä¸‹ï¼Œåº”æ³¨æ„ä½¿ç«¯å£åç§°åˆ°ä¿¡å·åç§°çš„æ˜ å°„å°½å¯èƒ½æ˜ç¡®å’Œä¸€è‡´ã€‚</p>
<h3 id="æ—¶é’Ÿ"><a href="#æ—¶é’Ÿ" class="headerlink" title="æ—¶é’Ÿ"></a>æ—¶é’Ÿ</h3><p><em><strong>æ‰€æœ‰æ—¶é’Ÿä¿¡å·å¿…é¡»ä»¥ å¼€å¤´<code>clk</code>ã€‚</strong></em></p>
<p>è®¾è®¡çš„ä¸»ç³»ç»Ÿæ—¶é’Ÿå¿…é¡»å‘½åä¸º<code>clk</code>ã€‚å¯ä»¥ä½¿ç”¨ <code>clk</code>ä¸æ¨¡å—ä¸­çš„å¤§éƒ¨åˆ†é€»è¾‘åŒæ­¥çš„é»˜è®¤æ—¶é’Ÿæ¥è¡¨ç¤ºã€‚</p>
<p>å¦‚æœä¸€ä¸ªæ¨¡å—åŒ…å«å¤šä¸ªæ—¶é’Ÿï¼Œåˆ™éç³»ç»Ÿæ—¶é’Ÿçš„æ—¶é’Ÿåº”ä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦å‘½åï¼Œå¹¶ä»¥<code>clk_</code>å‰ç¼€å¼€å¤´ã€‚ä¾‹å¦‚ï¼š<code>clk_dram</code>ã€<code>clk_axi</code>ç­‰ã€‚è¯·æ³¨æ„ï¼Œæ­¤å‰ç¼€å°†ç”¨äºæ ‡è¯†è¯¥æ—¶é’ŸåŸŸä¸­çš„å…¶ä»–ä¿¡å·ã€‚</p>
<h3 id="é‡ç½®"><a href="#é‡ç½®" class="headerlink" title="é‡ç½®"></a>é‡ç½®</h3><p><em><strong>å¤ä½æ˜¯ä½ç”µå¹³æœ‰æ•ˆå’Œå¼‚æ­¥çš„ã€‚é»˜è®¤åç§°æ˜¯<code>rst_n</code>.</strong></em></p>
<p>èŠ¯ç‰‡èŒƒå›´å†…çš„æ‰€æœ‰å¤ä½éƒ½å®šä¹‰ä¸ºä½ç”µå¹³æœ‰æ•ˆå’Œå¼‚æ­¥ã€‚å› æ­¤ï¼Œå®ƒä»¬è¢«å®šä¹‰ä¸ºä¸ç›¸å…³æ ‡å‡†å•å…ƒå¯„å­˜å™¨çš„å¼‚æ­¥å¤ä½è¾“å…¥ç›¸å…³è”ã€‚</p>
<p>é»˜è®¤åç§°æ˜¯<code>rst_n</code>. å¦‚æœå¿…é¡»é€šè¿‡æ—¶é’Ÿæ¥åŒºåˆ†å®ƒä»¬ï¼Œåˆ™æ—¶é’Ÿåç§°åº”åŒ…å«åœ¨é‡ç½®åç§°ä¸­ï¼Œå¦‚<code>rst_domain_n</code>.</p>
<p>SystemVerilog å…è®¸ä»¥ä¸‹ä»»ä½•ä¸€ç§è¯­æ³•é£æ ¼ï¼Œä½†é£æ ¼æŒ‡å—æ›´å–œæ¬¢å‰è€…ã€‚</p>
<pre><code>// preferred
always_ff @(posedge clk or negedge rst_n) begin
  if (!rst_n) begin
    q &lt;= 1'b0;
  end else begin
    q &lt;= d;
  end
end

// legal but not preferred
always_ff @(posedge clk, negedge rst_n) begin
  if (!rst_n) begin
    q &lt;= 1'b0;
  end else begin
    q &lt;= d;
  end
end
</code></pre>
<h2 id="è¯­è¨€ç‰¹ç‚¹"><a href="#è¯­è¨€ç‰¹ç‚¹" class="headerlink" title="è¯­è¨€ç‰¹ç‚¹"></a>è¯­è¨€ç‰¹ç‚¹</h2><h3 id="é¦–é€‰-SystemVerilog-æ„é€ "><a href="#é¦–é€‰-SystemVerilog-æ„é€ " class="headerlink" title="é¦–é€‰ SystemVerilog æ„é€ "></a>é¦–é€‰ SystemVerilog æ„é€ </h3><p>ä½¿ç”¨è¿™äº› SystemVerilog ç»“æ„è€Œä¸æ˜¯å®ƒä»¬çš„ Verilog-2001 ç­‰æ•ˆç»“æ„ï¼š</p>
<ul>
<li><code>always_comb</code>æ˜¯å¿…éœ€çš„<code>always @*</code>ã€‚</li>
<li><code>logic</code>ä¼˜äº<code>reg</code>å’Œ<code>wire</code>ã€‚</li>
<li>é¡¶çº§<code>parameter</code>å£°æ˜ä¼˜äº<code> </code>define`å…¨å±€å£°æ˜ã€‚</li>
</ul>
<h3 id="åŒ…ä¾èµ–"><a href="#åŒ…ä¾èµ–" class="headerlink" title="åŒ…ä¾èµ–"></a>åŒ…ä¾èµ–</h3><p><em><strong>åŒ…ä¸èƒ½æœ‰å¾ªç¯ä¾èµ–ã€‚</strong></em></p>
<p>åŒ…æ–‡ä»¶å¯èƒ½ä¾èµ–äºå…¶ä»–åŒ…æ–‡ä»¶ä¸­çš„å¸¸é‡å’Œç±»å‹ï¼Œä½†ä¸èƒ½æœ‰ä»»ä½•å¾ªç¯ä¾èµ–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå¦‚æœåŒ… A ä¾èµ–äºåŒ… B ä¸­çš„å¸¸é‡ï¼Œåˆ™åŒ… B ä¸èƒ½ä¾èµ–åŒ… A ä¸­çš„ä»»ä½•å†…å®¹ã€‚è™½ç„¶ SystemVerilog è¯­è¨€è§„èŒƒå…è®¸å¾ªç¯ä¾èµ–ï¼Œä½†å®ƒä»¬çš„ä½¿ç”¨å¯èƒ½ä¼šç ´åæŸäº›å·¥å…·ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>package foo;

  // Package "bar" must not depend on anything in "foo":
  parameter int unsigned PageSizeBytes = 16 * bar::Kibi;

endpackage
</code></pre>
<h3 id="æ¨¡å—å£°æ˜"><a href="#æ¨¡å—å£°æ˜" class="headerlink" title="æ¨¡å—å£°æ˜"></a>æ¨¡å—å£°æ˜</h3><p><em><strong>ä½¿ç”¨ Verilog-2001 å…¨ç«¯å£å£°æ˜æ ·å¼ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹æ ¼å¼ã€‚</strong></em></p>
<p>ä½¿ç”¨ Verilog-2001 ç»„åˆç«¯å£å’Œ I/O å£°æ˜æ ·å¼ã€‚ä¸è¦ä½¿ç”¨ Verilog-95 åˆ—è¡¨æ ·å¼ã€‚æ¨¡å—è¯­å¥ä¸­çš„ç«¯å£å£°æ˜åº”å®Œæ•´å£°æ˜ç«¯å£åç§°ã€ç±»å‹å’Œæ–¹å‘ã€‚</p>
<p>å·¦æ‹¬å·åº”ä¸æ¨¡å—å£°æ˜åœ¨åŒä¸€è¡Œï¼Œç¬¬ä¸€ä¸ªç«¯å£åº”åœ¨ä¸‹ä¸€è¡Œå£°æ˜ã€‚</p>
<p>å³æ‹¬å·åº”è¯¥åœ¨å®ƒè‡ªå·±çš„è¡Œä¸­ï¼Œåœ¨ç¬¬ 0 åˆ—ä¸­ã€‚</p>
<p>æ¨¡å—å£°æ˜çš„ç¼©è¿›éµå¾ªä¸¤ä¸ªç©ºæ ¼ç¼©è¿›çš„æ ‡å‡†ç¼©è¿›è§„åˆ™ã€‚</p>
<p>æ—¶é’Ÿç«¯å£å¿…é¡»é¦–å…ˆåœ¨ç«¯å£åˆ—è¡¨ä¸­å£°æ˜ï¼Œç„¶åæ˜¯ä»»ä½•å’Œæ‰€æœ‰å¤ä½è¾“å…¥ã€‚</p>
<p>æ— å‚æ•°ç¤ºä¾‹ï¼š</p>
<p>ğŸ‘</p>
<pre><code>module foo (
  input              clk_i,
  input              rst_ni,
  input [7:0]        d_i,
  output logic [7:0] q_o
);
</code></pre>
<p>å¸¦å‚æ•°çš„ç¤ºä¾‹ï¼š</p>
<p>ğŸ‘</p>
<pre><code>module foo #(
  parameter int unsigned Width = 8,
) (
  input                    clk_i,
  input                    rst_ni,
  input [Width-1:0]        d_i,
  output logic [Width-1:0] q_o
);
</code></pre>
<p>ä¸è¦ä½¿ç”¨ Verilog-95 æ ·å¼ï¼š</p>
<p>ğŸ‘</p>
<pre><code>// WRONG:
module foo(a, b, c d);
input wire [2:0] a;
output logic b;
...
</code></pre>
<h3 id="æ¨¡å—å®ä¾‹åŒ–"><a href="#æ¨¡å—å®ä¾‹åŒ–" class="headerlink" title="æ¨¡å—å®ä¾‹åŒ–"></a>æ¨¡å—å®ä¾‹åŒ–</h3><p><em><strong>ä½¿ç”¨å‘½åç«¯å£æ¥å®Œå…¨æŒ‡å®šæ‰€æœ‰å®ä¾‹åŒ–ã€‚</strong></em></p>
<p>å°†ä¿¡å·è¿æ¥åˆ°ç«¯å£ä»¥è¿›è¡Œå®ä¾‹åŒ–æ—¶ï¼Œè¯·ä½¿ç”¨å‘½åç«¯å£æ ·å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code>my_module i_my_instance (
  .clk_i (clk_i),
  .rst_ni(rst_ni),
  .d_i   (from_here),
  .q_o   (to_there)
);
</code></pre>
<p>å¦‚æœç«¯å£å’Œè¿æ¥ä¿¡å·å…·æœ‰ç›¸åŒçš„åç§°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>.port</code>è¯­æ³•ï¼ˆä¸å¸¦æ‹¬å·ï¼‰æ¥è¡¨ç¤ºè¿æ¥ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code>my_module i_my_instance (
  .clk_i,
  .rst_ni,
  .d_i   (from_here),
  .q_o   (to_there)
);
</code></pre>
<p>æ‰€æœ‰å£°æ˜çš„ç«¯å£éƒ½å¿…é¡»å­˜åœ¨äºå®ä¾‹åŒ–å—ä¸­ã€‚æœªè¿æ¥çš„è¾“å‡ºå¿…é¡»æ˜ç¡®å†™ä¸ºæ— è¿æ¥ï¼ˆä¾‹å¦‚ï¼šï¼‰ <code>.output_port()</code>ï¼Œæœªä½¿ç”¨çš„è¾“å…¥å¿…é¡»æ˜ç¡®æ¥åœ°ï¼ˆä¾‹å¦‚<code>.unused_input_port(8'd0)</code>ï¼šï¼‰</p>
<p><code>.*</code>ä¸å…è®¸ã€‚</p>
<p>ä¸è¦ä½¿ç”¨ä½ç½®å‚æ•°å°†ä¿¡å·è¿æ¥åˆ°ç«¯å£ã€‚</p>
<p>æŒ‰ç…§ä¸æ¨¡å—ä¸­å®šä¹‰çš„é¡ºåºç›¸åŒçš„é¡ºåºå®ä¾‹åŒ–ç«¯å£ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#tabular-alignment">ä»¥è¡¨æ ¼æ ·å¼</a>å¯¹é½ç«¯å£è¡¨è¾¾å¼ã€‚ä¸è¦åœ¨æœ€é•¿ç«¯å£åç§°çš„å·¦æ‹¬å·å‰åŒ…å«ç©ºæ ¼ã€‚ä¸è¦åœ¨å·¦æ‹¬å·ä¹‹åæˆ–åŒ…å«ç«¯å£è¡¨è¾¾å¼çš„å³æ‹¬å·ä¹‹å‰åŒ…å«ç©ºæ ¼ã€‚</p>
<p>ğŸ‘</p>
<pre><code>mod u_mod(
  .clk_i,
  .rst_ni,

  // Not allowed: avoid leading/trailing whitespace in expressions.
  .sig_1_i( sig_1 ),
  .sig_2_i( sig_2 )
);

mod u_mod(
  .clk_i,
  .rst_ni,

  .short_sig_i                       (sig_1),
  // Not allowed: avoid whitespace between the longest signal name and the opening parenthesis.
  .a_very_long_signal_name_indeed_i  (sig_2)
);
</code></pre>
<p><em><strong>å¯¹æ‰€æœ‰å®ä¾‹ä½¿ç”¨å‘½åå‚æ•°ã€‚</strong></em></p>
<p>å‚æ•°åŒ–å®ä¾‹æ—¶ï¼Œä½¿ç”¨å‘½åå‚æ•°æ ·å¼æŒ‡å®šå‚æ•°ã€‚ä¸€ä¸ªä¾‹å¤–æ˜¯ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œä¾‹å¦‚å¯„å­˜å™¨å®½åº¦ï¼Œé‚£ä¹ˆå®ä¾‹åŒ–å¯ä»¥æ˜¯éšå¼çš„ã€‚</p>
<p>æ¨¡å—å®ä¾‹åŒ–çš„ç¼©è¿›éµå¾ªä¸¤ä¸ªç©ºæ ¼ç¼©è¿›çš„æ ‡å‡†ç¼©è¿›è§„åˆ™ã€‚</p>
<pre><code>my_module #(
  .Height(5),
  .Width(10)
) my_module (
  // ...
);

my_reg #(16) my_reg0 (
  .clk_i,
  .rst_ni,
  .d_i   (data_in),
  .q_o   (data_out)
);
</code></pre>
<p>ä¸è¦åœ¨ä½ç½®ä¸ŠæŒ‡å®šå‚æ•°ï¼Œé™¤éåªæœ‰ä¸€ä¸ªå‚æ•°å¹¶ä¸”è¯¥å‚æ•°çš„æ„å›¾å¾ˆæ˜æ˜¾ï¼Œä¾‹å¦‚å¯„å­˜å™¨å®ä¾‹çš„å®½åº¦ã€‚</p>
<p>ä¸è¦ä½¿ç”¨<code>defparam</code>.</p>
<p><em><strong>ä¸è¦é€’å½’åœ°å®ä¾‹åŒ–ã€‚</strong></em></p>
<p>æ¨¡å—å¯èƒ½ä¸ä¼šé€’å½’åœ°å®ä¾‹åŒ–è‡ªå·±ã€‚</p>
<h3 id="å¸¸æ•°-1"><a href="#å¸¸æ•°-1" class="headerlink" title="å¸¸æ•°"></a>å¸¸æ•°</h3><p><em><strong>å»ºè®®ä½¿ç”¨ç¬¦å·å‘½åçš„å¸¸é‡è€Œä¸æ˜¯åŸå§‹æ•°å­—ã€‚</strong></em></p>
<p>å°è¯•ä¸ºå¸¸ç”¨çš„å¸¸é‡æä¾›ç¬¦å·åç§°ï¼Œè€Œä¸æ˜¯é‡å¤è¾“å…¥åŸå§‹æ•°å­—ã€‚</p>
<p>å±€éƒ¨å¸¸é‡åº”å§‹ç»ˆä½¿ç”¨<code>localparam</code>.</p>
<p>å…¨å±€å¸¸é‡åº”å§‹ç»ˆåœ¨å•ç‹¬çš„æ–‡ä»¶<code>.vh</code>æˆ–<code>.svh</code>åŒ…å«æ–‡ä»¶ä¸­å£°æ˜ã€‚</p>
<p>å¯¹äº SystemVerilog ä»£ç ï¼Œåº”å§‹ç»ˆå°†å…¨å±€å¸¸é‡å£°æ˜ä¸ºåŒ…å‚æ•°ã€‚å¯¹äº Verilog-2001 å…¼å®¹ä»£ç ï¼Œä¸æ”¯æŒé¡¶çº§å‚æ•°ï¼Œè€Œ<code> </code>define`å¿…é¡»ä½¿ç”¨å®ã€‚</p>
<p>å°†å¸¸é‡çš„å•ä½ä½œä¸ºåç¼€åŒ…å«åœ¨å¸¸é‡çš„ç¬¦å·åç§°ä¸­ã€‚æ­¤è§„åˆ™çš„ä¾‹å¤–æ˜¯å¯¹äºæœ¬è´¨ä¸Šæ— å•ä½çš„å¸¸é‡ï¼Œæˆ–è€…å¦‚æœå¸¸é‡æè¿°çš„æ˜¯é»˜è®¤å•ä½ç±»å‹â€œä½â€ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<pre><code>localparam int unsigned INTERFACE_WIDTH = 64;  // Bits
localparam int unsigned INTERFACE_WIDTH_BYTES = (INTERFACE_WIDTH + 7) / 8;
localparam int unsigned INTERFACE_WIDTH_64B_WORDS = (INTERFACE_WIDTH + 63) / 64;
localparam int unsigned IMAGE_WIDTH_PIXELS = 640;
localparam int unsigned MEGA = 1000 * 1000;  // Unitless
localparam int unsigned MEBI = 1024 * 1024;  // Unitless
localparam int unsigned SYSTEM_CLOCK_HZ = 200 * MEGA;
</code></pre>
<h3 id="ä¿¡å·å®½åº¦"><a href="#ä¿¡å·å®½åº¦" class="headerlink" title="ä¿¡å·å®½åº¦"></a>ä¿¡å·å®½åº¦</h3><p><em><strong>æ³¨æ„ä¿¡å·å®½åº¦ã€‚</strong></em></p>
<h4 id="å§‹ç»ˆæ˜ç¡®æ•°å­—æ–‡å­—çš„å®½åº¦ã€‚"><a href="#å§‹ç»ˆæ˜ç¡®æ•°å­—æ–‡å­—çš„å®½åº¦ã€‚" class="headerlink" title="å§‹ç»ˆæ˜ç¡®æ•°å­—æ–‡å­—çš„å®½åº¦ã€‚"></a>å§‹ç»ˆæ˜ç¡®æ•°å­—æ–‡å­—çš„å®½åº¦ã€‚</h4><p>ä¾‹å­ï¼š</p>
<p>ğŸ‘</p>
<pre><code>localparam logic [3:0] bar = 4'd4;

assign foo = 8'd2;
</code></pre>
<p>ğŸ‘</p>
<pre><code>localparam logic [3:0] bar = 4;

assign foo = 2;
</code></pre>
<p>ä¾‹å¤–ï¼š</p>
<ul>
<li>ä½¿ç”¨å‚æ•°åŒ–å®½åº¦æ—¶ï¼Œå¯ä»¥ç®€å•åœ°ä½¿ç”¨<code>1'b1</code>ï¼ˆä¾‹å¦‚ï¼Œåœ¨é€’å¢æ—¶ï¼‰è€Œä¸æ˜¯åƒ <code>{{(Bus_width-1){1'b0}}, 1'b1}</code>. æˆ–è€…ï¼Œå®ƒå¯ä»¥å†™æˆ<code>Bus_width'(1)</code>.</li>
<li>ä½¿ç”¨ â€˜0 æ„é€ æ¥åˆ›å»ºè‡ªåŠ¨æ­£ç¡®å¤§å°çš„é›¶æ˜¯å¯ä»¥æ¥å—çš„ã€‚</li>
<li>åˆ†é…ç»™æ•´æ•°å˜é‡ï¼ˆä¾‹å¦‚ byteã€shortintã€intã€integer å’Œ longintï¼‰çš„æ–‡å­—ä¸éœ€è¦æ˜ç¡®çš„å®½åº¦ã€‚</li>
</ul>
<h4 id="æ¨¡å—å®ä¾‹ä¸Šçš„ç«¯å£è¿æ¥å¿…é¡»å§‹ç»ˆæ­£ç¡®åŒ¹é…å®½åº¦ã€‚"><a href="#æ¨¡å—å®ä¾‹ä¸Šçš„ç«¯å£è¿æ¥å¿…é¡»å§‹ç»ˆæ­£ç¡®åŒ¹é…å®½åº¦ã€‚" class="headerlink" title="æ¨¡å—å®ä¾‹ä¸Šçš„ç«¯å£è¿æ¥å¿…é¡»å§‹ç»ˆæ­£ç¡®åŒ¹é…å®½åº¦ã€‚"></a>æ¨¡å—å®ä¾‹ä¸Šçš„ç«¯å£è¿æ¥å¿…é¡»å§‹ç»ˆæ­£ç¡®åŒ¹é…å®½åº¦ã€‚</h4><p>å»ºè®®å°½å¯èƒ½ä½¿ç”¨æ˜¾å¼å®½åº¦ï¼Œè€Œä¸æ˜¯ä¾èµ– Verilog çš„éšå¼é›¶æ‰©å±•å’Œæˆªæ–­æ“ä½œã€‚</p>
<p>ä¾‹å­ï¼š</p>
<p>ğŸ‘</p>
<pre><code>my_module i_module (
  .thirty_two_bit_input({16'd0, sixteen_bit_word})
);
</code></pre>
<p>ğŸ‘</p>
<pre><code>my_module i_module (
  // Incorrectly implicitly extends from 16 bit to 32 bit
  .thirty_two_bit_input(sixteen_bit_word)
);
</code></pre>
<h4 id="ä¸è¦åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨å¤šä½ä¿¡å·ã€‚"><a href="#ä¸è¦åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨å¤šä½ä¿¡å·ã€‚" class="headerlink" title="ä¸è¦åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨å¤šä½ä¿¡å·ã€‚"></a>ä¸è¦åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨å¤šä½ä¿¡å·ã€‚</h4><p>ä¸å…¶è®©å¸ƒå°”è¿ç®—å’Œ if è¡¨è¾¾å¼å°†å¤šä½ä¿¡å·ç®€åŒ–ä¸ºå•ä¸ªä½ï¼Œä¸å¦‚å°†å¤šä½ä¿¡å·æ˜¾å¼ä¸ 0 è¿›è¡Œæ¯”è¾ƒã€‚éšå¼è½¬æ¢å¯ä»¥éšè—ç»†å¾®çš„é€»è¾‘é”™è¯¯ã€‚</p>
<p>ä¾‹å­;</p>
<p>ğŸ‘</p>
<pre><code>logic [3:0] a, b;
logic out;

assign out = (a != '0) &amp;&amp; (b == '0);

always_comb begin
  if (a != '0)
    ...
  else
    ...
end
</code></pre>
<p>ğŸ‘</p>
<pre><code>logic [3:0] a, b;
logic out;

// Incorrect because it implicitly converts 4-bit signals to 1-bit before AND.
// Also, !b is different from ~b and can be hard to catch.
assign out = a &amp;&amp; !b;

// Incorrect use of a multi-bit signal in an if expression
always_comb begin
  if (a)
    ...
  else
    ...
end
</code></pre>
<h4 id="ä½åˆ‡ç‰‡"><a href="#ä½åˆ‡ç‰‡" class="headerlink" title="ä½åˆ‡ç‰‡"></a>ä½åˆ‡ç‰‡</h4><p>ä»…å½“æ„å›¾å¼•ç”¨ä½å‘é‡çš„ä¸€éƒ¨åˆ†æ—¶æ‰ä½¿ç”¨ä½åˆ‡ç‰‡è¿ç®—ç¬¦ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<p>ğŸ‘</p>
<pre><code>logic [7:0] a, b;
logic [6:0] c;

assign a = 8'd7;       // good

assign a[7:1] = 7'd5;  // good - it's partial assignment.
assign a = b;          // good - the parser would warn on width mismatch.
</code></pre>
<p>ğŸ‘</p>
<pre><code>logic [7:0] a, b;

assign a[7:0] = 8'd7;  // BAD - redundant and can mask linter warnings.
assign a = b[7:0];     // BAD - redundant and masks linter warnings.
</code></pre>
<h4 id="å¤„ç†å®½åº¦æº¢å‡º"><a href="#å¤„ç†å®½åº¦æº¢å‡º" class="headerlink" title="å¤„ç†å®½åº¦æº¢å‡º"></a>å¤„ç†å®½åº¦æº¢å‡º</h4><p>æ³¨æ„ç§»ä½æ“ä½œï¼Œå®ƒä¼šäº§ç”Ÿæ¯”æ“ä½œæ•°æ›´å®½çš„ç»“æœã€‚ä½é€‰æ‹©å’Œè¿æ¥å¯èƒ½æ¯”ç§»åŠ¨ä¸€ä¸ªæ’å®šé‡æ›´æ¸…æ¥šã€‚</p>
<p>ç”±äºè¿›ä½ï¼ŒåŠ æ³•å’Œå¦å®šè¿ç®—äº§ç”Ÿçš„ç»“æœæ¯”æ“ä½œæ•°å®½ä¸€ä½ã€‚å…³äºåŒ¹é…å®½åº¦çš„è§„åˆ™çš„ä¸€ä¸ªå…è®¸çš„ä¾‹å¤–æ˜¯é»˜é»˜åœ°æ”¾å¼ƒç»§ç»­åˆ†é…ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<pre><code>logic [3:0] cnt_d, cnt_q;
assign cnt_d = cnt_q + 4'h1;
</code></pre>
<p>æˆ–è€…æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨å¤§å°è½¬æ¢æ¥æ˜ç¡®è¡¨ç¤ºæ”¾å¼ƒè¿›ä½ã€‚</p>
<pre><code>assign cnt_d = 4'(cnt_q + 4'h1);
</code></pre>
<h3 id="é˜»å¡å’Œéé˜»å¡èµ‹å€¼"><a href="#é˜»å¡å’Œéé˜»å¡èµ‹å€¼" class="headerlink" title="é˜»å¡å’Œéé˜»å¡èµ‹å€¼"></a>é˜»å¡å’Œéé˜»å¡èµ‹å€¼</h3><p><em><strong>é¡ºåºé€»è¾‘å¿…é¡»ä½¿ç”¨éé˜»å¡èµ‹å€¼ã€‚ç»„åˆå—å¿…é¡»ä½¿ç”¨å—åˆ†é…ã€‚</strong></em></p>
<p>åˆ‡å‹¿åœ¨å—å£°æ˜ä¸­æ··åˆèµ‹å€¼ç±»å‹ã€‚</p>
<p>é¡ºåºå—ï¼ˆåœ¨æ—¶é’Ÿæ²¿é”å­˜çŠ¶æ€çš„å—ï¼‰å¿…é¡»ä¸“é—¨ä½¿ç”¨éå—åˆ†é…ï¼Œå¦‚ä¸‹é¢çš„é¡ºåºé€»è¾‘éƒ¨åˆ†æ‰€å®šä¹‰ã€‚</p>
<p>çº¯ç»„åˆå—å¿…é¡»ä¸“é—¨ä½¿ç”¨å—åˆ†é…ã€‚</p>
<p>è¿™æ˜¯ Cliff Cumming çš„<a target="_blank" rel="noopener" href="http://www.ece.cmu.edu/~ece447/s13/lib/exe/fetch.php?media=synth-verilog-cummins.pdf">Verilog é»„é‡‘æ³•åˆ™ä¹‹ä¸€</a>ã€‚</p>
<h3 id="å»¶è¿Ÿå»ºæ¨¡"><a href="#å»¶è¿Ÿå»ºæ¨¡" class="headerlink" title="å»¶è¿Ÿå»ºæ¨¡"></a>å»¶è¿Ÿå»ºæ¨¡</h3><p><em><strong>ä¸è¦<code>#delay</code>åœ¨å¯ç»¼åˆçš„è®¾è®¡æ¨¡å—ä¸­ä½¿ç”¨ã€‚</strong></em></p>
<p>å¯ç»¼åˆè®¾è®¡æ¨¡å—å¿…é¡»å›´ç»•é›¶å»¶è¿Ÿä»¿çœŸæ–¹æ³•è¿›è¡Œè®¾è®¡ã€‚ä¸å…è®¸ä½¿ç”¨<code>#delay</code>åŒ…æ‹¬ åœ¨å†…çš„æ‰€æœ‰å½¢å¼ã€‚<code>#0</code></p>
<p>æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… Cliff Cumming çš„<a target="_blank" rel="noopener" href="http://www.sunburst-design.com/papers/CummingsSNUG2002Boston_NBAwithDelays.pdf">Verilog Nonblocking Assignments With Delays, Myths &amp; Mysteries</a> ã€‚</p>
<h3 id="é¡ºåºé€»è¾‘ï¼ˆé”å­˜å™¨ï¼‰"><a href="#é¡ºåºé€»è¾‘ï¼ˆé”å­˜å™¨ï¼‰" class="headerlink" title="é¡ºåºé€»è¾‘ï¼ˆé”å­˜å™¨ï¼‰"></a>é¡ºåºé€»è¾‘ï¼ˆé”å­˜å™¨ï¼‰</h3><p><em><strong>ä¸é¼“åŠ±ä½¿ç”¨é”å­˜å™¨ - å°½å¯èƒ½ä½¿ç”¨è§¦å‘å™¨ã€‚</strong></em></p>
<p>é™¤éç»å¯¹å¿…è¦ï¼Œå¦åˆ™ä½¿ç”¨è§¦å‘å™¨/å¯„å­˜å™¨è€Œä¸æ˜¯é”å­˜å™¨ã€‚</p>
<p>å¦‚æœå¿…é¡»ä½¿ç”¨é”å­˜å™¨ï¼Œè¯·ä½¿ç”¨<code>always_latch</code>over<code>always</code>å¹¶ä½¿ç”¨éé˜»å¡èµ‹å€¼ ( <code>&lt;=</code>)ã€‚æ°¸è¿œä¸è¦ä½¿ç”¨é˜»å¡èµ‹å€¼ ( <code>=</code>)ã€‚</p>
<h3 id="é¡ºåºé€»è¾‘ï¼ˆå¯„å­˜å™¨ï¼‰"><a href="#é¡ºåºé€»è¾‘ï¼ˆå¯„å­˜å™¨ï¼‰" class="headerlink" title="é¡ºåºé€»è¾‘ï¼ˆå¯„å­˜å™¨ï¼‰"></a>é¡ºåºé€»è¾‘ï¼ˆå¯„å­˜å™¨ï¼‰</h3><p><em><strong>ä½¿ç”¨æ ‡å‡†æ ¼å¼å£°æ˜é¡ºåºå—ã€‚</strong></em></p>
<p>åœ¨é¡ºåºçš„ always å—ä¸­ï¼Œä»…ä½¿ç”¨éé˜»å¡èµ‹å€¼ ( <code>&lt;=</code>)ã€‚æ°¸è¿œä¸è¦ä½¿ç”¨é˜»å¡èµ‹å€¼ ( <code>=</code>)ã€‚</p>
<p>å°†å¯„å­˜å™¨çš„é˜»å¡å’Œéé˜»å¡åˆ†é…æ··åˆåœ¨ä¸€èµ·çš„è®¾è®¡æ¨¡æ‹Ÿä¸æ­£ç¡®ï¼Œå› ä¸ºä¸€äº›æ¨¡æ‹Ÿå™¨å°†å§‹ç»ˆå—ä¸­çš„ä¸€äº›é˜»å¡åˆ†é…å¤„ç†ä¸ºåœ¨å•ç‹¬çš„æ¨¡æ‹Ÿäº‹ä»¶ä¸­ä½œä¸ºéé˜»å¡åˆ†é…å‘ç”Ÿã€‚è¿™ä¸ªè¿‡ç¨‹ä½¿ä¸€äº›ä¿¡å·è·³è·ƒå¯„å­˜å™¨ï¼Œå¯èƒ½å¯¼è‡´å®Œå…¨çš„è´¨å­åè½¬ã€‚é‚£å¾ˆç³Ÿã€‚</p>
<p>çŠ¶æ€åˆ†é…çš„é¡ºåºè¯­å¥åº”ä»…åŒ…å«é‡ç½®å€¼å’ŒçŠ¶æ€åˆ†é…çš„ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œä½¿ç”¨å•ç‹¬çš„ä»…ç»„åˆå—æ¥ç”Ÿæˆè¯¥ä¸‹ä¸€ä¸ªçŠ¶æ€å€¼ã€‚</p>
<p>å°†å®ç°ä¸€ä¸ªåˆå§‹å€¼ä¸ºâ€œ0xABâ€çš„æ­£ç¡®å®ç°çš„ 8 ä½å¯„å­˜å™¨ï¼š</p>
<p>ğŸ‘</p>
<pre><code>logic foo_en;
logic [7:0] foo_q, foo_d;

always_ff @(posedge clk or negedge rst_ni) begin
  if (!rst_ni) begin
    foo_q &lt;= 8'hab;
  end else if (foo_en) begin
    foo_q &lt;= foo_d;
  end
end
</code></pre>
<p>ä¸å…è®¸å¯¹åŒä¸€ä½è¿›è¡Œå¤šä¸ªéé˜»å¡åˆ†é…ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<p>ğŸ‘</p>
<pre><code>if (cond1) begin
  abc &lt;= 4'h1;
end

if (cond2) begin
  abc &lt;= 4'h2;
end
</code></pre>
<p>å¦‚æœ cond1 å’Œ cond2 éƒ½ä¸ºçœŸï¼Œåˆ™ Verilog æ ‡å‡†è§„å®šç¬¬äºŒä¸ªèµ‹å€¼å°†ç”Ÿæ•ˆï¼Œä½†è¿™æ˜¯è¿åæ ·å¼çš„ã€‚</p>
<p>å³ä½¿<code>cond1</code>å’Œ<code>cond2</code>æ˜¯äº’æ–¥çš„ï¼Œä¹Ÿè¦æŠŠç¬¬äºŒä¸ª<code>if</code>å˜æˆ <code>else if</code>.</p>
<p>ä¾‹å¤–ï¼šå¯ä»¥å…ˆè®¾ç½®é»˜è®¤å€¼ï¼Œç„¶åè®¾ç½®ç‰¹å®šå€¼ã€‚ä½†æ˜¯ï¼Œæœ€å¥½åœ¨å…·æœ‰æ˜¾å¼é˜»å¡åˆ†é…çš„å•ç‹¬ç»„åˆå—ä¸­å®Œæˆè¿™é¡¹å·¥ä½œã€‚</p>
<p>ä¾‹å­ï¼š</p>
<pre><code>always_ff @(posedge clk or negedge rst_ni) begin
  if (!rst_ni) begin
    state_q &lt;= StIdle;
  end else begin
    state_q &lt;= state_d;
  end
end

always_comb begin
  state_d = state_q;    // default assignment next state is present state
  unique case (state_q)
    StIdle: state_d = StInit;       // Idle State move to Init
    StInit: begin                   // Initialize calculation
      if (conditional) begin
        state_d = StIdle;
      end else begin
        state_d = StCalc;
      end
    end
    StCalc: begin                   // Perform calculation
      if (conditional) begin
        state_d = StResult;
      end
    end
    StResult: state_d = Idle;
    default: ;
  endcase
end
</code></pre>
<p>ä¿æŒé¡ºåºå—ä¸­çš„å·¥ä½œç®€å•ã€‚å¦‚æœé¡ºåºå—å˜å¾—è¶³å¤Ÿå¤æ‚ï¼Œè¯·è€ƒè™‘å°†ç»„åˆé€»è¾‘æ‹†åˆ†ä¸ºå•ç‹¬çš„ç»„åˆ ( <code>always_comb</code>) å—ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œé¡ºåºå—åº”è¯¥åªåŒ…å«ä¸€ä¸ªå¯„å­˜å™¨å®ä¾‹ï¼Œå¯èƒ½å¸¦æœ‰ä¸€ä¸ªåŠ è½½ä½¿èƒ½æˆ–ä¸€ä¸ªå¢é‡ã€‚</p>
<h3 id="ä¸åœ¨ä¹ï¼ˆXâ€˜sï¼‰"><a href="#ä¸åœ¨ä¹ï¼ˆXâ€˜sï¼‰" class="headerlink" title="ä¸åœ¨ä¹ï¼ˆXâ€˜sï¼‰"></a>ä¸åœ¨ä¹ï¼ˆ<code>X</code>â€˜sï¼‰</h3><p><em><strong><code>X</code>å¼ºçƒˆå»ºè®®ä¸è¦åœ¨ RTL ä»£ç ä¸­ä½¿ç”¨æ–‡å­—ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œ RTL éƒ½ä¸å¾—æ–­è¨€<code>X</code>å¯¹ç»¼åˆè¡¨ç¤ºâ€œä¸å…³å¿ƒâ€ã€‚ä¸ºäº†æ ‡è®°å’Œæ£€æµ‹æ— æ•ˆæ¡ä»¶ï¼Œè€Œä¸æ˜¯åˆ†é…å’Œä¼ æ’­<code>X</code>å€¼ï¼Œè®¾è®¡åº”è¯¥å®Œå…¨å®šä¹‰æ‰€æœ‰ä¿¡å·å€¼å¹¶å¹¿æ³›ä½¿ç”¨ SVA æ¥æŒ‡ç¤ºæ— æ•ˆæ¡ä»¶ã€‚</strong></em></p>
<p>å¦‚æœä¸ä¸¥æ ¼æ§åˆ¶ï¼Œ<code>X</code>åœ¨ RTL ä¸­ä½¿ç”¨åˆ†é…æ¥æ ‡è®°æ— æ•ˆæˆ–æ— å…³æ¡ä»¶å¯èƒ½ä¼šå¯¼è‡´ä»¿çœŸ/ç»¼åˆä¸åŒ¹é…ã€‚</p>
<p><strong>é¼“åŠ±å¹¿æ³›ä½¿ç”¨ SVA</strong> ï¼Œè€Œä¸æ˜¯åˆ†é…å’Œä¼ æ’­<code>X</code>ä»¥æ ‡è®°å’Œæ£€æµ‹æ— æ•ˆæ¡ä»¶ã€‚è¿™ç§è®¾è®¡å®è·µçš„é¢å¤–å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li><code>X</code>æ­£ç¡®ä¼ æ’­æ¡ä»¶ä¸éœ€è¦ç‰¹æ®Šçš„ä»£ç æ ·å¼ï¼Œ</li>
<li>ç³»ç»Ÿåœ°å‡å°‘äº†æ„å¤–å¼•å…¥æ¨¡æ‹Ÿ/ç»¼åˆå¤±é…çš„æœºä¼šï¼Œ</li>
<li>æ¨¡æ‹Ÿä¼šå¾ˆå¿«å¤±è´¥ï¼Œå¹¶ä¸”éœ€è¦æ›´å°‘çš„ä¿¡å·å›æº¯æ¥è§£å†³æ ¹æœ¬åŸå› é”™è¯¯ï¼Œ</li>
<li>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å½¢å¼å±æ€§éªŒè¯ (FPV) æ¥è¯æ˜è¿™äº› SVA æ˜¯å¦å§‹ç»ˆèƒ½å¤Ÿå¾—åˆ°æ»¡è¶³ï¼Œ</li>
<li>åœ¨å®‰å…¨ä¸Šä¸‹æ–‡ä¸­ï¼Œéœ€è¦ç¡®å®šæ€§/å®šä¹‰çš„è¡Œä¸ºï¼Œå³ä½¿å¯¹äºéæ³•/æ— æ•ˆ/æ— æ³•è®¿é—®çš„è¾“å…¥ç»„åˆï¼ˆæœ‰æ—¶æ›´ç®€æ´åœ°è¡¨è¿°ä¸ºâ€œå¯¹äºå®‰å…¨å…³é”®è®¾è®¡ï¼Œæ²¡æœ‰æ— å…³ç´§è¦â€ï¼‰ã€‚</li>
</ul>
<p>è¿™é‡Œæå‡ºçš„è§£å†³æ–¹æ¡ˆä¸Don Millsåœ¨<a target="_blank" rel="noopener" href="http://www.lcdm-eng.com/papers/snug04_assertiveX.pdf">â€œBeing Assertive With Your Xâ€</a>ä¸­æå‡ºçš„æ–¹æ³•æœ‰ç›¸ä¼¼ä¹‹å¤„ ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œå°½ç®¡ donâ€™t cares å¯ç”¨äºæŒ‡ç¤ºç»¼åˆå·¥å…·å¯èƒ½çš„ä¼˜åŒ–æœºä¼šï¼Œä½†é€»è¾‘ç¼©å‡çš„æ”¶ç›Šæ˜¯å¦è¶³ä»¥è¶…è¿‡ä½¿ç”¨<code>X</code>æ–‡å­—å¯èƒ½å¸¦æ¥çš„ç»¼åˆä¸åŒ¹é…é—®é¢˜ï¼ˆå°¤å…¶æ˜¯ä½¿ç”¨å½“ä»ŠæŠ€æœ¯ä¸­å¯ç”¨çš„é—¨æ•°ï¼‰ã€‚</p>
<h4 id="æ•è·ä½¿ç”¨æ— æ•ˆå€¼çš„é”™è¯¯"><a href="#æ•è·ä½¿ç”¨æ— æ•ˆå€¼çš„é”™è¯¯" class="headerlink" title="æ•è·ä½¿ç”¨æ— æ•ˆå€¼çš„é”™è¯¯"></a>æ•è·ä½¿ç”¨æ— æ•ˆå€¼çš„é”™è¯¯</h4><p>å¯¹äºå†…éƒ¨ç”Ÿæˆçš„å¯èƒ½æ— æ•ˆï¼ˆä½†æœªé©±åŠ¨åˆ°<code>X</code>ï¼‰çš„ä¿¡å·å¹¶ç”¨äºè§¦å‘æŸäº›æ“ä½œï¼ˆä¾‹å¦‚å¯„å­˜å™¨å†™ä½¿èƒ½ï¼‰ï¼Œå»ºè®®æ·»åŠ æ–­è¨€ä»¥æ£€æŸ¥å½“ä½¿èƒ½ä¸ºçœŸæ—¶ï¼Œä¿¡å·æœ‰æ•ˆã€‚å½“æ„å¤–ä½¿ç”¨æ— æ•ˆå€¼æ—¶ï¼Œè¿™ä¼šè§¦å‘ç®€å•çš„æ•…éšœè¯Šæ–­ã€‚</p>
<pre><code>logic reg_addr;
logic reg_wr_en;

// internal logic which generates reg_addr/reg_wr_en reg_en_addr will never
// be X but must be ignored if reg_wr_en == 0
assign reg_addr = ...
assign reg_wr_en = ...

...

// trigger some specific action when a certain register is written
logic special_reg_en;

assign special_reg_en = (reg_addr == SPECIAL_REG_ADDR) &amp; reg_wr_en;

// Aim to keep RHS of implication as broad as possible
`ASSERT(NoSpecialRegEnWithoutRegEn, special_reg_en |-&gt; reg_wr_en);
</code></pre>
<p>å…¶ä¸­å€¼åŠå…¶æœ‰æ•ˆæ€§ä¿¡å·ç”± DV ç¯å¢ƒç”Ÿæˆï¼Œè¯¥ç¯å¢ƒå°†é©±åŠ¨<code>X</code>æ— æ•ˆä¿¡å·``ASSERT_KNOWN`å°±è¶³å¤Ÿäº†ã€‚</p>
<pre><code>module mymod (
  input [7:0] external_addr_i,
  input       external_wr_en_i
);

  logic special_action_en;

  assign special_action_en =
      (external_addr_i == SPECIAL_ADDR) &amp; external_wr_en_i;

  `ASSERT_KNOWN(special_action_en)

endmodule
</code></pre>
<h4 id="æ¡ˆä¾‹é™ˆè¿°å’Œä¸‰å…ƒç»„çš„å…·ä½“æŒ‡å¯¼"><a href="#æ¡ˆä¾‹é™ˆè¿°å’Œä¸‰å…ƒç»„çš„å…·ä½“æŒ‡å¯¼" class="headerlink" title="æ¡ˆä¾‹é™ˆè¿°å’Œä¸‰å…ƒç»„çš„å…·ä½“æŒ‡å¯¼"></a>æ¡ˆä¾‹é™ˆè¿°å’Œä¸‰å…ƒç»„çš„å…·ä½“æŒ‡å¯¼</h4><p>ä¸ºäº†ç¬¦åˆè¿™ç§é£æ ¼ï¼ŒRTL å¿…é¡»<code> </code>ASSERT_KNOWN<code>å¯¹æ‰€æœ‰æ¨¡å—è¾“å‡ºè¿›è¡Œæ–­è¨€ï¼Œä½†å¯èƒ½éšå«</code>X`åœ¨ä»¿çœŸå¼€å§‹æ—¶çš„ä¿¡å·é™¤å¤–ï¼Œä¾‹å¦‚ FIFOã€SRAM æˆ–å¯„å­˜å™¨æ–‡ä»¶è¾“å‡ºã€‚</p>
<pre><code>module mymod (
  input        ina_i,
  input        inb_i,
  output logic out_o
);
  assign out_o = ina_i ^ inb_i;
  `ASSERT_KNOWN(OutKnown_A, out_o, clk_i, !rst_ni)
endmodule : mymod
</code></pre>
<p>æ­¤å¤–ï¼Œé¼“åŠ±å°†æ–­è¨€æ·»åŠ åˆ°å½¢æˆ case è¯­å¥ã€ä¸‰å…ƒç»„æˆ– if/else è¯­å¥çš„æ¡ä»¶çš„ä¿¡å·ä¸­ã€‚æ–­è¨€æ ·å¼ç”±è®¾è®¡è€…è‡ªè¡Œå†³å®šï¼ŒèŒƒå›´å¯ä»¥ä»ç®€å•<code> </code>ASSERT_KNOWN` æ–­è¨€åˆ°åŠŸèƒ½é½å…¨çš„æ–­è¨€ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<pre><code>typedef enum logic [1:0] {mode0, mode1, mode2} state_e;
state_e sel;

// encouraged
`ASSERT_KNOWN(SelKnown_A, sel)
always_comb begin
  out0 = '0;
  out1 = '0;
  unique case (sel)
    mode1: out0 = foo;
    mode2: out1 = bar;
    default: ;
  endcase
end

// optional, but more explicit
// not always applicable
`ASSERT(MainFsmCase_A, sel inside {mode0, mode1, mode2}, clk_i, !rst_ni)
always_comb begin
  out0 = '0;
  out1 = '0;
  unique case (sel)
    mode1: out0 = foo;
    mode2: out1 = bar;
    default: ;
  endcase
end
</code></pre>
<p>åœ¨ä¸‰å…ƒè¯­å¥çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œé¼“åŠ±ä½¿ç”¨ä»¥ä¸‹ç¤ºä¾‹ï¼š</p>
<pre><code>// encouraged
`ASSERT_KNOWN(ModeKnown_A, mode_i, clk_i, !rst_ni)
`ASSERT_KNOWN(LenKnown_A, len_i, clk_i, !rst_ni)
// assign '0 for all other combinations
assign val = (mode_i == ENC)                    ? 8'h01 :
             (mode_i == DEC &amp;&amp; len_i == LEN128) ? 8'h36 :
             (mode_i == DEC &amp;&amp; len_i == LEN192) ? 8'h80 :
             (mode_i == DEC &amp;&amp; len_i == LEN256) ? 8'h40 : 8'h00;

// optional, but more explicit
`ASSERT(ValSelValid_A, mode_i == ENC || mode_i == DEC &amp;&amp;
    len_i inside {LEN128, LEN192, LEN256}, clk_i, !rst_ni)
// using one of the valid outputs for other combinations (saves logic)
assign val = (mode_i == ENC)                    ? 8'h01 :
             (mode_i == DEC &amp;&amp; len_i == LEN128) ? 8'h36 :
             (mode_i == DEC &amp;&amp; len_i == LEN192) ? 8'h80 :
             (mode_i == DEC &amp;&amp; len_i == LEN256) ? 8'h40 : 8'h01;
</code></pre>
<p>è¯·æ³¨æ„ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¾“å…¥åˆ° case æˆ– ternary å¯èƒ½æ˜¯<code>X</code> ä½†ä»…åœ¨æ— å…³ç´§è¦çš„æƒ…å†µä¸‹ï¼Œå› ä¸ºè¾“å‡ºå°†è¢«å¿½ç•¥ï¼Œå› ä¸ºæœªè®¾ç½®ä¸€äº›ç¬¦åˆè¾“å…¥çš„æœ‰æ•ˆä¿¡å·ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥å¯ä»¥ç›´æ¥æ¥è‡ªå­˜å‚¨å™¨æˆ–æ¥è‡ª DV ç¯å¢ƒé©±åŠ¨çš„é¡¶çº§è¾“å…¥<code>X</code>ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œ plain``ASSERT_KNOWN`å°†ä¸èµ·ä½œç”¨ï¼Œå¹¶ä¸”ä½¿ç”¨å…·æœ‰æŸäº›é™å®šæœ‰æ•ˆçš„æ–­è¨€æ˜¯åˆé€‚çš„ï¼š</p>
<pre><code>`ASSERT(AddrKnownIfValid, addr_valid |-&gt; !$isunknown(addr))
always_comb begin
  out = '0
  unique case (addr[1:0])
    ConstAddr1: out = foo;
    ConstAddr2: out = bar;
    default:    out = baz;
  endcase
end
</code></pre>
<p>ç›®çš„åº”è¯¥æ˜¯ä½¿åˆæ ¼çš„æœ‰æ•ˆä¿¡å·å°½å¯èƒ½å¹¿æ³›ï¼Œè€Œä¸æ˜¯ç¼©å°<code>X</code>æ£€æŸ¥èŒƒå›´è¶…å‡ºè¦æ±‚ï¼š</p>
<p>ğŸ‘</p>
<pre><code>`ASSERT(AddrKnownIfValid,
  addr_valid &amp; internal_condition_1 &amp; internal_condition_2 |-&gt;
  !$isunknown(addr))
</code></pre>
<h4 id="åŠ¨æ€æ•°ç»„ç´¢å¼•"><a href="#åŠ¨æ€æ•°ç»„ç´¢å¼•" class="headerlink" title="åŠ¨æ€æ•°ç»„ç´¢å¼•"></a>åŠ¨æ€æ•°ç»„ç´¢å¼•</h4><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŠ¨æ€æ•°ç»„ç´¢å¼•æ“ä½œå¯ä»¥éšå¼å¯¼è‡´ <code>X</code>. å¦‚æœå¯èƒ½ï¼Œåº”é€šè¿‡å°†ç´¢å¼•æ•°ç»„å¯¹é½åˆ° 2 çš„å¹‚æˆ–é€šè¿‡åœ¨ç´¢å¼•æ“ä½œå‘¨å›´æ·»åŠ ä¿æŠ¤ if è¯­å¥æ¥é¿å…è¿™ç§æƒ…å†µã€‚è¿™äº›è§£å†³æ–¹æ¡ˆåœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­è¿›è¡Œäº†è¯´æ˜ã€‚</p>
<p>ğŸ‘</p>
<pre><code>logic selected;
logic [3:0] idx;
logic [11:0] foo; // problematic

assign foo = {12'b1010_1111_0000};
assign selected = foo[idx];
</code></pre>
<p>ğŸ‘</p>
<pre><code>logic selected;
logic [3:0] idx;
logic [15:0] foo; // aligned to powers of two

assign foo = {4'b0000, 12'b1010_1111_0000};
assign selected = foo[idx];
</code></pre>
<p>ğŸ‘</p>
<pre><code>logic selected;
logic [3:0] idx;
logic [11:0] foo;

assign foo = {12'b1010_1111_0000};

// guarding if statement
assign selected = (idx &lt; $bits(foo)) ? foo[idx] : 1'b0;
</code></pre>
<h3 id="ç»„åˆé€»è¾‘"><a href="#ç»„åˆé€»è¾‘" class="headerlink" title="ç»„åˆé€»è¾‘"></a>ç»„åˆé€»è¾‘</h3><p><em><strong>é¿å…æ•æ„Ÿåº¦åˆ—è¡¨ï¼Œå¹¶ä½¿ç”¨ä¸€è‡´çš„åˆ†é…ç±»å‹ã€‚</strong></em></p>
<p>ç”¨äº<code>always_comb</code>SystemVerilog ç»„åˆå—ã€‚<code>always @*</code>å¦‚æœä»…æ”¯æŒ Verilog-2001ï¼Œåˆ™ä½¿ç”¨ã€‚æ°¸è¿œä¸è¦æ˜ç¡®å£°æ˜ç»„åˆé€»è¾‘çš„æ•æ„Ÿæ€§åˆ—è¡¨ã€‚</p>
<p>åœ¨å¯è¡Œçš„æƒ…å†µä¸‹é¦–é€‰åˆ†é…è¯­å¥ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<pre><code>assign final_value = xyz ? value_a : value_b;
</code></pre>
<p>å¦‚æœéœ€è¦ case è¯­å¥ï¼Œè¯·å°†å…¶åŒ…å«åœ¨è‡ªå·±çš„<code>always_comb</code>å—ä¸­ã€‚</p>
<p>å¯ç»¼åˆçš„ç»„åˆé€»è¾‘å—åº”è¯¥åªä½¿ç”¨é˜»å¡èµ‹å€¼ã€‚</p>
<p>ä¸è¦ä½¿ç”¨ä¸‰æ€é€»è¾‘ï¼ˆ<code>Z</code>stateï¼‰æ¥å®Œæˆå¤šè·¯å¤ç”¨ç­‰ç‰‡ä¸Šé€»è¾‘ã€‚</p>
<p>ä¸è¦åœ¨å‡½æ•°å†…éƒ¨æ¨æ–­é”å­˜å™¨ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¯¼è‡´æ¨¡æ‹Ÿ/ç»¼åˆä¸åŒ¹é…ã€‚</p>
<h3 id="æ¡ˆä¾‹é™ˆè¿°"><a href="#æ¡ˆä¾‹é™ˆè¿°" class="headerlink" title="æ¡ˆä¾‹é™ˆè¿°"></a>æ¡ˆä¾‹é™ˆè¿°</h3><p><em><strong>é¿å…ä¿®æ”¹å¤§å°å†™çš„ç¼–è¯‘æŒ‡ç¤ºã€‚<code>unique case</code>æ˜¯æœ€ä½³å®è·µã€‚å§‹ç»ˆå®šä¹‰é»˜è®¤æƒ…å†µã€‚</strong></em></p>
<p>æ°¸è¿œä¸è¦ä½¿ç”¨ the<code>full_case</code>æˆ–<code>parallel_case</code>pragmaã€‚è¿™äº› pragma å¾ˆå®¹æ˜“å¯¼è‡´ç»¼åˆä»¿çœŸä¸åŒ¹é…ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¬¦åˆæ ·å¼çš„å®Œæ•´ case è¯­å¥ç¤ºä¾‹ï¼š</p>
<pre><code>always_comb begin
  unique casez (select)
    3'b000: operand = accum0 &gt;&gt; 0;
    3'b001: operand = accum0 &gt;&gt; 1;
    3'b010: operand = accum1 &gt;&gt; 0;
    3'b011: operand = accum1 &gt;&gt; 1;
    3'b1??: operand = regfile[select[1:0]];
    default: operand = '0; // assign a default
  endcase
end
</code></pre>
<p>å»ºè®®åœ¨æ‰€æœ‰ case è¯­å¥ä¹‹å‰ä½¿ç”¨<code>unique</code>å‰ç¼€ï¼Œå› ä¸ºå®ƒä¼šåˆ›å»ºå¯ä»¥æ•è·æŸäº›é”™è¯¯çš„æ¨¡æ‹Ÿæ–­è¨€ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œ<code>priority</code> å¯ä»¥ä½¿ç”¨ ä»£æ›¿<code>unique</code>ï¼Œä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œçº§è”ä¸‰å…ƒç»“æ„åº”è¯¥æ˜¯è¡¨ç¤ºä¼˜å…ˆçº§ç¼–ç å™¨çš„é¦–é€‰æ–¹å¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¼˜å…ˆçº§ç¼–ç å™¨çš„æ›´æ˜“è¯»çš„è¡¨ç¤ºã€‚</p>
<p>ä¸€å®šè¦<code>unique case</code>æ­£ç¡®ä½¿ç”¨ã€‚ç‰¹åˆ«è¦ç¡®ä¿ï¼š</p>
<ul>
<li><strong>å§‹ç»ˆ</strong>åŒ…å«ä¸€ä¸ª<code>default:</code>è¯­å¥ä»¥é¿å…æ„å¤–æ¨æ–­é—©é”ï¼Œå³ä½¿æ¶µç›–äº†æ‰€æœ‰æƒ…å†µã€‚åœ¨æ¨¡æ‹Ÿä¸­ï¼Œè®¡ç®—ç»“æœä¸ºçš„ case è¡¨è¾¾å¼å°†ä¸åŒ¹é…ä»»ä½• case å¹¶ä¸”å°†å……å½“é”å­˜å™¨ï¼Œå¦‚æœæœªæŒ‡å®šé»˜è®¤å€¼ï¼Œåˆ™ä¼šå¯¼è‡´ä¸ç»¼åˆä¸åŒçš„è¡Œä¸ºã€‚<code>X</code></li>
<li>å¦‚ä¸Šä¾‹æ‰€ç¤ºï¼Œå¦‚æœåœ¨ case è¯­å¥ä¹‹å‰æ²¡æœ‰ç»™å‡ºé»˜è®¤èµ‹å€¼ï¼Œåˆ™åœ¨ä¸€ä¸ª case é¡¹ä¸­åˆ†é…çš„ä»»ä½•å˜é‡éƒ½å¿…é¡»åœ¨æ‰€æœ‰ case é¡¹ä¸­åˆ†é…ï¼ŒåŒ…æ‹¬<code>default:</code>. ä¸è¿™æ ·åšå¯èƒ½ä¼šå¯¼è‡´æ¨¡æ‹Ÿç»¼åˆä¸åŒ¹é…ï¼Œå¦‚<a target="_blank" rel="noopener" href="http://www.lcdm-eng.com/papers/snug12_Paper_final.pdf">Don Mills çš„è®ºæ–‡</a>ä¸­æ‰€è¿°ã€‚</li>
</ul>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¸åŒçš„ç¤ºä¾‹ï¼Œæ˜¾ç¤ºäº†ä¸€ä¸ªç¬¦åˆæ ·å¼çš„ case è¯­å¥å˜ä½“ï¼Œè¯¥å˜ä½“ç»å¸¸ç”¨äºæè¿°æœ‰é™çŠ¶æ€æœºçš„ä¸‹ä¸€ä¸ªçŠ¶æ€é€»è¾‘ã€‚ä¸å‰é¢çš„ç¤ºä¾‹ä¸åŒçš„æ˜¯ï¼Œé»˜è®¤åˆ†é…æ”¾åœ¨<code>unique case</code>å—ä¹‹å‰ï¼Œå› æ­¤å¯ä»¥åœ¨ä¸‹é¢çš„ä¸ªåˆ«æƒ…å†µä¸‹çœç•¥å¸¸è§çš„åˆ†é…ã€‚å¦‚æœä¸æ˜¯åœ¨ case è¯­å¥ä¹‹å‰è¿›è¡Œå¸¸è§çš„é»˜è®¤åˆ†é…ï¼Œåˆ™å¿…é¡»åœ¨æ‰€æœ‰æƒ…å†µä¸‹ä¸ºæ‰€æœ‰å˜é‡åˆ†é…ä¸€ä¸ªå€¼ï¼Œ<code>default:</code>ä»¥é˜²æ­¢æ¨¡æ‹Ÿ-ç»¼åˆä¸åŒ¹é…ã€‚</p>
<pre><code>always_comb begin
  // common default assignments
  state_d = state_q;
  outa = 1'b0;
  outb = 1'b0;
  outc = 1'b0;

  unique case (state_q)
    Idle: begin
      state_d = Work;
      outa = in0;
    end
    Work: begin
      state_d = Wait;
      outb = in1;
    end
    Wait: begin
      state_d = Idle;
      outc = in2;
    end
    // always include a default case
    // empty default permissible due to defaults before case block
    default: ;
  endcase
end
</code></pre>
<h4 id="æ¡ˆä¾‹é¡¹ç›®ä¸­çš„é€šé…ç¬¦"><a href="#æ¡ˆä¾‹é¡¹ç›®ä¸­çš„é€šé…ç¬¦" class="headerlink" title="æ¡ˆä¾‹é¡¹ç›®ä¸­çš„é€šé…ç¬¦"></a>æ¡ˆä¾‹é¡¹ç›®ä¸­çš„é€šé…ç¬¦</h4><p><code>case</code>å¦‚æœä¸éœ€è¦é€šé…ç¬¦è¿ç®—ç¬¦è¡Œä¸ºï¼Œè¯·ä½¿ç”¨ã€‚<code>case inside</code>å¦‚æœéœ€è¦é€šé…ç¬¦è¿ç®—ç¬¦è¡Œä¸ºï¼Œè¯·ä½¿ç”¨ã€‚å¦‚æœ<code>casez</code>éœ€è¦é€šé…ç¬¦è¿ç®—ç¬¦è¡Œä¸ºå¹¶ä¸”éœ€è¦ Verilog-2001 å…¼å®¹æ€§ï¼Œåˆ™ä½¿ç”¨æ­¤é€‰é¡¹ã€‚</p>
<p>åœ¨æ¡ˆä¾‹é¡¹ç›®ä¸­è¡¨ç¤ºé€šé…ç¬¦æ—¶ï¼Œè¯·ä½¿ç”¨â€œï¼Ÿâ€ å­—ç¬¦ï¼Œå› ä¸ºå®ƒæ›´æ¸…æ¥šåœ°è¡¨è¾¾äº†æ„å›¾ã€‚</p>
<p><code>casex</code>ä¸åº”è¯¥ä½¿ç”¨ã€‚<code>casex</code>å®ç°äº†ä¸€ä¸ªå¯¹ç§°é€šé…ç¬¦è¿ç®—ç¬¦ï¼Œè¿™æ ·ä¸€ä¸ª<code>X</code>in case è¡¨è¾¾å¼å¯ä»¥åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ª case é¡¹ã€‚ <code>casez</code>ä»…å°†é«˜é˜»æŠ—çŠ¶æ€ (<code>Z</code>æˆ–<code>?</code>) è§†ä¸ºé€šé…ç¬¦ï¼Œå¹¶å¯¹æœªé©±åŠ¨çš„<code>X</code>è¾“å…¥æ‰§è¡Œå®Œå…¨åŒ¹é…ã€‚è™½ç„¶è¿™å¹¶ä¸èƒ½å®Œå…¨è§£å†³å¯¹ç§°é€šé…ç¬¦åŒ¹é…çš„é—®é¢˜ï¼Œä½†æ„å¤–äº§ç”Ÿ<code>Z</code>è¾“å…¥æ¯”<code>X</code>è¾“å…¥æ›´éš¾ï¼Œå› æ­¤é¦–é€‰è¿™ç§å½¢å¼ã€‚ <code>case inside</code>ä¸ä¼šå°†case è¡¨è¾¾å¼<code>X</code>æˆ–<code>Z</code>case è¡¨è¾¾å¼è§†ä¸ºé€šé…ç¬¦ï¼Œå› æ­¤è¿™ç§å½¢å¼ä¼˜äº<code>casez</code>.</p>
<p>å‚è€ƒï¼š</p>
<ul>
<li>Don Millsï¼Œ<a target="_blank" rel="noopener" href="http://www.lcdm-eng.com/papers/snug12_Paper_final.pdf">åˆä¸€ä¸ªé—©é”å’Œé™·é˜±çº¸</a></li>
<li>Clifford Cummingsï¼Œ<a target="_blank" rel="noopener" href="http://www.sunburst-design.com/papers/CummingsSNUG1999Boston_FullParallelCase_rev1_1.pdf">full_case parallel_caseï¼ŒVerilog ç»¼åˆçš„é‚ªæ¶åŒèƒèƒ</a></li>
<li>Clifford Cummingsï¼Œ<a target="_blank" rel="noopener" href="http://www.sunburst-design.com/papers/CummingsSNUG2005Israel_SystemVerilog_UniquePriority.pdf">SystemVerilog çš„ä¼˜å…ˆçº§å’Œç‹¬ç‰¹æ€§</a></li>
<li>Sutherlandã€Mills å’Œ Spearï¼Œ[å†æ¬¡é‡åˆ°é—®é¢˜ï¼šæ¯ä¸ªå·¥ç¨‹å¸ˆéƒ½åº”è¯¥çŸ¥é“çš„ Verilog å’Œ SystemVerilog æ ‡å‡†ä¸­çš„æ›´å¤šç»†å¾®ä¹‹å¤„](<a target="_blank" rel="noopener" href="http://www.lcdm-eng.com/papers/snug07_Verilog">http://www.lcdm-eng.com/papers/snug07_Verilog</a> Gotchas Part2.pdf)</li>
</ul>
<h3 id="ç”Ÿæˆæ„é€ "><a href="#ç”Ÿæˆæ„é€ " class="headerlink" title="ç”Ÿæˆæ„é€ "></a>ç”Ÿæˆæ„é€ </h3><p><em><strong>å§‹ç»ˆå‘½åæ‚¨ç”Ÿæˆçš„å—ã€‚</strong></em></p>
<p>ä½¿ç”¨ generate æ„é€ æ—¶ï¼Œå§‹ç»ˆæ˜ç¡®å‘½åæ¯ä¸ªç”Ÿæˆä»£ç å—ã€‚å‘½åç”Ÿæˆ if è¯­å¥çš„æ¯ä¸ªå¯èƒ½ç»“æœï¼Œå¹¶å‘½åç”Ÿæˆ for è¯­å¥çš„è¿­ä»£å—ã€‚</p>
<p>è¿™å¯ç¡®ä¿ç”Ÿæˆçš„åˆ†å±‚ä¿¡å·åç§°åœ¨ä¸åŒå·¥å…·ä¹‹é—´ä¿æŒä¸€è‡´ã€‚</p>
<p>ç”Ÿæˆå’Œæ‰€æœ‰å‘½åçš„ä»£ç å—éƒ½åº”è¯¥ä½¿ç”¨<code>lower_snake_case</code>. åº”<code>begin</code>åœ¨ä»£ç å—åç§°å’Œä»£ç å—åç§°ä¹‹é—´æ”¾ç½®ä¸€ä¸ªç©ºæ ¼ã€‚</p>
<p>æ¡ä»¶ç”Ÿæˆæ„é€ ç¤ºä¾‹ï¼š</p>
<p>ğŸ‘</p>
<pre><code>if (TypeIsPosedge) begin : posedge_type
  always_ff @(posedge clk) foo &lt;= bar;
end else begin : negedge_type
  always_ff @(negedge clk) foo &lt;= bar;
end
</code></pre>
<p>å¾ªç¯ç”Ÿæˆæ„é€ ç¤ºä¾‹ï¼š</p>
<p>ğŸ‘</p>
<pre><code>for (genvar ii = 0; ii &lt; NumberOfBuses; ii++) begin : my_buses
  my_bus #(.index(ii)) i_my_bus (.foo(foo), .bar(bar[ii]));
end
</code></pre>
<p>ä¸è¦ä½¿ç”¨é™„åŠ <code>begin</code>å—åŒ…è£…ç”Ÿæˆæ„é€ ã€‚</p>
<p>ä¸è¦ä½¿ç”¨ç”ŸæˆåŒºåŸŸ { <code>generate</code>, <code>endgenerate</code>}ã€‚</p>
<h3 id="æœ‰ç¬¦å·ç®—æœ¯"><a href="#æœ‰ç¬¦å·ç®—æœ¯" class="headerlink" title="æœ‰ç¬¦å·ç®—æœ¯"></a>æœ‰ç¬¦å·ç®—æœ¯</h3><p><em><strong>åœ¨ä½¿ç”¨æœ‰ç¬¦å·ç®—æœ¯çš„åœ°æ–¹ä½¿ç”¨å¯ç”¨çš„æœ‰ç¬¦å·ç®—æœ¯ç»“æ„ã€‚</strong></em></p>
<p>å½“éœ€è¦ä»æ— ç¬¦å·è½¬æ¢ä¸ºæœ‰ç¬¦å·æ—¶ï¼Œè¯·ä½¿ç”¨å¼ºåˆ¶è½¬æ¢<code>signed'</code>è¿ç®—ç¬¦ï¼ˆ<code>$signed</code>åœ¨ Verilog-2001 ä¸­ï¼‰ã€‚</p>
<p>å¦‚æœè®¡ç®—ä¸­çš„ä»»ä½•æ“ä½œæ•°æ˜¯æ— ç¬¦å·çš„ï¼ŒVerilog ä¼šéšå¼åœ°å°†æ‰€æœ‰æ“ä½œæ•°è½¬æ¢ä¸ºæ— ç¬¦å·å¹¶ç”Ÿæˆè­¦å‘Šã€‚å¦‚æœæ­£ç¡®è½¬æ¢äº†æ‰€æœ‰æ— ç¬¦å·å˜é‡ï¼Œåˆ™ä»¿çœŸæˆ–ç»¼åˆå·¥å…·ä¸åº”æœ‰ä»»ä½•æœ‰ç¬¦å·åˆ°æ— ç¬¦å·çš„è­¦å‘Šã€‚</p>
<p>éšå¼æœ‰ç¬¦å·åˆ°æ— ç¬¦å·è½¬æ¢çš„ç¤ºä¾‹ï¼š</p>
<pre><code>logic signed [7:0]  a;
logic               incr;
logic signed [15:0] sum1, sum2, sum3;
initial begin
  a = 8'sh80;                        // a = -128
  incr = 1'b1;
  sum1 = a + incr;                   // bad:  sum1 = 16'h0081 ( 129)
  sum2 = a + signed'({1'b0, incr});  // good: sum2 = 16'hFF81 (-127)
  sum3 = a + 8'sh01;                 // good: sum3 = sum2 (more straightforward)
end
</code></pre>
<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ— ç¬¦å·çš„äº‹å®ä¹Ÿ<code>incr</code>å¯¼è‡´<code>a</code>è¯„ä¼°ä¸ºæ— ç¬¦å·ã€‚è¯¥<code>sum1</code>è¯„ä¼°ä»¤äººæƒŠè®¶ï¼Œå¹¶å¸¦æœ‰ä¸åº”å¿½ç•¥çš„è­¦å‘Šæ ‡è®°ã€‚</p>
<h3 id="æ•°å­—æ ¼å¼"><a href="#æ•°å­—æ ¼å¼" class="headerlink" title="æ•°å­—æ ¼å¼"></a>æ•°å­—æ ¼å¼</h3><p><em><strong>ç”¨ .å‰ç¼€æ‰“å°çš„äºŒè¿›åˆ¶æ•°<code>0b</code>ã€‚ç”¨ . å‰ç¼€æ‰“å°çš„åå…­è¿›åˆ¶æ•°å­—<code>0x</code>ã€‚ä¸è¦ä¸ºåè¿›åˆ¶æ•°å­—ä½¿ç”¨å‰ç¼€ã€‚</strong></em></p>
<p>åœ¨ä¸ºæ—¥å¿—æ–‡ä»¶æ ¼å¼åŒ–æ•°å­—çš„æ–‡æœ¬è¡¨ç¤ºæ—¶ï¼Œè¯·æ˜ç¡®æ‚¨åŒ…å«å“ªäº›æ•°æ®ã€‚</p>
<p>ä½¿æ‰“å°æ•°å­—çš„åŸºç¡€æ¸…æ™°ã€‚åªæ‰“å°ä¸å¸¦ä¿®é¥°ç¬¦çš„åè¿›åˆ¶æ•°å­—ã€‚<code>0x</code>å¯¹åå…­è¿›åˆ¶ä½¿ç”¨å‰ç¼€ï¼Œ<code>0b</code>å¯¹äºŒè¿›åˆ¶ä½¿ç”¨å‰ç¼€ã€‚</p>
<p>å•ç‹¬è§£ç å¤§å‹ç»“æ„çš„å„ä¸ªå­—æ®µï¼Œè€Œä¸æ˜¯æœŸæœ›ç”¨æˆ·æ‰‹åŠ¨è§£ç åŸå§‹å€¼ã€‚</p>
<p>ğŸ‘</p>
<pre><code>$display("0x%0x", some_hex_value);
$display("0b%0b", some_binary_value);
$display("%0d",   some_decimal_value);
</code></pre>
<p>ğŸ‘</p>
<pre><code>$display("%0x",   some_hex_value);
$display("%0b",   some_binary_value);
$display("0d%0d", some_decimal_value);
</code></pre>
<p>åˆ†é…å¸¸é‡å€¼æ—¶ï¼Œä¸ºäº†æ›´å¥½çš„å¯è¯»æ€§ï¼Œæœ€å¥½å¯¹é•¿åº¦è¶…è¿‡ 8 çš„åå…­è¿›åˆ¶æˆ–äºŒè¿›åˆ¶ä½å¼ºåº¦ä½¿ç”¨ä¸‹åˆ’çº¿è¡¨ç¤ºæ³•ã€‚é™¤éæé«˜å¯è¯»æ€§ï¼Œå¦åˆ™ä¸éœ€è¦é›¶å‰ç¼€ã€‚ä»¥å®ƒä»¬é€šå¸¸æ˜¾ç¤ºçš„æ ¼å¼ï¼ˆäºŒè¿›åˆ¶ã€åå…­è¿›åˆ¶ã€åè¿›åˆ¶ï¼‰å£°æ˜å¸¸é‡ã€‚</p>
<p>ğŸ‘</p>
<pre><code>logic [15:0] val0, val1, val2;
logic [39:0] addr0, addr1;

always_comb begin
  val0 = 16'h0;
  if (condition1) begin
    val1  = 16'b0010_0011_0000_1101;
    val2  = 16'b0010_1100_0000_0000;
    addr1 = 40'h00_1fc0_0000;
    addr2 = 40'h00_efc0_0000;
  end else begin
    val0  = 16'hffff;
    val1  = 16'b1010_0011_0110_1001;
    val2  = 16'b1110_1100_1111_0110;
    addr1 = 40'h40_8000_0000;
    addr2 = 40'h41_c000_0000;
  end
end
</code></pre>
<h3 id="åŠŸèƒ½å’Œä»»åŠ¡"><a href="#åŠŸèƒ½å’Œä»»åŠ¡" class="headerlink" title="åŠŸèƒ½å’Œä»»åŠ¡"></a>åŠŸèƒ½å’Œä»»åŠ¡</h3><p>ä»¥ä¸‹éƒ¨åˆ†ä»…é€‚ç”¨äºå¯ç»¼åˆ RTLã€‚è¯·å‚é˜…ç”¨äº DV ä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/DVCodingStyle.md">çš„è®¾è®¡éªŒè¯çš„ç¼–ç é£æ ¼æŒ‡å—ã€‚</a></p>
<p><em><strong>åœ¨å¯ç»¼åˆçš„ RTL ä¸­ï¼Œåªè¦å£°æ˜äº†å‡½æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨å‡½æ•° <code>automatic</code>ã€‚ä¸åº”ä½¿ç”¨ä»»åŠ¡ã€‚</strong></em></p>
<p>å‡½æ•°å¿…é¡»åœ¨åŒ…æˆ–æ¨¡å—ä¸­å£°æ˜ã€‚ä¸€ä¸ªåŒ…é€‚ç”¨äºå‡½æ•°ä¸åŒ…ä¸­çš„å…¶ä»–å®šä¹‰ç›¸å…³çš„æƒ…å†µï¼Œå¹¶ä¸”å¯èƒ½å¯¹å¤šä¸ªæ¨¡å—æœ‰ç”¨ï¼ˆå³ä½¿å®ƒå½“å‰ä»…ç”±ä¸€ä¸ªæ¨¡å—ä½¿ç”¨ï¼‰ã€‚æ¨¡å—é€‚ç”¨äºåŠŸèƒ½ä¸è¯¥æ¨¡å—çš„å†…éƒ¨ç‰¹åˆ«ç›¸å…³çš„æƒ…å†µã€‚</p>
<p>å‡½æ•°çš„ç›®æ ‡åº”è¯¥æ˜¯åœ¨æ¦‚å¿µä¸Šè¡¨ç¤ºä¸€ä¸ªå¯é‡ç”¨çš„ç»„åˆé€»è¾‘å—ã€‚</p>
<p>å¿…é¡»ä¸ºæ‰€æœ‰å‚æ•°å’Œå‡½æ•°è¿”å›å€¼æ˜¾å¼å£°æ˜å­˜å‚¨ç±»å‹ã€‚æ‰€æœ‰ç±»å‹éƒ½å¿…é¡»æ˜¯ 4 æ€æ•°æ®ç±»å‹ï¼Œæˆ–è€…<code>logic</code>æ´¾ç”Ÿè‡ªçš„ç±»å‹<code>logic</code>ï¼ˆä¾‹å¦‚é€‚å½“<code>struct</code>çš„<code>enum</code>æˆ–<code>typedef</code>ç±»å‹ï¼‰ã€‚</p>
<p>ä¸è¦åœ¨å‡½æ•°å‚æ•°ä¸Šä½¿ç”¨<code>output</code>ã€ã€<code>inout</code>æˆ–ã€‚<code>ref</code>æ‰€æœ‰åŠŸèƒ½éƒ½åº”è¯¥åªæ¶ˆè€—è¾“å…¥å¹¶äº§ç”Ÿä¸€ä¸ªè¾“å‡ºã€‚<code>input</code>æ˜¯é»˜è®¤å€¼ï¼Œå‡½æ•°å‚æ•°ä¸éœ€è¦ã€‚</p>
<p>ğŸ‘</p>
<pre><code>// - Doesn't have explicit storage type on `a` or `b` or return type
// - `b` being used as `output` argument
// - `input` not required on `a`
function automatic [2:0] foo(input [2:0] a, [2:0] b);
  b = b + 1;
  return a + b;
endfunction
</code></pre>
<p>ğŸ‘</p>
<pre><code>// - Doesn't have explicit storage type on `a`, `b` or `c`
// - Uses `output` on `c`
// - `input` not required on `a` and `b`
function automatic logic [2:0] foo(input [2:0] a, input [2:0] b, output [2:0] c);
  c = a - b;
  return a + b;
endfunction
</code></pre>
<p>ğŸ‘</p>
<pre><code>// - Uses 2-state data type `int` for `a`
function automatic logic [2:0] foo(int a, logic [2:0] b);
  return a + b;
endfunction
</code></pre>
<p>ğŸ‘</p>
<pre><code>function automatic logic [2:0] foo(logic [2:0] a, logic [2:0] b);
 return a ^ b;
endfunction
</code></pre>
<p>ğŸ‘</p>
<pre><code>typedef logic [2:0] bar_t;

typedef struct packed {
  logic [2:0] field;
} baz_t;

function automatic logic [2:0] foo(bar_t a, baz_t b);
  return a + b.field;
endfunction
</code></pre>
<p>åº”è¯¥ä½¿ç”¨æ˜¾å¼<code>return result</code>æ ·å¼ä»å‡½æ•°è¿”å›æ•°æ®ã€‚ä¸è¦ä½¿ç”¨<code>function_name = result</code>æ ·å¼ã€‚</p>
<p>ğŸ‘</p>
<pre><code>function automatic logic [2:0] foo(logic [2:0] a, logic [2:0] b);
  if (a == 3'd2) begin
    foo = b;
  end else begin
    foo = a ^ b;
  end
endfunction
</code></pre>
<p>ğŸ‘</p>
<pre><code>function automatic logic [2:0] foo(logic [2:0] a, logic [2:0] b);
  logic [2:0] result;

  if (a == 3'd2) begin
    result = b;
  end else begin
    result = a ^ b;
  end

  return result;
endfunction
</code></pre>
<p>å¿…é¡»åœ¨æ‰€æœ‰ä»£ç è·¯å¾„ä¸­åˆ†é…æ‰€æœ‰å±€éƒ¨å˜é‡ï¼Œé€šè¿‡åˆå§‹åˆ†é…æˆ–é€šè¿‡ä½¿ç”¨<code>else</code>and <code>default:</code>for<code>if</code>å’Œ <code>case</code>è¯­å¥ã€‚</p>
<p>ğŸ‘</p>
<pre><code>function automatic logic [2:0] foo(logic [2:0] a, logic [2:0] b);
  logic [2:0] local_var_1;
  logic [2:0] local_var_2;

  local_var_1 = 3'd0;

  if (a == 0) begin
    local_var_1 = 3'd2;
  end

  unique case(b)
    3'd0:    local_var_2 = 3'd1;
    3'd1:    local_var_2 = 3'd3;
    default: local_var_2 = 3'd0;
  endcase

  return local_var_1 + local_var_2;
endfunction
</code></pre>
<p>ğŸ‘</p>
<pre><code>function automatic logic [2:0] foo(logic [2:0] a, logic [2:0] b);
  logic [2:0] local_var_1;
  logic [2:0] local_var_2;

  if (a == 0) begin
    local_var_1 = 3'd2;
  end

  unique case(b)
    3'd0:    local_var_2 = 3'd1;
    3'd1:    local_var_2 = 3'd3;
  endcase

  return local_var_1 + local_var_2;
endfunction
</code></pre>
<h3 id="æœ‰é—®é¢˜çš„è¯­è¨€ç‰¹å¾å’Œç»“æ„"><a href="#æœ‰é—®é¢˜çš„è¯­è¨€ç‰¹å¾å’Œç»“æ„" class="headerlink" title="æœ‰é—®é¢˜çš„è¯­è¨€ç‰¹å¾å’Œç»“æ„"></a>æœ‰é—®é¢˜çš„è¯­è¨€ç‰¹å¾å’Œç»“æ„</h3><p>è¿™äº›è¯­è¨€ç‰¹æ€§è¢«è®¤ä¸ºæ˜¯æœ‰é—®é¢˜çš„ï¼Œé™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™ä¸é¼“åŠ±ä½¿ç”¨å®ƒä»¬ï¼š</p>
<ul>
<li>æ¥å£ã€‚</li>
<li><code>alias</code>å£°æ˜ã€‚</li>
</ul>
<h4 id="æµ®åŠ¨èµ·å§‹å—"><a href="#æµ®åŠ¨èµ·å§‹å—" class="headerlink" title="æµ®åŠ¨èµ·å§‹å—"></a>æµ®åŠ¨èµ·å§‹å—</h4><p>ä½¿ç”¨é™¤<code>for</code>å¾ªç¯ä¹‹å¤–çš„ç”Ÿæˆå—<code>if</code>ï¼Œæˆ–<code>case</code>ç”Ÿæˆæ„é€ ä¸ç¬¦åˆ LRMã€‚è™½ç„¶æŸäº›å·¥å…·å¯èƒ½ä¼šæ¥å—è¿™ç§ç”¨æ³•ï¼Œä½†æœ¬æŒ‡å—ç¦æ­¢è¿™ç§â€œè£¸â€ç”Ÿæˆå—ã€‚è¯·æ³¨æ„ï¼Œç±»ä¼¼çš„â€œé¡ºåºå—â€æ„é€ ç¬¦åˆ LRM å¹¶è¢«å…è®¸ã€‚</p>
<p>ğŸ‘</p>
<pre><code>module foo (
  input bar,
  output foo
);
  begin // illegal generate block
    assign foo = bar;
  end
endmodule
</code></pre>
<h4 id="åˆ†å±‚å¼•ç”¨"><a href="#åˆ†å±‚å¼•ç”¨" class="headerlink" title="åˆ†å±‚å¼•ç”¨"></a>åˆ†å±‚å¼•ç”¨</h4><p>ç¦æ­¢åœ¨å¯ç»¼åˆçš„ RTL ä»£ç ä¸­ä½¿ç”¨åˆ†å±‚å¼•ç”¨ã€‚æŸäº›ç»¼åˆå·¥å…·ç¡®å®æ”¯æŒåˆ†å±‚å¼•ç”¨ï¼Œè€Œä¸€äº›å·¥å…·ä¼šå‡ºé”™ï¼Œè€Œå…¶ä»–å·¥å…·å¯èƒ½ä¼šé»˜é»˜åœ°å¿½ç•¥å®ƒä»¬ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä»¿çœŸ/ç»¼åˆä¸åŒ¹é…ã€‚</p>
<p>ä¸€ä¸ªä¾‹å¤–æƒ…å†µæ˜¯åˆ†å±‚å¼•ç”¨ç”±å®ä¿æŠ¤ä»¥å°†å®ƒä»¬ç§»é™¤ä»¥è¿›è¡Œç»¼åˆï¼Œä¾‹å¦‚ï¼Œä½œä¸º SystemVerilog æ–­è¨€ (SVA) çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>ğŸ‘</p>
<pre><code>module mymod_int (
  input        in0_i,
  input        in1_i,
  input        in2_i,
  output logic out_o
);

  logic int;
  assign int   = in0_i &amp; in1_i;
  assign out_o = in2_i | int;

endmodule

module mymod (
  ...
);

  mymod_int u_mymod_int (
    .in0_i,
    .in1_i,
    .in2_i,
    .out_o
  );

  // Hierarchical references are prohibited in synthesizable RTL code.
  assign int_o = u_mymod_int.int;

endmodule
</code></pre>
<h2 id="è®¾è®¡æƒ¯ä¾‹"><a href="#è®¾è®¡æƒ¯ä¾‹" class="headerlink" title="è®¾è®¡æƒ¯ä¾‹"></a>è®¾è®¡æƒ¯ä¾‹</h2><h3 id="æ¦‚æ‹¬-3"><a href="#æ¦‚æ‹¬-3" class="headerlink" title="æ¦‚æ‹¬"></a>æ¦‚æ‹¬</h3><p>æœ¬èŠ‚çš„ä¸»è¦æ€æƒ³åŒ…æ‹¬ï¼š</p>
<ul>
<li>å£°æ˜æ‰€æœ‰ä¿¡å·å¹¶ä½¿ç”¨<code>logic</code>ï¼š<code>logic foo;</code></li>
<li>æ‰“åŒ…æ•°ç»„æ˜¯å°ç«¯çš„ï¼š<code>logic [7:0] byte;</code></li>
<li>æœªæ‰“åŒ…çš„æ•°ç»„æ˜¯å¤§ç«¯çš„ï¼š<code>byte_t arr[0:N-1];</code></li>
<li>é¦–é€‰æ³¨å†Œæ¨¡å—è¾“å‡ºã€‚</li>
<li>ä¸€è‡´åœ°å£°æ˜ FSMã€‚</li>
</ul>
<h3 id="å£°æ˜æ‰€æœ‰ä¿¡å·"><a href="#å£°æ˜æ‰€æœ‰ä¿¡å·" class="headerlink" title="å£°æ˜æ‰€æœ‰ä¿¡å·"></a>å£°æ˜æ‰€æœ‰ä¿¡å·</h3><p><em><strong>ä¸è¦ä¾èµ–æ¨æ–­çš„ç½‘ç»œã€‚</strong></em></p>
<p>æ‰€æœ‰ä¿¡å·<strong>å¿…é¡»</strong>åœ¨ä½¿ç”¨å‰æ˜¾å¼å£°æ˜ã€‚æ‰€æœ‰å£°æ˜çš„ä¿¡å·éƒ½å¿…é¡»æŒ‡å®šæ•°æ®ç±»å‹ã€‚æ­£ç¡®çš„è®¾è®¡ä¸åŒ…å«æ¨æ–­ç½‘ç»œã€‚</p>
<h3 id="ç”¨äºlogicåˆæˆ"><a href="#ç”¨äºlogicåˆæˆ" class="headerlink" title="ç”¨äºlogicåˆæˆ"></a>ç”¨äº<code>logic</code>åˆæˆ</h3><p><em><strong>ç”¨äº<code>logic</code>åˆæˆã€‚<code>wire</code>å¿…è¦æ—¶å…è®¸ã€‚</strong></em></p>
<p>å¯ç»¼åˆ RTL ä¸­çš„æ‰€æœ‰ä¿¡å·éƒ½å¿…é¡»æ ¹æ® 4 çŠ¶æ€æ•°æ®ç±»å‹æ¥å®ç°ã€‚è¿™æ„å‘³ç€æ‰€æœ‰ä¿¡å·æœ€ç»ˆéƒ½å¿…é¡»ç”±å­˜å‚¨ç±»å‹ä¸º<code>logic</code>. è™½ç„¶ SystemVerilog ç¡®å®ä¸ºå…¶ä»–æ•°æ®åŸè¯­æä¾›äº† 4 çŠ¶æ€å­˜å‚¨ï¼ˆå³<code>integer</code>ï¼‰ï¼Œä½†è¿™äº›åŸè¯­å¾ˆå®¹æ˜“äº§ç”Ÿè¯¯è§£å’Œè¯¯ç”¨ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<p>ğŸ‘</p>
<pre><code>logic signed [31:0] x_velocity;  // say what you mean: a signed 32-bit integer.
typedef logic [7:0] byte_t;
</code></pre>
<p>ğŸ‘</p>
<pre><code>bit signed [63:0] stars_in_the_sky;  // 2-state logic doesn't belong in RTL
int grains_of_sand;  // Or wait, did I mean integer?  Easy to confuse!
</code></pre>
<p>å…è®¸ä½¿ç”¨çº¿ä½œä¸ºç®€å†™æ¥å£°æ˜ç½‘ç»œå’Œæ‰§è¡Œè¿ç»­åˆ†é…ã€‚æ³¨æ„ä¸è¦å°†è¿ç»­èµ‹å€¼ä¸åˆå§‹åŒ–æ··æ·†ã€‚ä¾‹å¦‚ï¼š</p>
<p>ğŸ‘</p>
<pre><code>wire [7:0] sum = a + b;  // Continuous assignment
</code></pre>
<p>ğŸ‘</p>
<pre><code>logic [7:0] sum = a + b; // Initialization (not synthesizable)
</code></pre>
<p><code>sum</code>è¢«åˆå§‹åŒ–ä¸º a å’Œ b çš„åˆå§‹å€¼ä¹‹å’Œã€‚</p>
<p>ğŸ‘</p>
<pre><code>logic [7:0] acc = '0;    // Initialization (synthesizable on some FPGA tools)
</code></pre>
<p><code>logic</code>ä¸åˆé€‚çš„åœ°æ–¹ä¹Ÿæœ‰ä¾‹å¤–ã€‚ä¾‹å¦‚ï¼Œè¿æ¥åˆ°åŒå‘ ( <code>inout</code>) ç«¯å£çš„ç½‘ç»œå¿…é¡»ç”¨ å£°æ˜<code>wire</code>ã€‚åº”è¯¥ç”¨ç®€çŸ­çš„è¯„è®ºæ¥è¯æ˜è¿™äº›ä¾‹å¤–æ˜¯åˆç†çš„ã€‚</p>
<p>DVï¼ˆè®¾è®¡éªŒè¯ï¼‰å…è®¸ä½¿ç”¨ 2 æ€é€»è¾‘ï¼Œä½† 4 æ€å’Œ 2 æ€ä¿¡å·ä¹‹é—´çš„æ‰€æœ‰æ¥å£å¿…é¡»<code>X</code>åœ¨è§£æä¸º 2 æ€å˜é‡ä¹‹å‰æ–­è¨€å¯¹ 4 æ€ç½‘ç»œçš„æ£€æŸ¥ã€‚</p>
<h3 id="é€»è¾‘ä¸æŒ‰ä½"><a href="#é€»è¾‘ä¸æŒ‰ä½" class="headerlink" title="é€»è¾‘ä¸æŒ‰ä½"></a>é€»è¾‘ä¸æŒ‰ä½</h3><p><em><strong>é¦–é€‰é€»è¾‘ç»“æ„è¿›è¡Œé€»è¾‘æ¯”è¾ƒï¼ŒæŒ‰ä½è¿›è¡Œæ•°æ®ã€‚</strong></em></p>
<p>é€»è¾‘è¿ç®—ç¬¦ ( <code>!</code>, <code>||</code>, <code>&amp;&amp;</code>, <code>==</code>, <code>!=</code>) åº”ç”¨äºè¯„ä¼°é€»è¾‘ï¼ˆçœŸæˆ–å‡ï¼‰å€¼çš„æ‰€æœ‰æ„é€ ï¼Œä¾‹å¦‚ if å­å¥å’Œä¸‰å…ƒèµ‹å€¼ã€‚å¯¹æ‰€æœ‰æ•°æ®ç»“æ„éƒ½ä¼˜å…ˆä½¿ç”¨æŒ‰ä½è¿ç®—ç¬¦ ( <code>~</code>, <code>|</code>, <code>&amp;</code>, <code>^</code>)ï¼Œå³ä½¿æ˜¯æ ‡é‡ã€‚åœ¨å¾ˆæ˜æ˜¾è¦åœ¨é€»è¾‘ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨è¯„ä¼°è¡¨è¾¾å¼çš„æƒ…å†µä¸‹å¯ä»¥ä¾‹å¤–ã€‚</p>
<p>ğŸ‘</p>
<pre><code>always_ff @(posedge clk_i or negedge rst_ni) begin
  if (!rst_ni) begin
    reg_q &lt;= '0;
  end else begin
    reg_q &lt;= reg_d;
  end
end

always_comb begin
  if (bool_a || (bool_b &amp;&amp; !bool_c) begin
    x = 1'b1;
  end else begin
    x = 1'b0;
end

assign z = ((bool_a != bool_b) || bool_c) ? a : b;
assign y = (a &amp; ~b) | c;
</code></pre>
<p>ğŸ‘</p>
<pre><code>always_ff @(posedge clk_i or negedge rst_ni) begin
  if (~rst_ni) begin
    reg_q &lt;= '0;
  end else begin
    reg_q &lt;= reg_d;
  end
end

always_comb begin
  if (bool_a | (bool_b &amp; ~bool_c) begin
    x = 1'b1;
  end else begin
    x = 1'b0;
end

assign z = ((bool_a ^ bool_b) | bool_c) ? a : b;
assign y = (a &amp;&amp; !b) || c;
</code></pre>
<p>ğŸ‘</p>
<pre><code>// allowed logical assignment for boolean test
assign request_valid = !fifo_empty &amp;&amp; data_available;

always_comb begin
  if (request_valid) begin
    output_valid = 1'b1;
  end else begin
    output_valid = 1'b0;
  end
end
</code></pre>
<h3 id="æ‰“åŒ…è®¢è´­"><a href="#æ‰“åŒ…è®¢è´­" class="headerlink" title="æ‰“åŒ…è®¢è´­"></a>æ‰“åŒ…è®¢è´­</h3><p><em><strong>ä½å‘é‡å’Œå‹ç¼©æ•°ç»„å¿…é¡»æ˜¯ little-endianã€‚</strong></em></p>
<p>å£°æ˜ä½å‘é‡å’Œå‹ç¼©æ•°ç»„æ—¶ï¼Œæœ€é«˜æœ‰æ•ˆç•Œé™ï¼ˆå†’å·å·¦ä¾§ï¼‰çš„ç´¢å¼•å¿…é¡»å¤§äºæˆ–ç­‰äºæœ€ä½æœ‰æ•ˆç•Œé™ï¼ˆå†’å·å³ä¾§ï¼‰ã€‚</p>
<p>è¿™ç§ä½å‘é‡å£°æ˜é£æ ¼ä¿æŒå‹ç¼©å˜é‡ little-endianã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>typedef logic [7:0] u8_t;
logic [31:0] u32_word;
u8_t [1:0] u16_word;
u8_t byte3, byte2, byte1, byte0;
assign u16_word = {byte1, byte0};
assign u32_word = {byte3, byte2, u16_word};
</code></pre>
<h3 id="æ— åŒ…è£…è®¢è´­"><a href="#æ— åŒ…è£…è®¢è´­" class="headerlink" title="æ— åŒ…è£…è®¢è´­"></a>æ— åŒ…è£…è®¢è´­</h3><p><em><strong>è§£å‹çš„æ•°ç»„å¿…é¡»æ˜¯å¤§ç«¯çš„ã€‚</strong></em></p>
<p>ä»¥å¤§ç«¯æ–¹å¼å£°æ˜è§£åŒ…æ•°ç»„ï¼ˆä¾‹å¦‚ï¼Œ<code>[n:m]</code>where <code>n &lt;= m</code>ï¼‰ã€‚æ°¸è¿œä¸è¦ä»¥ little-endian é¡ºåºå£°æ˜æœªæ‰“åŒ…çš„æ•°ç»„ï¼Œä¾‹å¦‚ <code>[size-1:0]</code>.</p>
<p>ä½¿ç”¨è¾ƒçŸ­çš„ç¬¦å·å£°æ˜ä»é›¶å¼€å§‹çš„è§£åŒ…æ•°ç»„<code>[size]</code>ã€‚æ®äº†è§£ï¼Œ<code>[size]</code>ç›¸å½“äºå¤§ç«¯å£°æ˜ <code>[0:size-1]</code>ã€‚</p>
<pre><code>logic [15:0] word_array[3] = '{word0, word1, word2};
</code></pre>
<h3 id="æœ‰é™çŠ¶æ€æœº"><a href="#æœ‰é™çŠ¶æ€æœº" class="headerlink" title="æœ‰é™çŠ¶æ€æœº"></a>æœ‰é™çŠ¶æ€æœº</h3><p><em><strong>çŠ¶æ€æœºä½¿ç”¨æšä¸¾æ¥å®šä¹‰çŠ¶æ€ï¼Œå¹¶é€šè¿‡ä¸¤ä¸ªè¿›ç¨‹å—å®ç°ï¼šç»„åˆå—å’Œæ—¶é’Ÿå—ã€‚</strong></em></p>
<p>æ¯ä¸ªçŠ¶æ€æœºæè¿°éƒ½åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li>å£°æ˜å’Œæè¿°çŠ¶æ€çš„æšä¸¾ã€‚</li>
<li>ä¸€ä¸ªç»„åˆè¿‡ç¨‹å—ï¼Œå®ƒå¯¹çŠ¶æ€è¿›è¡Œè§£ç ä»¥äº§ç”Ÿä¸‹ä¸€ä¸ªçŠ¶æ€å’Œå…¶ä»–ç»„åˆè¾“å‡ºã€‚</li>
<li>ä»ä¸‹ä¸€ä¸ªçŠ¶æ€æ›´æ–°çŠ¶æ€çš„æ—¶é’Ÿè¿›ç¨‹å—ã€‚</li>
</ol>
<p><em>æšä¸¾çŠ¶æ€</em></p>
<p>çŠ¶æ€æœºçš„æšä¸¾è¯­å¥åº”è¯¥åˆ—å‡ºçŠ¶æ€æœºä¸­çš„æ¯ä¸ªçŠ¶æ€ã€‚æè¿°çŠ¶æ€çš„æ³¨é‡Šåº”æ¨è¿Ÿåˆ°ä¸‹é¢ç»„åˆè¿‡ç¨‹å—ä¸­çš„ case è¯­å¥ã€‚</p>
<p><code>UpperCamelCase</code>ä¸å…¶ä»– <a target="_blank" rel="noopener" href="https://github.com/lowRISC/style-guides/blob/master/VerilogCodingStyle.md#enumerations">æšä¸¾å¸¸é‡</a>ä¸€æ ·ï¼Œåº”ä»¥ in å‘½åçŠ¶æ€ã€‚</p>
<p>é™¤éæœ‰ç‰¹æ®Šæƒ…å†µï¼ŒçŠ¶æ€æœºçš„åˆå§‹ç©ºé—²çŠ¶æ€å°†è¢«å‘½åä¸º<code>Idle</code>or <code>StIdle</code>ã€‚ï¼ˆå¦‚æœå¯ä»¥æé«˜æ¸…æ™°åº¦ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ›¿ä»£åç§°ã€‚ï¼‰</p>
<p>ç†æƒ³æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ¨¡å—åº”è¯¥åªåŒ…å«ä¸€ä¸ªçŠ¶æ€æœºã€‚å¦‚æœæ‚¨çš„æ¨¡å—éœ€è¦å¤šä¸ªçŠ¶æ€æœºï¼Œåˆ™éœ€è¦ä¸ºæ¯ä¸ªçŠ¶æ€æœºçš„çŠ¶æ€æ·»åŠ å”¯ä¸€çš„å‰ç¼€ï¼ˆæˆ–åç¼€ï¼‰ï¼Œä»¥åŒºåˆ†å“ªä¸ªçŠ¶æ€ä¸å“ªä¸ªçŠ¶æ€æœºç›¸å…³è”ã€‚ä¾‹å¦‚ï¼Œå…·æœ‰â€œè¯»å–å™¨â€æœºå™¨å’Œâ€œå†™å…¥å™¨â€æœºå™¨çš„æ¨¡å—å¯èƒ½å…·æœ‰<code>StRdIdle</code>çŠ¶æ€å’Œ<code>StWrIdle</code>çŠ¶æ€ã€‚</p>
<p><em>å›½å®¶ç»„åˆè§£ç </em></p>
<p>ç»„åˆè¿‡ç¨‹å—åº”åŒ…å«ï¼š</p>
<ul>
<li>è§£ç çŠ¶æ€ä»¥äº§ç”Ÿä¸‹ä¸€ä¸ªçŠ¶æ€å’Œç»„åˆè¾“å‡ºçš„ case è¯­å¥ã€‚ä¸ºæ¸…æ¥šèµ·è§ï¼Œä»…åº”ç¼–ç è¾“å‡ºå€¼åç¦»é»˜è®¤å€¼çš„æƒ…å†µã€‚</li>
<li>åœ¨ case è¯­å¥ä¹‹å‰åº”è¯¥æ˜¯ä¸€æ®µä»£ç ï¼Œä¸ºæ¯ä¸ªç»„åˆè¾“å‡ºå®šä¹‰é»˜è®¤å€¼ï¼ŒåŒ…æ‹¬â€œä¸‹ä¸€ä¸ªçŠ¶æ€â€ã€‚</li>
<li>â€œä¸‹ä¸€ä¸ªçŠ¶æ€â€å˜é‡çš„é»˜è®¤å€¼åº”è¯¥æ˜¯å½“å‰çŠ¶æ€ã€‚ç„¶åï¼Œåœ¨çŠ¶æ€ä¹‹é—´è½¬æ¢æ—¶ï¼Œè§£ç çŠ¶æ€çš„ case è¯­å¥å°†åªåˆ†é…ç»™â€œä¸‹ä¸€ä¸ªçŠ¶æ€â€ã€‚</li>
<li>åœ¨ case è¯­å¥ä¸­ï¼Œæ¯ä¸ªçŠ¶æ€é€‰æ‹©ä¹‹å‰éƒ½åº”è¯¥æœ‰ä¸€ä¸ªæ³¨é‡Šï¼Œæè¿°è¯¥çŠ¶æ€åœ¨çŠ¶æ€æœºä¸­çš„åŠŸèƒ½ã€‚</li>
</ul>
<p><em>å›½å®¶ç™»è®°å†Œ</em></p>
<p>åœ¨æ­¤è¿‡ç¨‹ä¸­ä¸åº”æ‰§è¡Œé™¤å¤ä½ä¹‹å¤–çš„ä»»ä½•é€»è¾‘ã€‚çŠ¶æ€å˜é‡åº”è¯¥é”å­˜â€œä¸‹ä¸€ä¸ªçŠ¶æ€â€å˜é‡çš„å€¼ã€‚</p>
<p><em>å…¶ä»–æŒ‡å—</em></p>
<p>å¦‚æœå¯èƒ½ï¼Œè¯·å°è¯•åœ¨åç§°å¼€å¤´é™„è¿‘é€‰æ‹©ä¸åŒçš„çŠ¶æ€åç§°ï¼Œä»¥ä½¿å®ƒä»¬åœ¨æŸ¥çœ‹æ³¢å½¢è½¨è¿¹æ—¶æ›´å…·å¯è¯»æ€§ã€‚</p>
<p><em>ä¾‹å­</em></p>
<p>ğŸ‘</p>
<pre><code>// Define the states
typedef enum {
  StIdle, StFrameStart, StDynInstrRead, StBandCorr, StAccStoreWrite, StBandEnd
} alcor_state_e;

alcor_state_e alcor_state_d, alcor_state_q;

// Combinational decode of the state
always_comb begin
  alcor_state_d = alcor_state_q;
  foo = 1'b0;
  bar = 1'b0;
  bum = 1'b0;
  unique case (alcor_state_q)
    // StIdle: waiting for frame_start
    StIdle:
      if (frame_start) begin
        foo = 1'b1;
        alcor_state_d = StFrameStart;
      end
    // StFrameStart: Reset accumulators
    StFrameStart: begin
      // ... etc ...
    end
    // may be empty or used to catch parasitic states
    default: alcor_state_d = StIdle;
  endcase
end

// Register the state
always_ff @(posedge clk or negedge rst_n) begin
  if (!rst_n) begin
    alcor_state_q &lt;= StIdle;
  end else begin
    alcor_state_q &lt;= alcor_state_d;
  end
end
</code></pre>
<h3 id="ä½ç”µå¹³æœ‰æ•ˆä¿¡å·"><a href="#ä½ç”µå¹³æœ‰æ•ˆä¿¡å·" class="headerlink" title="ä½ç”µå¹³æœ‰æ•ˆä¿¡å·"></a>ä½ç”µå¹³æœ‰æ•ˆä¿¡å·</h3><p><em><strong><code>_n</code>åç¼€è¡¨ç¤ºä½ç”µå¹³æœ‰æ•ˆä¿¡å·ã€‚</strong></em></p>
<p>å¦‚æœä½¿ç”¨ä½ç”µå¹³æœ‰æ•ˆä¿¡å·ï¼Œå®ƒä»¬<code>_n</code>çš„åç§°ä¸­å¿…é¡»æœ‰åç¼€ã€‚å¦åˆ™ï¼Œæ‰€æœ‰ä¿¡å·éƒ½å‡å®šä¸ºé«˜ç”µå¹³æœ‰æ•ˆã€‚</p>
<h3 id="å·®åˆ†å¯¹"><a href="#å·®åˆ†å¯¹" class="headerlink" title="å·®åˆ†å¯¹"></a>å·®åˆ†å¯¹</h3><p><em><strong>ä½¿ç”¨<code>_p</code>å’Œ<code>_n</code>åç¼€è¡¨ç¤ºå·®åˆ†å¯¹ã€‚</strong></em></p>
<p>ä¾‹å¦‚ï¼Œ<code>in_p</code>åŒ…æ‹¬<code>in_n</code>ä¸€ä¸ªå·®åˆ†å¯¹ç»„ã€‚</p>
<h3 id="å»¶è¯¯"><a href="#å»¶è¯¯" class="headerlink" title="å»¶è¯¯"></a>å»¶è¯¯</h3><p><em><strong>å»¶è¿Ÿä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸçš„ä¿¡å·åº”ä»¥<code>_q</code>åç¼€ç»“å°¾ã€‚</strong></em></p>
<p>å¦‚æœä¸€ä¸ªä¿¡å·åªæ˜¯å¦ä¸€ä¸ªä¿¡å·çš„å»¶è¿Ÿç‰ˆæœ¬ï¼Œ<code>_q</code>åˆ™åº”ä½¿ç”¨åç¼€æ¥è¡¨ç¤ºè¿™ç§å…³ç³»ã€‚</p>
<p>å¦‚æœå¦ä¸€ä¸ªä¿¡å·éšåè¢«å¦ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå»¶è¿Ÿï¼Œåˆ™åº”ä½¿ç”¨<code>_q2</code>åç¼€æ ‡è¯†ä¸‹ä¸€ä¸ªä¿¡å·<code>_q3</code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<pre><code>always_ff @(posedge clk) begin
  data_valid_q &lt;= data_valid_d;
  data_valid_q2 &lt;= data_valid_q;
  data_valid_q3 &lt;= data_valid_q2;
end
</code></pre>
<h3 id="åŒ…çš„é€šé…ç¬¦å¯¼å…¥"><a href="#åŒ…çš„é€šé…ç¬¦å¯¼å…¥" class="headerlink" title="åŒ…çš„é€šé…ç¬¦å¯¼å…¥"></a>åŒ…çš„é€šé…ç¬¦å¯¼å…¥</h3><p>é€šé…ç¬¦å¯¼å…¥è¯­æ³•ï¼Œä¾‹å¦‚<code>import ip_pkg::*;</code>ï¼Œä»…åœ¨åŒ…ä¸ä½¿ç”¨è¯¥åŒ…çš„æ¨¡å—å±äºåŒä¸€ IP çš„æƒ…å†µä¸‹æ‰å…è®¸ä½¿ç”¨ã€‚é€šé…ç¬¦å¯¼å…¥è¯­å¥å¿…é¡»æ”¾åœ¨æ¨¡å—å¤´æˆ–æ¨¡å—ä½“ä¸­ã€‚</p>
<p>ğŸ‘</p>
<pre><code>// mod_a_pkg.sv and mod_a.sv are in the same IP.
// Packages can be imported in the module declaration if access to
// unqualified types is needed in the port list.

// mod_a_pkg.sv
package mod_a_pkg;

  typedef struct packed {
    ...
  } a_req_t;
endpackage

// mod_a.sv
module mod_a
  import mod_a_pkg::*;
(
  ...
  a_req_t a_req,
  ...
);

endmodule
</code></pre>
<p>ğŸ‘</p>
<pre><code>// mod_a
module mod_a ();

  // mod_a_pkg.sv and mod_a.sv are in the same IP.
  import mod_a_pkg::*;

  ...

  a_req_t a_req;

endmodule
</code></pre>
<p>é™¤ä¸Šè¿°æƒ…å†µå¤–ï¼Œä¸å…è®¸é€šé…ç¬¦å¯¼å…¥ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹å¯èƒ½ä¼š<code>mod_a</code> åœ¨æºåˆ—è¡¨ä¸­çš„æ¨¡å—ä¸­åˆ›å»ºåç§°å†²çªã€‚</p>
<p>ğŸ‘</p>
<pre><code>// mod_a.sv
import mod_a_pkg::*; // not allowed: imported to $root scope.

module mod_a ();

endmodule
</code></pre>
<p>å…¶ä»–ä¸å¥½çš„ä¾‹å­ï¼š</p>
<p>ğŸ‘</p>
<pre><code>// wildcard import for other packages outside of the IP
module mod_a import mod_b_pkg::*; ();
</code></pre>
<p>ğŸ‘</p>
<pre><code>module mod_a ();

  // not allowed: wildcard import of a package from a different IP
  import mod_b_pkg::*;

endmodule
</code></pre>
<h3 id="æ–­è¨€å®"><a href="#æ–­è¨€å®" class="headerlink" title="æ–­è¨€å®"></a>æ–­è¨€å®</h3><p>é¼“åŠ±åœ¨æ•´ä¸ªè®¾è®¡ä¸­ä½¿ç”¨ SystemVerilog æ–­è¨€ (SVA) æ¥æ£€æŸ¥åŠŸèƒ½æ­£ç¡®æ€§å¹¶æ ‡è®°æ— æ•ˆæ¡ä»¶ã€‚ä¸ºäº†æé«˜ç”Ÿäº§åŠ›å¹¶ä¿æŒæ–­è¨€ç®€æ´æ˜äº†ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–­è¨€å®ï¼š</p>
<pre><code>// immediate assertion, to be placed within a process.
`ASSERT_I(&lt;name&gt;, &lt;property&gt;)
// immediate assertion wrapped within an initial block. can be used for things
// like parameter checking.
`ASSERT_INIT(&lt;name&gt;, &lt;property&gt;)
// concurrent assertion to be used for functional assertions.
`ASSERT(&lt;name&gt;, &lt;property&gt;, &lt;clk&gt;, &lt;reset condition&gt;)
// concurrent assertion that checks that a signal has a known value after reset
// (i.e. that the signal is not `X`).
`ASSERT_KNOWN(&lt;name&gt;, &lt;signal&gt;, &lt;clk&gt;, &lt;reset condition&gt;)
</code></pre>
<p>è¿™äº›å®çš„å®ç°ï¼ˆåŒ…æ‹¬å…¶ä»–æœ‰ç”¨çš„å˜ä½“ï¼‰å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š <a target="_blank" rel="noopener" href="https://github.com/lowRISC/opentitan/blob/master/hw/ip/prim/rtl/prim_assert.sv">https ://github.com/lowRISC/opentitan/blob/master/hw/ip/prim/rtl/prim_assert.sv</a></p>
<h4 id="å…³äºå®‰å…¨å…³é”®åº”ç”¨ç¨‹åºçš„è¯´æ˜"><a href="#å…³äºå®‰å…¨å…³é”®åº”ç”¨ç¨‹åºçš„è¯´æ˜" class="headerlink" title="å…³äºå®‰å…¨å…³é”®åº”ç”¨ç¨‹åºçš„è¯´æ˜"></a>å…³äºå®‰å…¨å…³é”®åº”ç”¨ç¨‹åºçš„è¯´æ˜</h4><p>å¯¹äºå®‰å…¨å…³é”®åº”ç”¨ç¨‹åºï¼Œæ¶‰åŠä¿æŠ¤ case è¯­å¥å’Œä¸‰å…ƒç»„çš„æ–­è¨€å®çš„åç§°åº”ä»¥<code>_SEC</code>. è¿™å¯ä»¥åœ¨è®¾è®¡è¿‡ç¨‹çš„åæœŸé˜¶æ®µå¯¹è¿™äº›è¯­å¥è¿›è¡Œç‰¹å®šäºå®‰å…¨æ€§çš„åå¤„ç†ã€‚å°±åŠŸèƒ½è€Œè¨€ï¼Œè¿™äº›å®åº”è¯¥ä¸åŸå§‹æ–­è¨€ç›¸åŒï¼Œå³</p>
<pre><code>`define ASSERT_SEC `ASSERT
`define ASSERT_I_SEC `ASSERT_I
`define ASSERT_KNOWN_SEC `ASSERT_KNOWN
</code></pre>
<p>å¾ˆå¿«ï¼Œå°†åœ¨å•ç‹¬çš„æ–‡æ¡£ä¸­æä¾›æ›´å¤šå®‰å…¨æ–­è¨€å’Œç¼–ç é£æ ¼æŒ‡å—ã€‚</p>
<h2 id="é™„å½•-ç²¾ç®€é£æ ¼æŒ‡å—"><a href="#é™„å½•-ç²¾ç®€é£æ ¼æŒ‡å—" class="headerlink" title="é™„å½• - ç²¾ç®€é£æ ¼æŒ‡å—"></a>é™„å½• - ç²¾ç®€é£æ ¼æŒ‡å—</h2><p>è¿™æ˜¯å¯ç§»æ¤æ ·å¼æŒ‡å—çš„ç®€çŸ­æ‘˜è¦ã€‚æœ‰å…³è§£é‡Šç¤ºä¾‹å’Œä¾‹å¤–æƒ…å†µï¼Œè¯·å‚é˜…æ­£æ–‡ã€‚</p>
<h3 id="åŸºæœ¬æ ·å¼å…ƒç´ "><a href="#åŸºæœ¬æ ·å¼å…ƒç´ " class="headerlink" title="åŸºæœ¬æ ·å¼å…ƒç´ "></a>åŸºæœ¬æ ·å¼å…ƒç´ </h3><ul>
<li>ä½¿ç”¨ SystemVerilog-2012 çº¦å®šï¼Œæ–‡ä»¶å‘½åä¸º module.svï¼Œæ¯ä¸ªæ¨¡å—ä¸€ä¸ªæ–‡ä»¶</li>
<li>åªæœ‰ ASCIIï¼Œæ¯è¡Œ<strong>100 ä¸ªå­—ç¬¦ï¼Œ****æ²¡æœ‰</strong>åˆ¶è¡¨ç¬¦ï¼Œæ‰€æœ‰é…å¯¹å…³é”®å­—çš„æ¯ä¸ªç¼©è¿›<strong>ä¸¤ä¸ªç©ºæ ¼ã€‚</strong></li>
<li>C++ é£æ ¼æ³¨é‡Š<code>//</code></li>
<li>å¯¹äºä¸€è¡Œä¸­çš„å¤šä¸ªé¡¹ç›®ï¼Œ<strong>ä¸€ä¸ª</strong>ç©ºæ ¼å¿…é¡»åˆ†éš”é€—å·å’Œä¸‹ä¸€ä¸ªå­—ç¬¦</li>
<li>åœ¨å…³é”®å­—å’ŒäºŒå…ƒè¿ç®—ç¬¦å‘¨å›´åŒ…å«<strong>ç©ºæ ¼</strong></li>
<li>æ¡ˆä¾‹é¡¹ç›®å’Œå†’å·ã€å‡½æ•°/ä»»åŠ¡/å®è°ƒç”¨å’Œå·¦æ‹¬å·ä¹‹é—´<strong>æ²¡æœ‰ç©ºæ ¼</strong></li>
<li>æ¢è¡Œåº”è¯¥ç¼©è¿›<strong>å››ä¸ª</strong>ç©ºæ ¼</li>
<li><code>begin</code>å¿…é¡»ä¸å‰é¢çš„å…³é”®å­—åœ¨åŒä¸€è¡Œå¹¶ç»“æŸè¡Œ</li>
<li><code>end</code>å¿…é¡»å¼€å§‹ä¸€ä¸ªæ–°è¡Œ</li>
</ul>
<h3 id="æ„é€ å‘½å"><a href="#æ„é€ å‘½å" class="headerlink" title="æ„é€ å‘½å"></a>æ„é€ å‘½å</h3><ul>
<li>å¯¹å®ä¾‹åç§°ã€ä¿¡å·ã€å£°æ˜ã€å˜é‡ã€ç±»å‹ä½¿ç”¨<strong>lower_snake_case</strong></li>
<li>å¯¹å¯è°ƒå‚æ•°ã€æšä¸¾å€¼åç§°ä½¿ç”¨<strong>UpperCamelCase</strong></li>
<li>å°†<strong>ALL_CAPS</strong>ç”¨äºå¸¸é‡å¹¶å®šä¹‰å®</li>
<li>ä¸»æ—¶é’Ÿä¿¡å·å‘½åä¸º<code>clk</code>ã€‚æ‰€æœ‰æ—¶é’Ÿä¿¡å·å¿…é¡»ä»¥<code>clk_</code></li>
<li>å¤ä½ä¿¡å·ä¸º<strong>ä½ç”µå¹³æœ‰æ•ˆ</strong>å’Œ<strong>å¼‚æ­¥</strong>ï¼Œé»˜è®¤åç§°ä¸º <code>rst_n</code></li>
<li>ä¿¡å·åç§°åº”å…·æœ‰æè¿°æ€§å¹¶åœ¨æ•´ä¸ªå±‚æ¬¡ç»“æ„ä¸­ä¿æŒä¸€è‡´</li>
</ul>
<h3 id="ä¿¡å·å’Œç±»å‹çš„åç¼€"><a href="#ä¿¡å·å’Œç±»å‹çš„åç¼€" class="headerlink" title="ä¿¡å·å’Œç±»å‹çš„åç¼€"></a>ä¿¡å·å’Œç±»å‹çš„åç¼€</h3><ul>
<li>æ·»åŠ <code>_i</code>åˆ°æ¨¡å—è¾“å…¥ã€<code>_o</code>æ¨¡å—è¾“å‡ºæˆ–<code>_io</code>åŒå‘æ¨¡å—ä¿¡å·</li>
<li>æ³¨å†Œä¿¡å·çš„è¾“å…¥ï¼ˆä¸‹ä¸€ä¸ªçŠ¶æ€ï¼‰åº”è¯¥æœ‰<code>_d</code>ï¼Œè¾“å‡º<code>_q</code>ä½œä¸ºåç¼€</li>
<li>ä¿¡å·çš„æµæ°´çº¿ç‰ˆæœ¬åº”å‘½åä¸º<code>_q2</code>,<code>_q3</code>ç­‰ä»¥åæ˜ å®ƒä»¬çš„å»¶è¿Ÿ</li>
<li>ä½ç”µå¹³æœ‰æ•ˆä¿¡å·åº”ä½¿ç”¨<code>_n</code>ã€‚å½“ä½¿ç”¨å·®åˆ†ä¿¡å· <code>_p</code>ç”¨äºé«˜ç”µå¹³æœ‰æ•ˆ</li>
<li>æšä¸¾ç±»å‹åº”ä»¥<code>_e</code></li>
<li>å¤šä¸ªåç¼€ä¸ä¼šç”¨ . åˆ†éš”<code>_</code>ã€‚<code>n</code>åº”è¯¥å…ˆå‡ºç° <code>i</code>ï¼Œ<code>o</code>æˆ–<code>io</code>æœ€åå‡ºç°</li>
</ul>
<h3 id="è¯­è¨€ç‰¹ç‚¹-1"><a href="#è¯­è¨€ç‰¹ç‚¹-1" class="headerlink" title="è¯­è¨€ç‰¹ç‚¹"></a>è¯­è¨€ç‰¹ç‚¹</h3><ul>
<li>å¯¹æ¨¡å—ä½¿ç”¨<strong>å®Œæ•´çš„ç«¯å£å£°æ˜æ ·å¼</strong>ï¼Œé¦–å…ˆå£°æ˜çš„ä»»ä½•æ—¶é’Ÿå’Œå¤ä½</li>
<li>ä½¿ç”¨<strong>å‘½åå‚æ•°</strong>è¿›è¡Œå®ä¾‹åŒ–ï¼Œæ‰€æœ‰å£°æ˜çš„ç«¯å£å¿…é¡»å­˜åœ¨ï¼Œæ²¡æœ‰<code>.*</code></li>
<li>é¡¶çº§å‚æ•°ä¼˜äº<code> </code>define`å…¨å±€å‚æ•°</li>
<li>ä½¿ç”¨<strong>ç¬¦å·å‘½åçš„å¸¸é‡</strong>è€Œä¸æ˜¯åŸå§‹æ•°å­—</li>
<li>åº”<code>localparam</code>åœ¨å•ç‹¬çš„ <strong>.svh</strong>æ–‡ä»¶ä¸­å£°æ˜å±€éƒ¨å¸¸é‡å’Œå…¨å±€å¸¸é‡ã€‚</li>
<li><code>logic</code>ä¼˜äº<code>reg</code>and <code>wire</code>ï¼Œæ˜ç¡®å£°æ˜æ‰€æœ‰ä¿¡å·</li>
<li><code>always_comb</code>,<code>always_ff</code>å¹¶ä¸”<code>always_latch</code>ä¼˜å…ˆäº<code>always</code></li>
<li>ä¸é¼“åŠ±ä½¿ç”¨æ¥å£</li>
<li>é¡ºåºé€»è¾‘å¿…é¡»ä½¿ç”¨<strong>éé˜»å¡</strong>èµ‹å€¼</li>
<li>ç»„åˆå—å¿…é¡»ä½¿ç”¨<strong>å—</strong>åˆ†é…</li>
<li>ä¸é¼“åŠ±ä½¿ç”¨é”å­˜å™¨ï¼Œå°½å¯èƒ½ä½¿ç”¨è§¦å‘å™¨</li>
<li><code>X</code>å¼ºçƒˆå»ºè®®ä¸è¦åœ¨ RTL ä¸­ä½¿ç”¨åˆ†é…ï¼Œè€Œæ˜¯ä½¿ç”¨ SVA æ¥æ£€æŸ¥æ— æ•ˆè¡Œä¸ºã€‚</li>
<li><code>assign</code>åœ¨å¯è¡Œçš„æƒ…å†µä¸‹é¦–é€‰è¯­å¥ã€‚</li>
<li>ä½¿ç”¨<code>unique case</code>å¹¶å§‹ç»ˆå®šä¹‰ä¸€ä¸ª<code>default</code>æ¡ˆä¾‹</li>
<li>åœ¨ä½¿ç”¨æœ‰ç¬¦å·ç®—æœ¯çš„åœ°æ–¹ä½¿ç”¨å¯ç”¨çš„æœ‰ç¬¦å·ç®—æœ¯ç»“æ„</li>
<li>æ‰“å°æ—¶ä½¿ç”¨<code>0b</code>å’Œ<code>0x</code>ä½œä¸ºäºŒè¿›åˆ¶å’Œåå…­è¿›åˆ¶çš„å‰ç¼€ã€‚ç”¨äº <code>_</code>æ¸…æ™°</li>
<li>ä½¿ç”¨é€»è¾‘ç»“æ„ (ie <code>||</code>) è¿›è¡Œé€»è¾‘æ¯”è¾ƒï¼ŒæŒ‰ä½ (ie <code>|</code>) è¿›è¡Œæ•°æ®æ¯”è¾ƒ</li>
<li>ä½å‘é‡å’Œå‹ç¼©æ•°ç»„å¿…é¡»æ˜¯ little-endianï¼Œunpacked æ•°ç»„å¿…é¡»æ˜¯ big-endian</li>
<li>FSMï¼šçŠ¶æ€å¯„å­˜å™¨çš„è¿‡ç¨‹ä¸­é™¤äº†å¤ä½ä¹‹å¤–ä¸åº”è¯¥æ‰§è¡Œ<strong>ä»»ä½•é€»è¾‘</strong></li>
<li>ä¸€ä¸ªç»„åˆæµç¨‹åº”è¯¥é¦–å…ˆå®šä¹‰æµç¨‹ä¸­æ‰€æœ‰è¾“å‡ºçš„<strong>é»˜è®¤å€¼</strong></li>
<li>ä¸‹ä¸€ä¸ªçŠ¶æ€å˜é‡çš„é»˜è®¤å€¼åº”è¯¥æ˜¯å½“å‰çŠ¶æ€</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        æ–‡ç« ä½œè€…:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">æ•…é‡Œçš„æ¢¦</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        æ–‡ç« é“¾æ¥:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://wutaoizp.github.io/2022/10/27/lowrisc-verilog-bian-ma-feng-ge-zhi-nan/">https://wutaoizp.github.io/2022/10/27/lowrisc-verilog-bian-ma-feng-ge-zhi-nan/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        ç‰ˆæƒå£°æ˜:
                    </i>
                </span>
                <span class="reprint-info">
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº
                    <a href="/about" target="_blank">æ•…é‡Œçš„æ¢¦</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>å¤åˆ¶æˆåŠŸï¼Œè¯·éµå¾ªæœ¬æ–‡çš„è½¬è½½è§„åˆ™</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">æŸ¥çœ‹</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">æ— æ ‡ç­¾</span>
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>å¾®ä¿¡æ‰«ä¸€æ‰«å³å¯åˆ†äº«ï¼</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">èµ</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">ä½ çš„èµè¯†æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">æ”¯ä»˜å®</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">å¾® ä¿¡</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    
        <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>è¯„è®º</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: '',
        owner: '',
        admin: null,
        id: '2022-10-27T20-32-21',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;ä¸Šä¸€ç¯‡</div>
            <div class="card">
                <a href="/2022/11/01/ucie-specification-revision-1.0/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/18.jpg" class="responsive-img" alt="UCIe(Universal Chiplet Interconnect Express) spec 1.0(ç¬¬ä¸€ç« )">
                        
                        <span class="card-title">UCIe(Universal Chiplet Interconnect Express) spec 1.0(ç¬¬ä¸€ç« )</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-11-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            æ•…é‡Œçš„æ¢¦
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                ä¸‹ä¸€ç¯‡&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/10/27/ru-he-xie-testbench/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/0.jpg" class="responsive-img" alt="TestBenchæ–‡ä»¶ç¼–å†™">
                        
                        <span class="card-title">TestBenchæ–‡ä»¶ç¼–å†™</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-10-27
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            æ•…é‡Œçš„æ¢¦
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- ä»£ç å—åŠŸèƒ½ä¾èµ– -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- ä»£ç è¯­è¨€ -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- ä»£ç å—å¤åˆ¶ -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- ä»£ç å—æ”¶ç¼© -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;ç›®å½•</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC æ‚¬æµ®æŒ‰é’®. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* ä¿®å¤æ–‡ç« å¡ç‰‡ div çš„å®½åº¦. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // åˆ‡æ¢TOCç›®å½•å±•å¼€æ”¶ç¼©çš„ç›¸å…³æ“ä½œ.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="tencent"
                   type="playlist"
                   id="8463251865"
                   fixed='true'
                   autoplay='true'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2022</span>
            
            <span id="year">2022</span>
            <a href="/about" target="_blank">æ•…é‡Œçš„æ¢¦</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;æ€»è®¿é—®é‡:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;æ¬¡
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;æ€»è®¿é—®äººæ•°:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;äºº
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/" class="tooltipped" target="_blank" data-tooltip="è®¿é—®æˆ‘çš„GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:2207982844@qq.com" class="tooltipped" target="_blank" data-tooltip="é‚®ä»¶è”ç³»æˆ‘" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2207982844" class="tooltipped" target="_blank" data-tooltip="QQè”ç³»æˆ‘: 2207982844" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS è®¢é˜…" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- æœç´¢é®ç½©æ¡† -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;æœç´¢</span>
            <input type="search" id="searchInput" name="s" placeholder="è¯·è¾“å…¥æœç´¢çš„å…³é”®å­—"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
